{"version":3,"file":"pixi-graph.umd.min.js","sources":["../src/utils/text.ts","../node_modules/tslib/tslib.es6.js","../node_modules/pixi-viewport/dist/viewport.es.js","../node_modules/@pixi/math/lib/math.es.js","../node_modules/@pixi-essentials/cull/lib/cull.es.js","../node_modules/events/events.js","../node_modules/tiny-typed-emitter/lib/index.js","../node_modules/deepmerge/dist/cjs.js","../src/utils/style.ts","../src/texture-cache.ts","../node_modules/color-name/index.js","../node_modules/color-parse/index.mjs","../node_modules/color-space/hsl.js","../src/utils/color.ts","../node_modules/color-rgba/index.mjs","../src/renderers/node.ts","../src/renderers/node-label.ts","../src/node.ts","../src/renderers/edge.ts","../src/edge.ts","../src/graph.ts"],"sourcesContent":["import * as PIXI from 'pixi.js';\n\nconst WHITE = 0xffffff;\n\nexport enum TextType {\n  TEXT = 'TEXT',\n  BITMAP_TEXT = 'BITMAP_TEXT',\n  // TODO: SDF_TEXT\n  // see https://github.com/PixelsCommander/pixi-sdf-text/issues/12\n}\n\n// TODO: use PIXI.TextStyle directly?\nexport interface TextStyle {\n  fontFamily: string;\n  fontSize: number;\n}\n\nexport function textToPixi(type: TextType, content: string, style: TextStyle) {\n  let text;\n  if (type === TextType.TEXT) {\n    // TODO: convert to bitmap font with PIXI.BitmapFont.from?\n    text = new PIXI.Text(content, {\n      fontFamily: style.fontFamily,\n      fontSize: style.fontSize,\n      fill: WHITE\n    });\n  } else if (type === TextType.BITMAP_TEXT) {\n    text = new PIXI.BitmapText(content, {\n      fontName: style.fontFamily,\n      fontSize: style.fontSize\n    });\n  } else {\n    throw new Error('Invalid state');\n  }\n  text.roundPixels = true;\n  return text;\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import * as PIXI from 'pixi.js';\nimport { Rectangle, Point, Container, VERSION } from 'pixi.js';\n\n/**\r\n * @typedef ViewportTouch\r\n * @property {number} id\r\n * @property {PIXI.Point} last\r\n*/\r\n\r\n/**\r\n * handles all input for Viewport\r\n * @private\r\n */\r\nclass InputManager {\r\n    constructor(viewport) {\r\n        this.viewport = viewport;\r\n\r\n        /**\r\n         * list of active touches on viewport\r\n         * @type {ViewportTouch[]}\r\n         */\r\n        this.touches = [];\r\n        this.addListeners();\r\n    }\r\n\r\n    /**\r\n     * add input listeners\r\n     * @private\r\n     */\r\n    addListeners() {\r\n        this.viewport.interactive = true;\r\n        if (!this.viewport.forceHitArea) {\r\n            this.viewport.hitArea = new Rectangle(0, 0, this.viewport.worldWidth, this.viewport.worldHeight);\r\n        }\r\n        this.viewport.on('pointerdown', this.down, this);\r\n        this.viewport.on('pointermove', this.move, this);\r\n        this.viewport.on('pointerup', this.up, this);\r\n        this.viewport.on('pointerupoutside', this.up, this);\r\n        this.viewport.on('pointercancel', this.up, this);\r\n        this.viewport.on('pointerout', this.up, this);\r\n        this.wheelFunction = (e) => this.handleWheel(e);\r\n        this.viewport.options.divWheel.addEventListener('wheel', this.wheelFunction, { passive: this.viewport.options.passiveWheel });\r\n        this.isMouseDown = false;\r\n    }\r\n\r\n    /**\r\n     * removes all event listeners from viewport\r\n     * (useful for cleanup of wheel when removing viewport)\r\n     */\r\n    destroy() {\r\n        this.viewport.options.divWheel.removeEventListener('wheel', this.wheelFunction);\r\n    }\r\n\r\n    /**\r\n     * handle down events for viewport\r\n     * @param {PIXI.InteractionEvent} event\r\n     */\r\n    down(event) {\r\n        if (this.viewport.pause || !this.viewport.worldVisible) {\r\n            return\r\n        }\r\n        if (event.data.pointerType === 'mouse') {\r\n            this.isMouseDown = true;\r\n        }\r\n        else if (!this.get(event.data.pointerId)) {\r\n            this.touches.push({ id: event.data.pointerId, last: null });\r\n        }\r\n        if (this.count() === 1) {\r\n            this.last = event.data.global.clone();\r\n\r\n            // clicked event does not fire if viewport is decelerating or bouncing\r\n            const decelerate = this.viewport.plugins.get('decelerate', true);\r\n            const bounce = this.viewport.plugins.get('bounce', true);\r\n            if ((!decelerate || !decelerate.isActive()) && (!bounce || !bounce.isActive())) {\r\n                this.clickedAvailable = true;\r\n            }\r\n            else {\r\n                this.clickedAvailable = false;\r\n            }\r\n        }\r\n        else {\r\n            this.clickedAvailable = false;\r\n        }\r\n\r\n        const stop = this.viewport.plugins.down(event);\r\n        if (stop && this.viewport.options.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * clears all pointer events\r\n     */\r\n    clear() {\r\n        this.isMouseDown = false;\r\n        this.touches = [];\r\n        this.last = null;\r\n    }\r\n\r\n    /**\r\n     * @param {number} change\r\n     * @returns whether change exceeds threshold\r\n     */\r\n    checkThreshold(change) {\r\n        if (Math.abs(change) >= this.viewport.threshold) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handle move events for viewport\r\n     * @param {PIXI.InteractionEvent} event\r\n     */\r\n    move(event) {\r\n        if (this.viewport.pause || !this.viewport.worldVisible) {\r\n            return\r\n        }\r\n\r\n        const stop = this.viewport.plugins.move(event);\r\n\r\n        if (this.clickedAvailable) {\r\n            const distX = event.data.global.x - this.last.x;\r\n            const distY = event.data.global.y - this.last.y;\r\n            if (this.checkThreshold(distX) || this.checkThreshold(distY)) {\r\n                this.clickedAvailable = false;\r\n            }\r\n        }\r\n\r\n        if (stop && this.viewport.options.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * handle up events for viewport\r\n     * @param {PIXI.InteractionEvent} event\r\n     */\r\n    up(event) {\r\n        if (this.viewport.pause || !this.viewport.worldVisible) {\r\n            return\r\n        }\r\n\r\n        if (event.data.pointerType === 'mouse') {\r\n            this.isMouseDown = false;\r\n        }\r\n\r\n        if (event.data.pointerType !== 'mouse') {\r\n            this.remove(event.data.pointerId);\r\n        }\r\n\r\n        const stop = this.viewport.plugins.up(event);\r\n\r\n        if (this.clickedAvailable && this.count() === 0) {\r\n            this.viewport.emit('clicked', { event: event, screen: this.last, world: this.viewport.toWorld(this.last), viewport: this });\r\n            this.clickedAvailable = false;\r\n        }\r\n\r\n        if (stop && this.viewport.options.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * gets pointer position if this.interaction is set\r\n     * @param {WheelEvent} event\r\n     * @return {PIXI.Point}\r\n     */\r\n    getPointerPosition(event) {\r\n        let point = new Point();\r\n        if (this.viewport.options.interaction) {\r\n            this.viewport.options.interaction.mapPositionToPoint(point, event.clientX, event.clientY);\r\n        }\r\n        else {\r\n            point.x = event.clientX;\r\n            point.y = event.clientY;\r\n        }\r\n        return point\r\n    }\r\n\r\n    /**\r\n     * handle wheel events\r\n     * @param {WheelEvent} event\r\n     */\r\n    handleWheel(event) {\r\n        if (this.viewport.pause || !this.viewport.worldVisible) {\r\n            return\r\n        }\r\n\r\n        // do not handle events coming from other elements\r\n        if (this.viewport.options.interaction && this.viewport.options.interaction.interactionDOMElement !== event.target) {\r\n            return\r\n        }\r\n\r\n        // only handle wheel events where the mouse is over the viewport\r\n        const point = this.viewport.toLocal(this.getPointerPosition(event));\r\n        if (this.viewport.left <= point.x && point.x <= this.viewport.right && this.viewport.top <= point.y && point.y <= this.viewport.bottom) {\r\n            const stop = this.viewport.plugins.wheel(event);\r\n            if (stop && !this.viewport.options.passiveWheel) {\r\n                event.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    pause() {\r\n        this.touches = [];\r\n        this.isMouseDown = false;\r\n    }\r\n\r\n    /**\r\n     * get touch by id\r\n     * @param {number} id\r\n     * @return {ViewportTouch}\r\n     */\r\n    get(id) {\r\n        for (let touch of this.touches) {\r\n            if (touch.id === id) {\r\n                return touch\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    /**\r\n     * remove touch by number\r\n     * @param {number} id\r\n     */\r\n    remove(id) {\r\n        for (let i = 0; i < this.touches.length; i++) {\r\n            if (this.touches[i].id === id) {\r\n                this.touches.splice(i, 1);\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {number} count of mouse/touch pointers that are down on the viewport\r\n     */\r\n    count() {\r\n        return (this.isMouseDown ? 1 : 0) + this.touches.length\r\n    }\r\n}\n\nconst PLUGIN_ORDER = ['drag', 'pinch', 'wheel', 'follow', 'mouse-edges', 'decelerate', 'aniamte', 'bounce', 'snap-zoom', 'clamp-zoom', 'snap', 'clamp'];\r\n\r\n/**\r\n * Use this to access current plugins or add user-defined plugins\r\n */\r\nclass PluginManager {\r\n    /**\r\n     * instantiated by Viewport\r\n     * @param {Viewport} viewport\r\n     */\r\n    constructor(viewport) {\r\n        this.viewport = viewport;\r\n        this.list = [];\r\n        this.plugins = {};\r\n    }\r\n\r\n    /**\r\n     * Inserts a named plugin or a user plugin into the viewport\r\n     * default plugin order: 'drag', 'pinch', 'wheel', 'follow', 'mouse-edges', 'decelerate', 'bounce', 'snap-zoom', 'clamp-zoom', 'snap', 'clamp'\r\n     * @param {string} name of plugin\r\n     * @param {Plugin} plugin - instantiated Plugin class\r\n     * @param {number} index to insert userPlugin (otherwise inserts it at the end)\r\n     */\r\n    add(name, plugin, index = PLUGIN_ORDER.length) {\r\n        this.plugins[name] = plugin;\r\n        const current = PLUGIN_ORDER.indexOf(name);\r\n        if (current !== -1) {\r\n            PLUGIN_ORDER.splice(current, 1);\r\n        }\r\n        PLUGIN_ORDER.splice(index, 0, name);\r\n        this.sort();\r\n    }\r\n\r\n    /**\r\n     * get plugin\r\n     * @param {string} name of plugin\r\n     * @param {boolean} [ignorePaused] return null if plugin is paused\r\n     * @return {Plugin}\r\n     */\r\n    get(name, ignorePaused) {\r\n        if (ignorePaused) {\r\n            if (this.plugins[name] && this.plugins[name].paused) {\r\n                return null\r\n            }\r\n        }\r\n        return this.plugins[name]\r\n    }\r\n\r\n    /**\r\n     * update all active plugins\r\n     * @ignore\r\n     * @param {number} elapsed type in milliseconds since last update\r\n     */\r\n    update(elapsed) {\r\n        for (let plugin of this.list) {\r\n            plugin.update(elapsed);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resize all active plugins\r\n     * @ignore\r\n     */\r\n    resize() {\r\n        for (let plugin of this.list) {\r\n            plugin.resize();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * clamps and resets bounce and decelerate (as needed) after manually moving viewport\r\n     */\r\n    reset() {\r\n        for (let plugin of this.list) {\r\n            plugin.reset();\r\n        }\r\n    }\r\n\r\n    /** removes all installed plugins */\r\n    removeAll() {\r\n        this.plugins = {};\r\n        this.sort();\r\n    }\r\n\r\n    /**\r\n     * removes installed plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    remove(name) {\r\n        if (this.plugins[name]) {\r\n            delete this.plugins[name];\r\n            this.viewport.emit(name + '-remove');\r\n            this.sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * pause plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    pause(name) {\r\n        if (this.plugins[name]) {\r\n            this.plugins[name].pause();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resume plugin\r\n     * @param {string} name of plugin (e.g., 'drag', 'pinch')\r\n     */\r\n    resume(name) {\r\n        if (this.plugins[name]) {\r\n            this.plugins[name].resume();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sort plugins according to PLUGIN_ORDER\r\n     * @ignore\r\n     */\r\n    sort() {\r\n        this.list = [];\r\n        for (let plugin of PLUGIN_ORDER) {\r\n            if (this.plugins[plugin]) {\r\n                this.list.push(this.plugins[plugin]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * handle down for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    down(event) {\r\n        let stop = false;\r\n        for (let plugin of this.list) {\r\n            if (plugin.down(event)) {\r\n                stop = true;\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle move for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move(event) {\r\n        let stop = false;\r\n        for (let plugin of this.viewport.plugins.list) {\r\n            if (plugin.move(event)) {\r\n                stop = true;\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle up for all plugins\r\n     * @ignore\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    up(event) {\r\n        let stop = false;\r\n        for (let plugin of this.list) {\r\n            if (plugin.up(event)) {\r\n                stop = true;\r\n            }\r\n        }\r\n        return stop\r\n    }\r\n\r\n    /**\r\n     * handle wheel event for all plugins\r\n     * @ignore\r\n     * @param {WheelEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    wheel(e) {\r\n        let result = false;\r\n        for (let plugin of this.list) {\r\n            if (plugin.wheel(e)) {\r\n                result = true;\r\n            }\r\n        }\r\n        return result\r\n    }\r\n}\n\n/**\r\n * derive this class to create user-defined plugins\r\n */\r\nclass Plugin {\r\n    /**\r\n     * @param {Viewport} parent\r\n     */\r\n    constructor(parent) {\r\n        this.parent = parent;\r\n        this.paused = false;\r\n    }\r\n\r\n    /** called when plugin is removed */\r\n    destroy() {}\r\n\r\n    /**\r\n     * handler for pointerdown PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    down() {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for pointermove PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move() {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for pointerup PIXI event\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    up() {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * handler for wheel event on div\r\n     * @param {WheelEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    wheel() {\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * called on each tick\r\n     * @param {number} elapsed time in millisecond since last update\r\n     */\r\n    update() { }\r\n\r\n    /** called when the viewport is resized */\r\n    resize() { }\r\n\r\n    /** called when the viewport is manually moved */\r\n    reset() { }\r\n\r\n    /** pause the plugin */\r\n    pause() {\r\n        this.paused = true;\r\n    }\r\n\r\n    /** un-pause the plugin */\r\n    resume() {\r\n        this.paused = false;\r\n    }\r\n}\n\n/**\r\n * @typedef {object} LastDrag\r\n * @property {number} x\r\n * @property {number} y\r\n * @property {PIXI.Point} parent\r\n */\r\n\r\n/**\r\n * @typedef DragOptions\r\n * @property {string} [direction=all] direction to drag\r\n * @property {boolean} [pressDrag=true] whether click to drag is active\r\n * @property {boolean} [wheel=true] use wheel to scroll in direction (unless wheel plugin is active)\r\n * @property {number} [wheelScroll=1] number of pixels to scroll with each wheel spin\r\n * @property {boolean} [reverse] reverse the direction of the wheel scroll\r\n * @property {(boolean|string)} [clampWheel=false] clamp wheel(to avoid weird bounce with mouse wheel)\r\n * @property {string} [underflow=center] where to place world if too small for screen\r\n * @property {number} [factor=1] factor to multiply drag to increase the speed of movement\r\n * @property {string} [mouseButtons=all] changes which mouse buttons trigger drag, use: 'all', 'left', right' 'middle', or some combination, like, 'middle-right'; you may want to set viewport.options.disableOnContextMenu if you want to use right-click dragging\r\n * @property {string[]} [keyToPress=null] array containing {@link key|https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code} codes of keys that can be pressed for the drag to be triggered, e.g.: ['ShiftLeft', 'ShiftRight'}.\r\n * @property {boolean} [ignoreKeyToPressOnTouch=false] ignore keyToPress for touch events\r\n * @property {number} [lineHeight=20] scaling factor for non-DOM_DELTA_PIXEL scrolling events\r\n */\r\n\r\nconst dragOptions = {\r\n    direction: 'all',\r\n    pressDrag: true,\r\n    wheel: true,\r\n    wheelScroll: 1,\r\n    reverse: false,\r\n    clampWheel: false,\r\n    underflow: 'center',\r\n    factor: 1,\r\n    mouseButtons: 'all',\r\n    keyToPress: null,\r\n    ignoreKeyToPressOnTouch: false,\r\n    lineHeight: 20,\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nclass Drag extends Plugin {\r\n    /**\r\n     * @param {Viewport} parent\r\n     * @param {DragOptions} options\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, dragOptions, options);\r\n        this.moved = false;\r\n        this.reverse = this.options.reverse ? 1 : -1;\r\n        this.xDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'x';\r\n        this.yDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'y';\r\n        this.keyIsPressed = false;\r\n\r\n        this.parseUnderflow();\r\n        this.mouseButtons(this.options.mouseButtons);\r\n        if (this.options.keyToPress) {\r\n            this.handleKeyPresses(this.options.keyToPress);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles keypress events and set the keyIsPressed boolean accordingly\r\n     * @param {array} codes - key codes that can be used to trigger drag event\r\n     */\r\n    handleKeyPresses(codes) {\r\n        window.addEventListener('keydown', e => {\r\n            if (codes.includes(e.code))\r\n                this.keyIsPressed = true;\r\n        });\r\n\r\n        window.addEventListener('keyup', e => {\r\n            if (codes.includes(e.code))\r\n                this.keyIsPressed = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * initialize mousebuttons array\r\n     * @param {string} buttons\r\n     */\r\n    mouseButtons(buttons) {\r\n        if (!buttons || buttons === 'all') {\r\n            this.mouse = [true, true, true];\r\n        } else {\r\n            this.mouse = [\r\n                buttons.indexOf('left') === -1 ? false : true,\r\n                buttons.indexOf('middle') === -1 ? false : true,\r\n                buttons.indexOf('right') === -1 ? false : true\r\n            ];\r\n        }\r\n    }\r\n\r\n    parseUnderflow() {\r\n        const clamp = this.options.underflow.toLowerCase();\r\n        if (clamp === 'center') {\r\n            this.underflowX = 0;\r\n            this.underflowY = 0;\r\n        } else {\r\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0;\r\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    checkButtons(event) {\r\n        const isMouse = event.data.pointerType === 'mouse';\r\n        const count = this.parent.input.count();\r\n        if ((count === 1) || (count > 1 && !this.parent.plugins.get('pinch', true))) {\r\n            if (!isMouse || this.mouse[event.data.button]) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    checkKeyPress(event) {\r\n        if (!this.options.keyToPress || this.keyIsPressed || (this.options.ignoreKeyToPressOnTouch && event.data.pointerType === 'touch'))\r\n            return true\r\n\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * @param {PIXI.InteractionEvent} event\r\n     */\r\n    down(event) {\r\n        if (this.paused || !this.options.pressDrag) {\r\n            return\r\n        }\r\n        if (this.checkButtons(event) && this.checkKeyPress(event)) {\r\n            this.last = { x: event.data.global.x, y: event.data.global.y };\r\n            this.current = event.data.pointerId;\r\n            return true\r\n        } else {\r\n            this.last = null;\r\n        }\r\n    }\r\n\r\n    get active() {\r\n        return this.moved\r\n    }\r\n\r\n    /**\r\n     * @param {PIXI.InteractionEvent} event\r\n     */\r\n    move(event) {\r\n        if (this.paused || !this.options.pressDrag) {\r\n            return\r\n        }\r\n        if (this.last && this.current === event.data.pointerId) {\r\n            const x = event.data.global.x;\r\n            const y = event.data.global.y;\r\n            const count = this.parent.input.count();\r\n            if (count === 1 || (count > 1 && !this.parent.plugins.get('pinch', true))) {\r\n                const distX = x - this.last.x;\r\n                const distY = y - this.last.y;\r\n                if (this.moved || ((this.xDirection && this.parent.input.checkThreshold(distX)) || (this.yDirection && this.parent.input.checkThreshold(distY)))) {\r\n                    const newPoint = { x, y };\r\n                    if (this.xDirection) {\r\n                        this.parent.x += (newPoint.x - this.last.x) * this.options.factor;\r\n                    }\r\n                    if (this.yDirection) {\r\n                        this.parent.y += (newPoint.y - this.last.y) * this.options.factor;\r\n                    }\r\n                    this.last = newPoint;\r\n                    if (!this.moved) {\r\n                        this.parent.emit('drag-start', { event: event, screen: new Point(this.last.x, this.last.y), world: this.parent.toWorld(new Point(this.last.x, this.last.y)), viewport: this.parent });\r\n                    }\r\n                    this.moved = true;\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'drag' });\r\n                    return true\r\n                }\r\n            } else {\r\n                this.moved = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    up(event) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        const touches = this.parent.input.touches;\r\n        if (touches.length === 1) {\r\n            const pointer = touches[0];\r\n            if (pointer.last) {\r\n                this.last = { x: pointer.last.x, y: pointer.last.y };\r\n                this.current = pointer.id;\r\n            }\r\n            this.moved = false;\r\n            return true\r\n        } else if (this.last) {\r\n            if (this.moved) {\r\n                const screen = new Point(this.last.x, this.last.y);\r\n                this.parent.emit('drag-end', { event: event, screen, world: this.parent.toWorld(screen), viewport: this.parent });\r\n                this.last = null;\r\n                this.moved = false;\r\n                return true\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {WheelEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    wheel(event) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        if (this.options.wheel) {\r\n            const wheel = this.parent.plugins.get('wheel', true);\r\n            if (!wheel) {\r\n                const step = event.deltaMode ? this.options.lineHeight : 1;\r\n                if (this.xDirection) {\r\n                    this.parent.x += event.deltaX * step * this.options.wheelScroll * this.reverse;\r\n                }\r\n                if (this.yDirection) {\r\n                    this.parent.y += event.deltaY * step * this.options.wheelScroll * this.reverse;\r\n                }\r\n                if (this.options.clampWheel) {\r\n                    this.clamp();\r\n                }\r\n                this.parent.emit('wheel-scroll', this.parent);\r\n                this.parent.emit('moved', { viewport: this.parent, type: 'wheel' });\r\n                if (!this.parent.options.passiveWheel) {\r\n                    event.preventDefault();\r\n                }\r\n                return true\r\n            }\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        this.last = null;\r\n        this.paused = false;\r\n    }\r\n\r\n    clamp() {\r\n        const decelerate = this.parent.plugins.get('decelerate', true) || {};\r\n        if (this.options.clampWheel !== 'y') {\r\n            if (this.parent.screenWorldWidth < this.parent.screenWidth) {\r\n                switch (this.underflowX) {\r\n                case -1:\r\n                    this.parent.x = 0;\r\n                    break\r\n                case 1:\r\n                    this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth);\r\n                    break\r\n                default:\r\n                    this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\r\n                }\r\n            } else {\r\n                if (this.parent.left < 0) {\r\n                    this.parent.x = 0;\r\n                    decelerate.x = 0;\r\n                } else if (this.parent.right > this.parent.worldWidth) {\r\n                    this.parent.x = -this.parent.worldWidth * this.parent.scale.x + this.parent.screenWidth;\r\n                    decelerate.x = 0;\r\n                }\r\n            }\r\n        }\r\n        if (this.options.clampWheel !== 'x') {\r\n            if (this.parent.screenWorldHeight < this.parent.screenHeight) {\r\n                switch (this.underflowY) {\r\n                case -1:\r\n                    this.parent.y = 0;\r\n                    break\r\n                case 1:\r\n                    this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight);\r\n                    break\r\n                default:\r\n                    this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\r\n                }\r\n            } else {\r\n                if (this.parent.top < 0) {\r\n                    this.parent.y = 0;\r\n                    decelerate.y = 0;\r\n                }\r\n                if (this.parent.bottom > this.parent.worldHeight) {\r\n                    this.parent.y = -this.parent.worldHeight * this.parent.scale.y + this.parent.screenHeight;\r\n                    decelerate.y = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @typedef {object} PinchOptions\r\n * @property {boolean} [noDrag] disable two-finger dragging\r\n * @property {number} [percent=1] percent to modify pinch speed\r\n * @property {number} [factor=1] factor to multiply two-finger drag to increase the speed of movement\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of center of two fingers\r\n * @property {('all'|'x'|'y')} [axis=all] axis to zoom\r\n */\r\n\r\nconst pinchOptions = {\r\n    noDrag: false,\r\n    percent: 1,\r\n    center: null,\r\n    factor: 1,\r\n    axis: 'all',\r\n};\r\n\r\nclass Pinch extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {PinchOptions} [options]\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, pinchOptions, options);\r\n    }\r\n\r\n    down() {\r\n        if (this.parent.input.count() >= 2) {\r\n            this.active = true;\r\n            return true\r\n        }\r\n    }\r\n\r\n    isAxisX() {\r\n        return ['all', 'x'].includes(this.options.axis)\r\n    }\r\n\r\n    isAxisY() {\r\n        return ['all', 'y'].includes(this.options.axis)\r\n    }\r\n\r\n    move(e) {\r\n        if (this.paused || !this.active) {\r\n            return\r\n        }\r\n\r\n        const x = e.data.global.x;\r\n        const y = e.data.global.y;\r\n\r\n        const pointers = this.parent.input.touches;\r\n        if (pointers.length >= 2) {\r\n            const first = pointers[0];\r\n            const second = pointers[1];\r\n            const last = (first.last && second.last) ? Math.sqrt(Math.pow(second.last.x - first.last.x, 2) + Math.pow(second.last.y - first.last.y, 2)) : null;\r\n            if (first.id === e.data.pointerId) {\r\n                first.last = { x, y, data: e.data };\r\n            }\r\n            else if (second.id === e.data.pointerId) {\r\n                second.last = { x, y, data: e.data };\r\n            }\r\n            if (last) {\r\n                let oldPoint;\r\n                const point = { x: first.last.x + (second.last.x - first.last.x) / 2, y: first.last.y + (second.last.y - first.last.y) / 2 };\r\n                if (!this.options.center) {\r\n                    oldPoint = this.parent.toLocal(point);\r\n                }\r\n                let dist = Math.sqrt(Math.pow(second.last.x - first.last.x, 2) + Math.pow(second.last.y - first.last.y, 2));\r\n                dist = dist === 0 ? dist = 0.0000000001 : dist;\r\n                const change = (1 - last / dist) * this.options.percent * (this.isAxisX() ? this.parent.scale.x : this.parent.scale.y);\r\n                if (this.isAxisX()) {\r\n                    this.parent.scale.x += change;\r\n                }\r\n                if (this.isAxisY()) {\r\n                    this.parent.scale.y += change;\r\n                }\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'pinch', center: point });\r\n                const clamp = this.parent.plugins.get('clamp-zoom', true);\r\n                if (clamp) {\r\n                    clamp.clamp();\r\n                }\r\n                if (this.options.center) {\r\n                    this.parent.moveCenter(this.options.center);\r\n                }\r\n                else {\r\n                    const newPoint = this.parent.toGlobal(oldPoint);\r\n                    this.parent.x += (point.x - newPoint.x) * this.options.factor;\r\n                    this.parent.y += (point.y - newPoint.y) * this.options.factor;\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'pinch' });\r\n                }\r\n                if (!this.options.noDrag && this.lastCenter) {\r\n                    this.parent.x += (point.x - this.lastCenter.x) * this.options.factor;\r\n                    this.parent.y += (point.y - this.lastCenter.y) * this.options.factor;\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'pinch' });\r\n                }\r\n                this.lastCenter = point;\r\n                this.moved = true;\r\n            }\r\n            else {\r\n                if (!this.pinching) {\r\n                    this.parent.emit('pinch-start', this.parent);\r\n                    this.pinching = true;\r\n                }\r\n            }\r\n            return true\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.pinching) {\r\n            if (this.parent.input.touches.length <= 1) {\r\n                this.active = false;\r\n                this.lastCenter = null;\r\n                this.pinching = false;\r\n                this.moved = false;\r\n                this.parent.emit('pinch-end', this.parent);\r\n                return true\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * There are three ways to clamp:\r\n * 1. direction: 'all' = the world is clamped to its world boundaries, ie, you cannot drag any part of the world offscreen\r\n *    direction: 'x' | 'y' = only the x or y direction is clamped to its world boundary\r\n * 2. left, right, top, bottom = true | number = the world is clamped to the world's pixel location for each side;\r\n *    if any of these are set to true, then the location is set to the boundary [0, viewport.worldWidth/viewport.worldHeight]\r\n *    eg: to allow the world to be completely dragged offscreen, set [-viewport.worldWidth, -viewport.worldHeight, viewport.worldWidth * 2, viewport.worldHeight * 2]\r\n *\r\n * Underflow determines what happens when the world is smaller than the viewport\r\n * 1. none = the world is clamped but there is no special behavior\r\n * 2. center = the world is centered on the viewport\r\n * 3. combination of top/bottom/center and left/right/center (case insensitive) = the world is stuck to the appropriate boundaries\r\n *\r\n * @typedef ClampOptions\r\n * @property {(number|boolean)} [left=false] clamp left; true = 0\r\n * @property {(number|boolean)} [right=false] clamp right; true = viewport.worldWidth\r\n * @property {(number|boolean)} [top=false] clamp top; true = 0\r\n * @property {(number|boolean)} [bottom=false] clamp bottom; true = viewport.worldHeight\r\n * @property {string} [direction] (all, x, or y) using clamps of [0, viewport.worldWidth/viewport.worldHeight]; replaces left/right/top/bottom if set\r\n * @property {string} [underflow=center] where to place world if too small for screen (e.g., top-right, center, none, bottomleft)\r\n */\r\n\r\nconst clampOptions =\r\n{\r\n    left: false,\r\n    right: false,\r\n    top: false,\r\n    bottom: false,\r\n    direction: null,\r\n    underflow: 'center'\r\n};\r\n\r\nclass Clamp extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {ClampOptions} [options]\r\n     */\r\n    constructor(parent, options={})\r\n    {\r\n        super(parent);\r\n        this.options = Object.assign({}, clampOptions, options);\r\n        if (this.options.direction)\r\n        {\r\n            this.options.left = this.options.direction === 'x' || this.options.direction === 'all' ? true : null;\r\n            this.options.right = this.options.direction === 'x' || this.options.direction === 'all' ? true : null;\r\n            this.options.top = this.options.direction === 'y' || this.options.direction === 'all' ? true : null;\r\n            this.options.bottom = this.options.direction === 'y' || this.options.direction === 'all' ? true : null;\r\n        }\r\n        this.parseUnderflow();\r\n        this.last = { x: null, y: null, scaleX: null, scaleY: null };\r\n        this.update();\r\n    }\r\n\r\n    parseUnderflow()\r\n    {\r\n        const clamp = this.options.underflow.toLowerCase();\r\n        if (clamp === 'none')\r\n        {\r\n            this.noUnderflow = true;\r\n        }\r\n        else if (clamp === 'center')\r\n        {\r\n            this.underflowX = this.underflowY = 0;\r\n            this.noUnderflow = false;\r\n        }\r\n        else\r\n        {\r\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0;\r\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0;\r\n            this.noUnderflow = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * handle move events\r\n     * @param {PIXI.InteractionEvent} event\r\n     * @returns {boolean}\r\n     */\r\n    move()\r\n    {\r\n        this.update();\r\n        return false\r\n    }\r\n\r\n    update()\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        // only clamp on change\r\n        if (this.parent.x === this.last.x && this.parent.y === this.last.y && this.parent.scale.x === this.last.scaleX && this.parent.scale.y === this.last.scaleY)\r\n        {\r\n            return\r\n        }\r\n        const original = { x: this.parent.x, y: this.parent.y };\r\n        const decelerate = this.parent.plugins['decelerate'] || {};\r\n        if (this.options.left !== null || this.options.right !== null)\r\n        {\r\n            let moved = false;\r\n            if (!this.noUnderflow && this.parent.screenWorldWidth < this.parent.screenWidth)\r\n            {\r\n                switch (this.underflowX)\r\n                {\r\n                    case -1:\r\n                        if (this.parent.x !== 0)\r\n                        {\r\n                            this.parent.x = 0;\r\n                            moved = true;\r\n                        }\r\n                        break\r\n                    case 1:\r\n                        if (this.parent.x !== this.parent.screenWidth - this.parent.screenWorldWidth)\r\n                        {\r\n                            this.parent.x = this.parent.screenWidth - this.parent.screenWorldWidth;\r\n                            moved = true;\r\n                        }\r\n                        break\r\n                    default:\r\n                        if (this.parent.x !== (this.parent.screenWidth - this.parent.screenWorldWidth) / 2)\r\n                        {\r\n                            this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\r\n                            moved = true;\r\n                        }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if (this.options.left !== null)\r\n                {\r\n                    if (this.parent.left < (this.options.left === true ? 0 : this.options.left))\r\n                    {\r\n                        this.parent.x = -(this.options.left === true ? 0 : this.options.left) * this.parent.scale.x;\r\n                        decelerate.x = 0;\r\n                        moved = true;\r\n                    }\r\n                }\r\n                if (this.options.right !== null)\r\n                {\r\n                    if (this.parent.right > (this.options.right === true ? this.parent.worldWidth : this.options.right))\r\n                    {\r\n                        this.parent.x = -(this.options.right === true ? this.parent.worldWidth : this.options.right) * this.parent.scale.x + this.parent.screenWidth;\r\n                        decelerate.x = 0;\r\n                        moved = true;\r\n                    }\r\n                }\r\n            }\r\n            if (moved)\r\n            {\r\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'clamp-x' });\r\n            }\r\n        }\r\n        if (this.options.top !== null || this.options.bottom !== null)\r\n        {\r\n            let moved = false;\r\n            if (!this.noUnderflow && this.parent.screenWorldHeight < this.parent.screenHeight)\r\n            {\r\n                switch (this.underflowY)\r\n                {\r\n                    case -1:\r\n                        if (this.parent.y !== 0)\r\n                        {\r\n                            this.parent.y = 0;\r\n                            moved = true;\r\n                        }\r\n                        break\r\n                    case 1:\r\n                        if (this.parent.y !== this.parent.screenHeight - this.parent.screenWorldHeight)\r\n                        {\r\n                            this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight);\r\n                            moved = true;\r\n                        }\r\n                        break\r\n                    default:\r\n                        if (this.parent.y !== (this.parent.screenHeight - this.parent.screenWorldHeight) / 2)\r\n                        {\r\n                            this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\r\n                            moved = true;\r\n                        }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if (this.options.top !== null)\r\n                {\r\n                    if (this.parent.top < (this.options.top === true ? 0 : this.options.top))\r\n                    {\r\n                        this.parent.y = -(this.options.top === true ? 0 : this.options.top) * this.parent.scale.y;\r\n                        decelerate.y = 0;\r\n                        moved = true;\r\n                    }\r\n                }\r\n                if (this.options.bottom !== null)\r\n                {\r\n                    if (this.parent.bottom > (this.options.bottom === true ? this.parent.worldHeight : this.options.bottom))\r\n                    {\r\n                        this.parent.y = -(this.options.bottom === true ? this.parent.worldHeight : this.options.bottom) * this.parent.scale.y + this.parent.screenHeight;\r\n                        decelerate.y = 0;\r\n                        moved = true;\r\n                    }\r\n                }\r\n            }\r\n            if (moved)\r\n            {\r\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'clamp-y' });\r\n            }\r\n        }\r\n        this.last.x = this.parent.x;\r\n        this.last.y = this.parent.y;\r\n        this.last.scaleX = this.parent.scale.x;\r\n        this.last.scaleY = this.parent.scale.y;\r\n    }\r\n\r\n    reset()\r\n    {\r\n        this.update();\r\n    }\r\n}\n\n/**\r\n * use either minimum width/height or minimum scale\r\n * @typedef {object} ClampZoomOptions\r\n * @property {number} [minWidth] minimum width\r\n * @property {number} [minHeight] minimum height\r\n * @property {number} [maxWidth] maximum width\r\n * @property {number} [maxHeight] maximum height\r\n * @property {number} [minScale] minimum scale\r\n * @property {number} [maxScale] minimum scale\r\n */\r\n\r\nconst clampZoomOptions = {\r\n    minWidth: null,\r\n    minHeight: null,\r\n    maxWidth: null,\r\n    maxHeight: null,\r\n    minScale: null,\r\n    maxScale: null\r\n};\r\n\r\nclass ClampZoom extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {ClampZoomOptions} [options]\r\n     */\r\n    constructor(parent, options={})\r\n    {\r\n        super(parent);\r\n        this.options = Object.assign({}, clampZoomOptions, options);\r\n        this.clamp();\r\n    }\r\n\r\n    resize()\r\n    {\r\n        this.clamp();\r\n    }\r\n\r\n    clamp()\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        if (this.options.minWidth || this.options.minHeight || this.options.maxWidth || this.options.maxHeight)\r\n        {\r\n            let width = this.parent.worldScreenWidth;\r\n            let height = this.parent.worldScreenHeight;\r\n            if (this.options.minWidth !== null && width < this.options.minWidth)\r\n            {\r\n                const original = this.parent.scale.x;\r\n                this.parent.fitWidth(this.options.minWidth, false, false, true);\r\n                this.parent.scale.y *= this.parent.scale.x / original;\r\n                width = this.parent.worldScreenWidth;\r\n                height = this.parent.worldScreenHeight;\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' });\r\n            }\r\n            if (this.options.maxWidth !== null && width > this.options.maxWidth)\r\n            {\r\n                const original = this.parent.scale.x;\r\n                this.parent.fitWidth(this.options.maxWidth, false, false, true);\r\n                this.parent.scale.y *= this.parent.scale.x / original;\r\n                width = this.parent.worldScreenWidth;\r\n                height = this.parent.worldScreenHeight;\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' });\r\n            }\r\n            if (this.options.minHeight !== null && height < this.options.minHeight)\r\n            {\r\n                const original = this.parent.scale.y;\r\n                this.parent.fitHeight(this.options.minHeight, false, false, true);\r\n                this.parent.scale.x *= this.parent.scale.y / original;\r\n                width = this.parent.worldScreenWidth;\r\n                height = this.parent.worldScreenHeight;\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' });\r\n            }\r\n            if (this.options.maxHeight !== null && height > this.options.maxHeight)\r\n            {\r\n                const original = this.parent.scale.y;\r\n                this.parent.fitHeight(this.options.maxHeight, false, false, true);\r\n                this.parent.scale.x *= this.parent.scale.y / original;\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' });\r\n            }\r\n        }\r\n        else\r\n        {\r\n            let scale = this.parent.scale.x;\r\n            if (this.options.minScale !== null && scale < this.options.minScale)\r\n            {\r\n                scale = this.options.minScale;\r\n            }\r\n            if (this.options.maxScale !== null && scale > this.options.maxScale)\r\n            {\r\n                scale = this.options.maxScale;\r\n            }\r\n            if (scale !== this.parent.scale.x) {\r\n                this.parent.scale.set(scale);\r\n                this.parent.emit('zoomed', { viewport: this.parent, type: 'clamp-zoom' });\r\n            }\r\n        }\r\n    }\r\n\r\n    reset()\r\n    {\r\n        this.clamp();\r\n    }\r\n}\n\n/**\r\n * @typedef {object} DecelerateOptions\r\n * @property {number} [friction=0.95] percent to decelerate after movement\r\n * @property {number} [bounce=0.8] percent to decelerate when past boundaries (only applicable when viewport.bounce() is active)\r\n * @property {number} [minSpeed=0.01] minimum velocity before stopping/reversing acceleration\r\n */\r\n\r\nconst decelerateOptions = {\r\n    friction: 0.98,\r\n    bounce: 0.8,\r\n    minSpeed: 0.01\r\n};\r\n\r\n/**\r\n * Time period of decay (1 frame)\r\n */\r\nconst TP = 16;\r\n\r\nclass Decelerate extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {DecelerateOptions} [options]\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, decelerateOptions, options);\r\n        this.saved = [];\r\n        this.timeSinceRelease = 0;\r\n        this.reset();\r\n        this.parent.on('moved', data => this.moved(data));\r\n    }\r\n\r\n    destroy() {\r\n        this.parent;\r\n    }\r\n\r\n    down() {\r\n        this.saved = [];\r\n        this.x = this.y = false;\r\n    }\r\n\r\n    isActive() {\r\n        return this.x || this.y\r\n    }\r\n\r\n    move() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        const count = this.parent.input.count();\r\n        if (count === 1 || (count > 1 && !this.parent.plugins.get('pinch', true))) {\r\n            this.saved.push({ x: this.parent.x, y: this.parent.y, time: performance.now() });\r\n            if (this.saved.length > 60) {\r\n                this.saved.splice(0, 30);\r\n            }\r\n        }\r\n    }\r\n\r\n    moved(data) {\r\n        if (this.saved.length) {\r\n            const last = this.saved[this.saved.length - 1];\r\n            if (data.type === 'clamp-x') {\r\n                if (last.x === data.original.x) {\r\n                    last.x = this.parent.x;\r\n                }\r\n            }\r\n            else if (data.type === 'clamp-y') {\r\n                if (last.y === data.original.y) {\r\n                    last.y = this.parent.y;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.parent.input.count() === 0 && this.saved.length) {\r\n            const now = performance.now();\r\n            for (let save of this.saved) {\r\n                if (save.time >= now - 100) {\r\n                    const time = now - save.time;\r\n                    this.x = (this.parent.x - save.x) / time;\r\n                    this.y = (this.parent.y - save.y) / time;\r\n                    this.percentChangeX = this.percentChangeY = this.options.friction;\r\n                    this.timeSinceRelease = 0;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * manually activate plugin\r\n     * @param {object} options\r\n     * @param {number} [options.x]\r\n     * @param {number} [options.y]\r\n     */\r\n    activate(options) {\r\n        options = options || {};\r\n        if (typeof options.x !== 'undefined') {\r\n            this.x = options.x;\r\n            this.percentChangeX = this.options.friction;\r\n        }\r\n        if (typeof options.y !== 'undefined') {\r\n            this.y = options.y;\r\n            this.percentChangeY = this.options.friction;\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        /*\r\n         * See https://github.com/davidfig/pixi-viewport/issues/271 for math.\r\n         *\r\n         * The viewport velocity (this.x, this.y) decays expoenential by the the decay factor\r\n         * (this.percentChangeX, this.percentChangeY) each frame. This velocity function is integrated\r\n         * to calculate the displacement.\r\n         */\r\n\r\n        const moved = this.x || this.y;\r\n\r\n        const ti = this.timeSinceRelease;\r\n        const tf = this.timeSinceRelease + elapsed;\r\n\r\n        if (this.x) {\r\n            const k = this.percentChangeX;\r\n            const lnk = Math.log(k);\r\n\r\n            this.parent.x += ((this.x * TP) / lnk) * (Math.pow(k, tf / TP) - Math.pow(k, ti / TP));\r\n        }\r\n        if (this.y) {\r\n            const k = this.percentChangeY;\r\n            const lnk = Math.log(k);\r\n\r\n            this.parent.y += ((this.y * TP) / lnk) * (Math.pow(k, tf / TP) - Math.pow(k, ti / TP));\r\n        }\r\n\r\n        this.timeSinceRelease += elapsed;\r\n        this.x *= Math.pow(this.percentChangeX, elapsed / TP);\r\n        this.y *= Math.pow(this.percentChangeY, elapsed / TP);\r\n\r\n        if (Math.abs(this.x) < this.options.minSpeed) {\r\n            this.x = 0;\r\n        }\r\n        if (Math.abs(this.y) < this.options.minSpeed) {\r\n            this.y = 0;\r\n        }\r\n\r\n        if (moved) {\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'decelerate' });\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.x = this.y = null;\r\n    }\r\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn) {\n  var module = { exports: {} };\n\treturn fn(module, module.exports), module.exports;\n}\n\nvar penner = createCommonjsModule(function (module, exports) {\n/*\n\tCopyright  2001 Robert Penner\n\tAll rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, \n\tare permitted provided that the following conditions are met:\n\n\tRedistributions of source code must retain the above copyright notice, this list of \n\tconditions and the following disclaimer.\n\tRedistributions in binary form must reproduce the above copyright notice, this list \n\tof conditions and the following disclaimer in the documentation and/or other materials \n\tprovided with the distribution.\n\n\tNeither the name of the author nor the names of contributors may be used to endorse \n\tor promote products derived from this software without specific prior written permission.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n\tEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n\tCOPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\tEXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n\tGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n\tAND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\tNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n\tOF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function() {\n  var penner, umd;\n\n  umd = function(factory) {\n    {\n      return module.exports = factory;\n    }\n  };\n\n  penner = {\n    linear: function(t, b, c, d) {\n      return c * t / d + b;\n    },\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n    easeInOutQuad: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t + b;\n      } else {\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n      }\n    },\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n    easeOutCubic: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t + 1) + b;\n    },\n    easeInOutCubic: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t + 2) + b;\n      }\n    },\n    easeInQuart: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t + b;\n    },\n    easeOutQuart: function(t, b, c, d) {\n      return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeInOutQuart: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t + b;\n      } else {\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n      }\n    },\n    easeInQuint: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t * t + b;\n    },\n    easeOutQuint: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    easeInOutQuint: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n      }\n    },\n    easeInSine: function(t, b, c, d) {\n      return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n    },\n    easeOutSine: function(t, b, c, d) {\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    },\n    easeInOutSine: function(t, b, c, d) {\n      return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n    },\n    easeInExpo: function(t, b, c, d) {\n      if (t === 0) {\n        return b;\n      } else {\n        return c * Math.pow(2, 10 * (t / d - 1)) + b;\n      }\n    },\n    easeOutExpo: function(t, b, c, d) {\n      if (t === d) {\n        return b + c;\n      } else {\n        return c * (-Math.pow(2, -10 * t / d) + 1) + b;\n      }\n    },\n    easeInOutExpo: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n      } else {\n        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n      }\n    },\n    easeInCirc: function(t, b, c, d) {\n      return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n    },\n    easeOutCirc: function(t, b, c, d) {\n      return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n    },\n    easeInOutCirc: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n      } else {\n        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n      }\n    },\n    easeInElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) ; else if ((t /= d) === 1) ;\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    easeOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) ; else if ((t /= d) === 1) ;\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    easeInOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) ; else if ((t /= d / 2) === 2) ;\n      if (!p) {\n        p = d * (.3 * 1.5);\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      if (t < 1) {\n        return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n      } else {\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n      }\n    },\n    easeInBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    easeOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    easeInOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n      }\n    },\n    easeInBounce: function(t, b, c, d) {\n      var v;\n      v = penner.easeOutBounce(d - t, 0, c, d);\n      return c - v + b;\n    },\n    easeOutBounce: function(t, b, c, d) {\n      if ((t /= d) < 1 / 2.75) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < 2 / 2.75) {\n        return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b;\n      } else if (t < 2.5 / 2.75) {\n        return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b;\n      } else {\n        return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b;\n      }\n    },\n    easeInOutBounce: function(t, b, c, d) {\n      var v;\n      if (t < d / 2) {\n        v = penner.easeInBounce(t * 2, 0, c, d);\n        return v * .5 + b;\n      } else {\n        v = penner.easeOutBounce(t * 2 - d, 0, c, d);\n        return v * .5 + c * .5 + b;\n      }\n    }\n  };\n\n  umd(penner);\n\n}).call(commonjsGlobal);\n});\n\n/**\r\n * returns correct Penner equation using string or Function\r\n * @param {(function|string)} [ease]\r\n * @param {defaults} default penner equation to use if none is provided\r\n */\r\nfunction ease(ease, defaults)\r\n{\r\n    if (!ease)\r\n    {\r\n        return penner[defaults]\r\n    }\r\n    else if (typeof ease === 'function')\r\n    {\r\n        return ease\r\n    }\r\n    else if (typeof ease === 'string')\r\n    {\r\n        return penner[ease]\r\n    }\r\n}\n\n/**\r\n * @typedef {options} BounceOptions\r\n * @property {string} [sides=all] all, horizontal, vertical, or combination of top, bottom, right, left (e.g., 'top-bottom-right')\r\n * @property {number} [friction=0.5] friction to apply to decelerate if active\r\n * @property {number} [time=150] time in ms to finish bounce\r\n * @property {object} [bounceBox] use this bounceBox instead of (0, 0, viewport.worldWidth, viewport.worldHeight)\r\n * @property {number} [bounceBox.x=0]\r\n * @property {number} [bounceBox.y=0]\r\n * @property {number} [bounceBox.width=viewport.worldWidth]\r\n * @property {number} [bounceBox.height=viewport.worldHeight]\r\n * @property {string|function} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n * @property {string} [underflow=center] (top/bottom/center and left/right/center, or center) where to place world if too small for screen\r\n */\r\n\r\nconst bounceOptions = {\r\n    sides: 'all',\r\n    friction: 0.5,\r\n    time: 150,\r\n    ease: 'easeInOutSine',\r\n    underflow: 'center',\r\n    bounceBox: null\r\n};\r\n\r\nclass Bounce extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {BounceOptions} [options]\r\n     * @fires bounce-start-x\r\n     * @fires bounce.end-x\r\n     * @fires bounce-start-y\r\n     * @fires bounce-end-y\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, bounceOptions, options);\r\n        this.ease = ease(this.options.ease, 'easeInOutSine');\r\n        if (this.options.sides) {\r\n            if (this.options.sides === 'all') {\r\n                this.top = this.bottom = this.left = this.right = true;\r\n            }\r\n            else if (this.options.sides === 'horizontal') {\r\n                this.right = this.left = true;\r\n            }\r\n            else if (this.options.sides === 'vertical') {\r\n                this.top = this.bottom = true;\r\n            }\r\n            else {\r\n                this.top = this.options.sides.indexOf('top') !== -1;\r\n                this.bottom = this.options.sides.indexOf('bottom') !== -1;\r\n                this.left = this.options.sides.indexOf('left') !== -1;\r\n                this.right = this.options.sides.indexOf('right') !== -1;\r\n            }\r\n        }\r\n        this.parseUnderflow();\r\n        this.last = {};\r\n        this.reset();\r\n    }\r\n\r\n    parseUnderflow() {\r\n        const clamp = this.options.underflow.toLowerCase();\r\n        if (clamp === 'center') {\r\n            this.underflowX = 0;\r\n            this.underflowY = 0;\r\n        }\r\n        else {\r\n            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0;\r\n            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0;\r\n        }\r\n    }\r\n\r\n    isActive() {\r\n        return this.toX !== null || this.toY !== null\r\n    }\r\n\r\n    down() {\r\n        this.toX = this.toY = null;\r\n    }\r\n\r\n    up() {\r\n        this.bounce();\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        this.bounce();\r\n        if (this.toX) {\r\n            const toX = this.toX;\r\n            toX.time += elapsed;\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'bounce-x' });\r\n            if (toX.time >= this.options.time) {\r\n                this.parent.x = toX.end;\r\n                this.toX = null;\r\n                this.parent.emit('bounce-x-end', this.parent);\r\n            }\r\n            else {\r\n                this.parent.x = this.ease(toX.time, toX.start, toX.delta, this.options.time);\r\n            }\r\n        }\r\n        if (this.toY) {\r\n            const toY = this.toY;\r\n            toY.time += elapsed;\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'bounce-y' });\r\n            if (toY.time >= this.options.time) {\r\n                this.parent.y = toY.end;\r\n                this.toY = null;\r\n                this.parent.emit('bounce-y-end', this.parent);\r\n            }\r\n            else {\r\n                this.parent.y = this.ease(toY.time, toY.start, toY.delta, this.options.time);\r\n            }\r\n        }\r\n    }\r\n\r\n    calcUnderflowX() {\r\n        let x;\r\n        switch (this.underflowX) {\r\n            case -1:\r\n                x = 0;\r\n                break\r\n            case 1:\r\n                x = (this.parent.screenWidth - this.parent.screenWorldWidth);\r\n                break\r\n            default:\r\n                x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\r\n        }\r\n        return x\r\n    }\r\n\r\n    calcUnderflowY() {\r\n        let y;\r\n        switch (this.underflowY) {\r\n            case -1:\r\n                y = 0;\r\n                break\r\n            case 1:\r\n                y = (this.parent.screenHeight - this.parent.screenWorldHeight);\r\n                break\r\n            default:\r\n                y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\r\n        }\r\n        return y\r\n    }\r\n\r\n    oob() {\r\n        const box = this.options.bounceBox;\r\n        if (box) {\r\n            const x1 = typeof box.x === 'undefined' ? 0 : box.x;\r\n            const y1 = typeof box.y === 'undefined' ? 0 : box.y;\r\n            const width = typeof box.width === 'undefined' ? this.parent.worldWidth : box.width;\r\n            const height = typeof box.height === 'undefined' ? this.parent.worldHeight : box.height;\r\n            return {\r\n                left: this.parent.left < x1,\r\n                right: this.parent.right > width,\r\n                top: this.parent.top < y1,\r\n                bottom: this.parent.bottom > height,\r\n                topLeft: new Point(\r\n                    x1 * this.parent.scale.x,\r\n                    y1 * this.parent.scale.y\r\n                ),\r\n                bottomRight: new Point(\r\n                    width * this.parent.scale.x - this.parent.screenWidth,\r\n                    height * this.parent.scale.y - this.parent.screenHeight\r\n                )\r\n            }\r\n        }\r\n        return {\r\n            left: this.parent.left < 0,\r\n            right: this.parent.right > this.parent.worldWidth,\r\n            top: this.parent.top < 0,\r\n            bottom: this.parent.bottom > this.parent.worldHeight,\r\n            topLeft: new Point(0, 0),\r\n            bottomRight: new Point(\r\n                this.parent.worldWidth * this.parent.scale.x - this.parent.screenWidth,\r\n                this.parent.worldHeight * this.parent.scale.y - this.parent.screenHeight\r\n            )\r\n        }\r\n    }\r\n\r\n    bounce() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        let oob;\r\n        let decelerate = this.parent.plugins.get('decelerate', true);\r\n        if (decelerate && (decelerate.x || decelerate.y)) {\r\n            if ((decelerate.x && decelerate.percentChangeX === decelerate.options.friction) || (decelerate.y && decelerate.percentChangeY === decelerate.options.friction)) {\r\n                oob = this.oob();\r\n                if ((oob.left && this.left) || (oob.right && this.right)) {\r\n                    decelerate.percentChangeX = this.options.friction;\r\n                }\r\n                if ((oob.top && this.top) || (oob.bottom && this.bottom)) {\r\n                    decelerate.percentChangeY = this.options.friction;\r\n                }\r\n            }\r\n        }\r\n        const drag = this.parent.plugins.get('drag', true) || {};\r\n        const pinch = this.parent.plugins.get('pinch', true) || {};\r\n        decelerate = decelerate || {};\r\n        if (!drag.active && !pinch.active && ((!this.toX || !this.toY) && (!decelerate.x || !decelerate.y))) {\r\n            oob = oob || this.oob();\r\n            const topLeft = oob.topLeft;\r\n            const bottomRight = oob.bottomRight;\r\n            if (!this.toX && !decelerate.x) {\r\n                let x = null;\r\n                if (oob.left && this.left) {\r\n                    x = (this.parent.screenWorldWidth < this.parent.screenWidth) ? this.calcUnderflowX() : -topLeft.x;\r\n                }\r\n                else if (oob.right && this.right) {\r\n                    x = (this.parent.screenWorldWidth < this.parent.screenWidth) ? this.calcUnderflowX() : -bottomRight.x;\r\n                }\r\n                if (x !== null && this.parent.x !== x) {\r\n                    this.toX = { time: 0, start: this.parent.x, delta: x - this.parent.x, end: x };\r\n                    this.parent.emit('bounce-x-start', this.parent);\r\n                }\r\n            }\r\n            if (!this.toY && !decelerate.y) {\r\n                let y = null;\r\n                if (oob.top && this.top) {\r\n                    y = (this.parent.screenWorldHeight < this.parent.screenHeight) ? this.calcUnderflowY() : -topLeft.y;\r\n                }\r\n                else if (oob.bottom && this.bottom) {\r\n                    y = (this.parent.screenWorldHeight < this.parent.screenHeight) ? this.calcUnderflowY() : -bottomRight.y;\r\n                }\r\n                if (y !== null && this.parent.y !== y) {\r\n                    this.toY = { time: 0, start: this.parent.y, delta: y - this.parent.y, end: y };\r\n                    this.parent.emit('bounce-y-start', this.parent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.toX = this.toY = null;\r\n        this.bounce();\r\n    }\r\n}\n\n/**\r\n * @typedef SnapOptions\r\n * @property {boolean} [topLeft] snap to the top-left of viewport instead of center\r\n * @property {number} [friction=0.8] friction/frame to apply if decelerate is active\r\n * @property {number} [time=1000]\r\n * @property {string|function} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n * @property {boolean} [interrupt=true] pause snapping with any user input on the viewport\r\n * @property {boolean} [removeOnComplete] removes this plugin after snapping is complete\r\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\r\n * @property {boolean} [forceStart] starts the snap immediately regardless of whether the viewport is at the desired location\r\n */\r\n\r\nconst snapOptions = {\r\n    topLeft: false,\r\n    friction: 0.8,\r\n    time: 1000,\r\n    ease: 'easeInOutSine',\r\n    interrupt: true,\r\n    removeOnComplete: false,\r\n    removeOnInterrupt: false,\r\n    forceStart: false\r\n};\r\n\r\nclass Snap extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {SnapOptions} [options]\r\n     * @event snap-start(Viewport) emitted each time a snap animation starts\r\n     * @event snap-restart(Viewport) emitted each time a snap resets because of a change in viewport size\r\n     * @event snap-end(Viewport) emitted each time snap reaches its target\r\n     * @event snap-remove(Viewport) emitted if snap plugin is removed\r\n     */\r\n    constructor(parent, x, y, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, snapOptions, options);\r\n        this.ease = ease(options.ease, 'easeInOutSine');\r\n        this.x = x;\r\n        this.y = y;\r\n        if (this.options.forceStart) {\r\n            this.snapStart();\r\n        }\r\n    }\r\n\r\n    snapStart() {\r\n        this.percent = 0;\r\n        this.snapping = { time: 0 };\r\n        const current = this.options.topLeft ? this.parent.corner : this.parent.center;\r\n        this.deltaX = this.x - current.x;\r\n        this.deltaY = this.y - current.y;\r\n        this.startX = current.x;\r\n        this.startY = current.y;\r\n        this.parent.emit('snap-start', this.parent);\r\n    }\r\n\r\n    wheel() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap');\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap');\r\n        }\r\n        else if (this.options.interrupt) {\r\n            this.snapping = null;\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.parent.input.count() === 0) {\r\n            const decelerate = this.parent.plugins.get('decelerate', true);\r\n            if (decelerate && (decelerate.x || decelerate.y)) {\r\n                decelerate.percentChangeX = decelerate.percentChangeY = this.options.friction;\r\n            }\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.options.interrupt && this.parent.input.count() !== 0) {\r\n            return\r\n        }\r\n        if (!this.snapping) {\r\n            const current = this.options.topLeft ? this.parent.corner : this.parent.center;\r\n            if (current.x !== this.x || current.y !== this.y) {\r\n                this.snapStart();\r\n            }\r\n        }\r\n        else {\r\n            const snapping = this.snapping;\r\n            snapping.time += elapsed;\r\n            let finished, x, y;\r\n            if (snapping.time > this.options.time) {\r\n                finished = true;\r\n                x = this.startX + this.deltaX;\r\n                y = this.startY + this.deltaY;\r\n            }\r\n            else {\r\n                const percent = this.ease(snapping.time, 0, 1, this.options.time);\r\n                x = this.startX + this.deltaX * percent;\r\n                y = this.startY + this.deltaY * percent;\r\n            }\r\n            if (this.options.topLeft) {\r\n                this.parent.moveCorner(x, y);\r\n            }\r\n            else {\r\n                this.parent.moveCenter(x, y);\r\n            }\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'snap' });\r\n            if (finished) {\r\n                if (this.options.removeOnComplete) {\r\n                    this.parent.plugins.remove('snap');\r\n                }\r\n                this.parent.emit('snap-end', this.parent);\r\n                this.snapping = null;\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @typedef {Object} SnapZoomOptions\r\n * @property {number} [width=0] the desired width to snap (to maintain aspect ratio, choose only width or height)\r\n * @property {number} [height=0] the desired height to snap (to maintain aspect ratio, choose only width or height)\r\n * @property {number} [time=1000] time for snapping in ms\r\n * @property {(string|function)} [ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of center of the viewport\r\n * @property {boolean} [interrupt=true] pause snapping with any user input on the viewport\r\n * @property {boolean} [removeOnComplete] removes this plugin after snapping is complete\r\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\r\n * @property {boolean} [forceStart] starts the snap immediately regardless of whether the viewport is at the desired zoom\r\n * @property {boolean} [noMove] zoom but do not move\r\n */\r\n\r\nconst snapZoomOptions = {\r\n    width: 0,\r\n    height: 0,\r\n    time: 1000,\r\n    ease: 'easeInOutSine',\r\n    center: null,\r\n    interrupt: true,\r\n    removeOnComplete: false,\r\n    removeOnInterrupts: false,\r\n    forceStart: false,\r\n    noMove: false\r\n};\r\n\r\nclass SnapZoom extends Plugin {\r\n    /**\r\n     * @param {Viewport} parent\r\n     * @param {SnapZoomOptions} options\r\n     * @event snap-zoom-start(Viewport) emitted each time a fit animation starts\r\n     * @event snap-zoom-end(Viewport) emitted each time fit reaches its target\r\n     * @event snap-zoom-end(Viewport) emitted each time fit reaches its target\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, snapZoomOptions, options);\r\n        this.ease = ease(this.options.ease);\r\n        if (this.options.width > 0) {\r\n            this.xScale = parent.screenWidth / this.options.width;\r\n        }\r\n        if (this.options.height > 0) {\r\n            this.yScale = parent.screenHeight / this.options.height;\r\n        }\r\n        this.xIndependent = this.xScale ? true : false;\r\n        this.yIndependent = this.yScale ? true : false;\r\n        this.xScale = this.xIndependent ? this.xScale : this.yScale;\r\n        this.yScale = this.yIndependent ? this.yScale : this.xScale;\r\n\r\n        if (this.options.time === 0) {\r\n            parent.container.scale.x = this.xScale;\r\n            parent.container.scale.y = this.yScale;\r\n            if (this.options.removeOnComplete) {\r\n                this.parent.plugins.remove('snap-zoom');\r\n            }\r\n        }\r\n        else if (options.forceStart) {\r\n            this.createSnapping();\r\n        }\r\n    }\r\n\r\n    createSnapping() {\r\n        this.parent.scale;\r\n        const startWorldScreenWidth = this.parent.worldScreenWidth;\r\n        const startWorldScreenHeight = this.parent.worldScreenHeight;\r\n        const endWorldScreenWidth = this.parent.screenWidth / this.xScale;\r\n        const endWorldScreenHeight = this.parent.screenHeight / this.yScale;\r\n        \r\n        this.snapping = { \r\n            time: 0, \r\n            startX: startWorldScreenWidth, \r\n            startY: startWorldScreenHeight, \r\n            deltaX: endWorldScreenWidth - startWorldScreenWidth, \r\n            deltaY: endWorldScreenHeight - startWorldScreenHeight \r\n        };\r\n        this.parent.emit('snap-zoom-start', this.parent);\r\n    }\r\n\r\n    resize() {\r\n        this.snapping = null;\r\n\r\n        if (this.options.width > 0) {\r\n            this.xScale = this.parent.screenWidth / this.options.width;\r\n        }\r\n        if (this.options.height > 0) {\r\n            this.yScale = this.parent.screenHeight / this.options.height;\r\n        }\r\n        this.xScale = this.xIndependent ? this.xScale : this.yScale;\r\n        this.yScale = this.yIndependent ? this.yScale : this.xScale;\r\n    }\r\n\r\n    wheel() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap-zoom');\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.options.removeOnInterrupt) {\r\n            this.parent.plugins.remove('snap-zoom');\r\n        }\r\n        else if (this.options.interrupt) {\r\n            this.snapping = null;\r\n        }\r\n    }\r\n\r\n    update(elapsed) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.options.interrupt && this.parent.input.count() !== 0) {\r\n            return\r\n        }\r\n\r\n        let oldCenter;\r\n        if (!this.options.center && !this.options.noMove) {\r\n            oldCenter = this.parent.center;\r\n        }\r\n        if (!this.snapping) {\r\n            if (this.parent.scale.x !== this.xScale || this.parent.scale.y !== this.yScale) {\r\n                this.createSnapping();\r\n            }\r\n        }\r\n        else if (this.snapping) {\r\n            const snapping = this.snapping;\r\n            snapping.time += elapsed;\r\n            if (snapping.time >= this.options.time) {\r\n                this.parent.scale.set(this.xScale, this.yScale);\r\n                if (this.options.removeOnComplete) {\r\n                    this.parent.plugins.remove('snap-zoom');\r\n                }\r\n                this.parent.emit('snap-zoom-end', this.parent);\r\n                this.snapping = null;\r\n            }\r\n            else {\r\n                const snapping = this.snapping;\r\n                const worldScreenWidth = this.ease(snapping.time, snapping.startX, snapping.deltaX, this.options.time);\r\n                const worldScreenHeight = this.ease(snapping.time, snapping.startY, snapping.deltaY, this.options.time);\r\n\r\n                this.parent.scale.x = this.parent.screenWidth / worldScreenWidth;\r\n                this.parent.scale.y = this.parent.screenHeight / worldScreenHeight;\r\n            }\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true);\r\n            if (clamp) {\r\n                clamp.clamp();\r\n            }\r\n            if (!this.options.noMove) {\r\n                if (!this.options.center) {\r\n                    this.parent.moveCenter(oldCenter);\r\n                }\r\n                else {\r\n                    this.parent.moveCenter(this.options.center);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        this.snapping = null;\r\n        super.resume();\r\n    }\r\n}\n\n/**\r\n * @typedef {object} FollowOptions\r\n * @property {number} [speed=0] to follow in pixels/frame (0=teleport to location)\r\n * @property {number} [acceleration] set acceleration to accelerate and decelerate at this rate; speed cannot be 0 to use acceleration\r\n * @property {number} [radius] radius (in world coordinates) of center circle where movement is allowed without moving the viewport\r\n */\r\n\r\nconst followOptions = {\r\n    speed: 0,\r\n    acceleration: null,\r\n    radius: null\r\n};\r\n\r\nclass Follow extends Plugin\r\n{\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {PIXI.DisplayObject} target to follow\r\n     * @param {FollowOptions} [options]\r\n     */\r\n    constructor(parent, target, options = {})\r\n    {\r\n        super(parent);\r\n        this.target = target;\r\n        this.options = Object.assign({}, followOptions, options);\r\n        this.velocity = { x: 0, y: 0 };\r\n    }\r\n\r\n    update(elapsed)\r\n    {\r\n        if (this.paused)\r\n        {\r\n            return\r\n        }\r\n\r\n        const center = this.parent.center;\r\n        let toX = this.target.x,\r\n            toY = this.target.y;\r\n        if (this.options.radius)\r\n        {\r\n            const distance = Math.sqrt(Math.pow(this.target.y - center.y, 2) + Math.pow(this.target.x - center.x, 2));\r\n            if (distance > this.options.radius)\r\n            {\r\n                const angle = Math.atan2(this.target.y - center.y, this.target.x - center.x);\r\n                toX = this.target.x - Math.cos(angle) * this.options.radius;\r\n                toY = this.target.y - Math.sin(angle) * this.options.radius;\r\n            }\r\n            else\r\n            {\r\n                return\r\n            }\r\n        }\r\n\r\n        const deltaX = toX - center.x;\r\n        const deltaY = toY - center.y;\r\n        if (deltaX || deltaY)\r\n        {\r\n            if (this.options.speed)\r\n            {\r\n                if (this.options.acceleration)\r\n                {\r\n                    const angle = Math.atan2(toY - center.y, toX - center.x);\r\n                    const distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n                    if (distance)\r\n                    {\r\n                        const decelerationDistance = (Math.pow(this.velocity.x, 2) + Math.pow(this.velocity.y, 2)) / (2 * this.options.acceleration);\r\n                        if (distance > decelerationDistance)\r\n                        {\r\n                            this.velocity = {\r\n                                x: Math.min(this.velocity.x + this.options.acceleration * elapsed, this.options.speed),\r\n                                y: Math.min(this.velocity.y + this.options.acceleration * elapsed, this.options.speed)\r\n                            };\r\n                        }\r\n                        else\r\n                        {\r\n                            this.velocity = {\r\n                                x: Math.max(this.velocity.x - this.options.acceleration * this.options.speed, 0),\r\n                                y: Math.max(this.velocity.y - this.options.acceleration * this.options.speed, 0)\r\n                            };\r\n                        }\r\n                        const changeX = Math.cos(angle) * this.velocity.x;\r\n                        const changeY = Math.sin(angle) * this.velocity.y;\r\n                        const x = Math.abs(changeX) > Math.abs(deltaX) ? toX : center.x + changeX;\r\n                        const y = Math.abs(changeY) > Math.abs(deltaY) ? toY : center.y + changeY;\r\n                        this.parent.moveCenter(x, y);\r\n                        this.parent.emit('moved', { viewport: this.parent, type: 'follow' });\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    const angle = Math.atan2(toY - center.y, toX - center.x);\r\n                    const changeX = Math.cos(angle) * this.options.speed;\r\n                    const changeY = Math.sin(angle) * this.options.speed;\r\n                    const x = Math.abs(changeX) > Math.abs(deltaX) ? toX : center.x + changeX;\r\n                    const y = Math.abs(changeY) > Math.abs(deltaY) ? toY : center.y + changeY;\r\n                    this.parent.moveCenter(x, y);\r\n                    this.parent.emit('moved', { viewport: this.parent, type: 'follow' });\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this.parent.moveCenter(toX, toY);\r\n                this.parent.emit('moved', { viewport: this.parent, type: 'follow' });\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * the default event listener for 'wheel' event is document.body. Use `Viewport.options.divWheel` to change this default\r\n * @typedef WheelOptions\r\n * @property {number} [percent=0.1] percent to scroll with each spin\r\n * @property {number} [smooth] smooth the zooming by providing the number of frames to zoom between wheel spins\r\n * @property {boolean} [interrupt=true] stop smoothing with any user input on the viewport\r\n * @property {boolean} [reverse] reverse the direction of the scroll\r\n * @property {PIXI.Point} [center] place this point at center during zoom instead of current mouse position\r\n * @property {number} [lineHeight=20] scaling factor for non-DOM_DELTA_PIXEL scrolling events\r\n * @property {('all'|'x'|'y')} [axis=all] axis to zoom\r\n */\r\n\r\nconst wheelOptions = {\r\n    percent: 0.1,\r\n    smooth: false,\r\n    interrupt: true,\r\n    reverse: false,\r\n    center: null,\r\n    lineHeight: 20,\r\n    axis: 'all',\r\n};\r\n\r\nclass Wheel extends Plugin {\r\n    /**\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {WheelOptions} [options]\r\n     * @event wheel({wheel: {dx, dy, dz}, event, viewport})\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, wheelOptions, options);\r\n    }\r\n\r\n    down() {\r\n        if (this.options.interrupt) {\r\n            this.smoothing = null;\r\n        }\r\n    }\r\n\r\n    isAxisX() {\r\n        return ['all', 'x'].includes(this.options.axis)\r\n    }\r\n\r\n    isAxisY() {\r\n        return ['all', 'y'].includes(this.options.axis)\r\n    }\r\n\r\n    update() {\r\n        if (this.smoothing) {\r\n            const point = this.smoothingCenter;\r\n            const change = this.smoothing;\r\n            let oldPoint;\r\n            if (!this.options.center) {\r\n                oldPoint = this.parent.toLocal(point);\r\n            }\r\n            if (this.isAxisX()) {\r\n                this.parent.scale.x += change.x;\r\n            }\r\n            if (this.isAxisY()) {\r\n                this.parent.scale.y += change.y;\r\n            }\r\n            this.parent.emit('zoomed', { viewport: this.parent, type: 'wheel' });\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true);\r\n            if (clamp) {\r\n                clamp.clamp();\r\n            }\r\n            if (this.options.center) {\r\n                this.parent.moveCenter(this.options.center);\r\n            } else {\r\n                const newPoint = this.parent.toGlobal(oldPoint);\r\n                this.parent.x += point.x - newPoint.x;\r\n                this.parent.y += point.y - newPoint.y;\r\n            }\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'wheel' });\r\n            this.smoothingCount++;\r\n            if (this.smoothingCount >= this.options.smooth) {\r\n                this.smoothing = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    wheel(e) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        let point = this.parent.input.getPointerPosition(e);\r\n        const sign = this.options.reverse ? -1 : 1;\r\n        const step = sign * -e.deltaY * (e.deltaMode ? this.options.lineHeight : 1) / 500;\r\n        const change = Math.pow(2, (1 + this.options.percent) * step);\r\n        if (this.options.smooth) {\r\n            const original = {\r\n                x: this.smoothing ? this.smoothing.x * (this.options.smooth - this.smoothingCount) : 0,\r\n                y: this.smoothing ? this.smoothing.y * (this.options.smooth - this.smoothingCount) : 0\r\n            };\r\n            this.smoothing = {\r\n                x: ((this.parent.scale.x + original.x) * change - this.parent.scale.x) / this.options.smooth,\r\n                y: ((this.parent.scale.y + original.y) * change - this.parent.scale.y) / this.options.smooth\r\n            };\r\n            this.smoothingCount = 0;\r\n            this.smoothingCenter = point;\r\n        } else {\r\n            let oldPoint;\r\n            if (!this.options.center) {\r\n                oldPoint = this.parent.toLocal(point);\r\n            }\r\n            if (this.isAxisX()) {\r\n                this.parent.scale.x *= change;\r\n            }\r\n            if (this.isAxisY()) {\r\n                this.parent.scale.y *= change;\r\n            }\r\n            this.parent.emit('zoomed', { viewport: this.parent, type: 'wheel' });\r\n            const clamp = this.parent.plugins.get('clamp-zoom', true);\r\n            if (clamp) {\r\n                clamp.clamp();\r\n            }\r\n            if (this.options.center) {\r\n                this.parent.moveCenter(this.options.center);\r\n            } else {\r\n                const newPoint = this.parent.toGlobal(oldPoint);\r\n                this.parent.x += point.x - newPoint.x;\r\n                this.parent.y += point.y - newPoint.y;\r\n            }\r\n        }\r\n        this.parent.emit('moved', { viewport: this.parent, type: 'wheel' });\r\n        this.parent.emit('wheel', { wheel: { dx: e.deltaX, dy: e.deltaY, dz: e.deltaZ }, event: e, viewport: this.parent });\r\n        if (!this.parent.options.passiveWheel) {\r\n            return true\r\n        }\r\n    }\r\n}\n\n/**\r\n * @typedef MouseEdgesOptions\r\n * @property {number} [radius] distance from center of screen in screen pixels\r\n * @property {number} [distance] distance from all sides in screen pixels\r\n * @property {number} [top] alternatively, set top distance (leave unset for no top scroll)\r\n * @property {number} [bottom] alternatively, set bottom distance (leave unset for no top scroll)\r\n * @property {number} [left] alternatively, set left distance (leave unset for no top scroll)\r\n * @property {number} [right] alternatively, set right distance (leave unset for no top scroll)\r\n * @property {number} [speed=8] speed in pixels/frame to scroll viewport\r\n * @property {boolean} [reverse] reverse direction of scroll\r\n * @property {boolean} [noDecelerate] don't use decelerate plugin even if it's installed\r\n * @property {boolean} [linear] if using radius, use linear movement (+/- 1, +/- 1) instead of angled movement (Math.cos(angle from center), Math.sin(angle from center))\r\n * @property {boolean} [allowButtons] allows plugin to continue working even when there's a mousedown event\r\n */\r\n\r\nconst mouseEdgesOptions = {\r\n    radius: null,\r\n    distance: null,\r\n    top: null,\r\n    bottom: null,\r\n    left: null,\r\n    right: null,\r\n    speed: 8,\r\n    reverse: false,\r\n    noDecelerate: false,\r\n    linear: false,\r\n    allowButtons: false\r\n};\r\n\r\nclass MouseEdges extends Plugin {\r\n    /**\r\n     * Scroll viewport when mouse hovers near one of the edges.\r\n     * @private\r\n     * @param {Viewport} parent\r\n     * @param {MouseEdgeOptions} [options]\r\n     * @event mouse-edge-start(Viewport) emitted when mouse-edge starts\r\n     * @event mouse-edge-end(Viewport) emitted when mouse-edge ends\r\n     */\r\n    constructor(parent, options = {}) {\r\n        super(parent);\r\n        this.options = Object.assign({}, mouseEdgesOptions, options);\r\n        this.reverse = this.options.reverse ? 1 : -1;\r\n        this.radiusSquared = Math.pow(this.options.radius, 2);\r\n        this.resize();\r\n    }\r\n\r\n    resize() {\r\n        const distance = this.options.distance;\r\n        if (distance !== null) {\r\n            this.left = distance;\r\n            this.top = distance;\r\n            this.right = this.parent.worldScreenWidth - distance;\r\n            this.bottom = this.parent.worldScreenHeight - distance;\r\n        }\r\n        else if (!this.radius) {\r\n            this.left = this.options.left;\r\n            this.top = this.options.top;\r\n            this.right = this.options.right === null ? null : this.parent.worldScreenWidth - this.options.right;\r\n            this.bottom = this.options.bottom === null ? null : this.parent.worldScreenHeight - this.options.bottom;\r\n        }\r\n    }\r\n\r\n    down() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (!this.options.allowButtons) {\r\n            this.horizontal = this.vertical = null;\r\n        }\r\n    }\r\n\r\n    move(event) {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if ((event.data.pointerType !== 'mouse' && event.data.identifier !== 1) || (!this.options.allowButtons && event.data.buttons !== 0)) {\r\n            return\r\n        }\r\n        const x = event.data.global.x;\r\n        const y = event.data.global.y;\r\n\r\n        if (this.radiusSquared) {\r\n            const center = this.parent.toScreen(this.parent.center);\r\n            const distance = Math.pow(center.x - x, 2) + Math.pow(center.y - y, 2);\r\n            if (distance >= this.radiusSquared) {\r\n                const angle = Math.atan2(center.y - y, center.x - x);\r\n                if (this.options.linear) {\r\n                    this.horizontal = Math.round(Math.cos(angle)) * this.options.speed * this.reverse * (60 / 1000);\r\n                    this.vertical = Math.round(Math.sin(angle)) * this.options.speed * this.reverse * (60 / 1000);\r\n                }\r\n                else {\r\n                    this.horizontal = Math.cos(angle) * this.options.speed * this.reverse * (60 / 1000);\r\n                    this.vertical = Math.sin(angle) * this.options.speed * this.reverse * (60 / 1000);\r\n                }\r\n            }\r\n            else {\r\n                if (this.horizontal) {\r\n                    this.decelerateHorizontal();\r\n                }\r\n                if (this.vertical) {\r\n                    this.decelerateVertical();\r\n                }\r\n                this.horizontal = this.vertical = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (this.left !== null && x < this.left) {\r\n                this.horizontal = 1 * this.reverse * this.options.speed * (60 / 1000);\r\n            }\r\n            else if (this.right !== null && x > this.right) {\r\n                this.horizontal = -1 * this.reverse * this.options.speed * (60 / 1000);\r\n            }\r\n            else {\r\n                this.decelerateHorizontal();\r\n                this.horizontal = 0;\r\n            }\r\n            if (this.top !== null && y < this.top) {\r\n                this.vertical = 1 * this.reverse * this.options.speed * (60 / 1000);\r\n            }\r\n            else if (this.bottom !== null && y > this.bottom) {\r\n                this.vertical = -1 * this.reverse * this.options.speed * (60 / 1000);\r\n            }\r\n            else {\r\n                this.decelerateVertical();\r\n                this.vertical = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    decelerateHorizontal() {\r\n        const decelerate = this.parent.plugins.get('decelerate', true);\r\n        if (this.horizontal && decelerate && !this.options.noDecelerate) {\r\n            decelerate.activate({ x: (this.horizontal * this.options.speed * this.reverse) / (1000 / 60) });\r\n        }\r\n    }\r\n\r\n    decelerateVertical() {\r\n        const decelerate = this.parent.plugins.get('decelerate', true);\r\n        if (this.vertical && decelerate && !this.options.noDecelerate) {\r\n            decelerate.activate({ y: (this.vertical * this.options.speed * this.reverse) / (1000 / 60) });\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n        if (this.horizontal) {\r\n            this.decelerateHorizontal();\r\n        }\r\n        if (this.vertical) {\r\n            this.decelerateVertical();\r\n        }\r\n        this.horizontal = this.vertical = null;\r\n    }\r\n\r\n    update() {\r\n        if (this.paused) {\r\n            return\r\n        }\r\n\r\n        if (this.horizontal || this.vertical) {\r\n            const center = this.parent.center;\r\n            if (this.horizontal) {\r\n                center.x += this.horizontal * this.options.speed;\r\n            }\r\n            if (this.vertical) {\r\n                center.y += this.vertical * this.options.speed;\r\n            }\r\n            this.parent.moveCenter(center);\r\n            this.parent.emit('moved', { viewport: this.parent, type: 'mouse-edges' });\r\n        }\r\n    }\r\n}\n\n/**\n * To set the zoom level, use: (1) scale, (2) scaleX and scaleY, or (3) width and/or height\n * @typedef {options} AnimateOptions\n * @property {number} [time=1000] to animate\n * @property {PIXI.Point} [position=viewport.center] position to move viewport\n * @property {number} [width] desired viewport width in world pixels (use instead of scale; aspect ratio is maintained if height is not provided)\n * @property {number} [height] desired viewport height in world pixels (use instead of scale; aspect ratio is maintained if width is not provided)\n * @property {number} [scale] scale to change zoom (scale.x = scale.y)\n * @property {number} [scaleX] independently change zoom in x-direction\n * @property {number} [scaleY] independently change zoom in y-direction\n * @property {(function|string)} [ease=linear] easing function to use\n * @property {function} [callbackOnComplete]\n * @property {boolean} [removeOnInterrupt] removes this plugin if interrupted by any user input\n */\n\nconst animateOptions = {\n    removeOnInterrupt: false,\n    ease: 'linear',\n    time: 1000\n};\n\nclass Animate extends Plugin\n{\n    /**\n     * @private\n     * @param {Viewport} parent\n     * @param {AnimateOptions} [options]\n     * @fires animate-end\n     */\n    constructor(parent, options={})\n    {\n        super(parent);\n        this.options = Object.assign({}, animateOptions, options);\n        this.options.ease = ease(this.options.ease);\n        this.setupPosition();\n        this.setupZoom();\n    }\n\n    setupPosition()\n    {\n        if (typeof this.options.position !== 'undefined')\n        {\n            this.startX = this.parent.center.x;\n            this.startY = this.parent.center.y;\n            this.deltaX = this.options.position.x - this.parent.center.x;\n            this.deltaY = this.options.position.y - this.parent.center.y;\n            this.keepCenter = false;\n        }\n        else\n        {\n            this.keepCenter = true;\n        }\n    }\n\n    setupZoom()\n    {\n        this.width = null;\n        this.height = null;\n        if (typeof this.options.scale !== 'undefined')\n        {\n            this.width = this.parent.screenWidth / this.options.scale;\n        }\n        else if (typeof this.options.scaleX !== 'undefined' || typeof this.options.scaleY !== 'undefined')\n        {\n            if (typeof this.options.scaleX !== 'undefined')\n            {\n                // screenSizeInWorldPixels = screenWidth / scale\n                this.width = this.parent.screenWidth / this.options.scaleX;\n            }\n            if (typeof this.options.scaleY !== 'undefined')\n            {\n                this.height = this.parent.screenHeight / this.options.scaleY;\n            }\n        }\n        else\n        {\n            if (typeof this.options.width !== 'undefined')\n            {\n                this.width = this.options.width;\n            }\n            if (typeof this.options.height !== 'undefined')\n            {\n                this.height = this.options.height;\n            }\n        }\n        if (typeof this.width !== null)\n        {\n            this.startWidth = this.parent.screenWidthInWorldPixels;\n            this.deltaWidth = this.width - this.startWidth;\n        }\n        if (typeof this.height !== null)\n        {\n            this.startHeight = this.parent.screenHeightInWorldPixels;\n            this.deltaHeight = this.height - this.startHeight;\n        }\n        this.time = 0;\n    }\n\n    down()\n    {\n        if (this.options.removeOnInterrupt)\n        {\n            this.parent.plugins.remove('animate');\n        }\n    }\n\n    complete()\n    {\n        this.parent.plugins.remove('animate');\n        if (this.width !== null)\n        {\n            this.parent.fitWidth(this.width, this.keepCenter, this.height === null);\n        }\n        if (this.height !== null)\n        {\n            this.parent.fitHeight(this.height, this.keepCenter, this.width === null);\n        }\n        if (!this.keepCenter)\n        {\n            this.parent.moveCenter(this.options.position.x, this.options.position.y);\n        }\n        this.parent.emit('animate-end', this.parent);\n        if (this.options.callbackOnComplete)\n        {\n            this.options.callbackOnComplete(this.parent);\n        }\n    }\n\n    update(elapsed)\n    {\n        if (this.paused)\n        {\n            return\n        }\n        this.time += elapsed;\n        if (this.time >= this.options.time)\n        {\n            this.complete();\n        }\n        else\n        {\n            const originalZoom = new Point(this.parent.scale.x, this.parent.scale.y);\n            const percent = this.options.ease(this.time, 0, 1, this.options.time);\n            if (this.width !== null)\n            {\n                this.parent.fitWidth(this.startWidth + this.deltaWidth * percent, this.keepCenter, this.height === null);\n            }\n            if (this.height !== null)\n            {\n                this.parent.fitHeight(this.startHeight + this.deltaHeight * percent, this.keepCenter, this.width === null);\n            }\n            if (this.width === null)\n            {\n                this.parent.scale.x = this.parent.scale.y;\n            }\n            else if (this.height === null)\n            {\n                this.parent.scale.y = this.parent.scale.x;\n            }\n            if (!this.keepCenter)\n            {\n                const original = new Point(this.parent.x, this.parent.y);\n                this.parent.moveCenter(this.startX + this.deltaX * percent, this.startY + this.deltaY * percent);\n                this.parent.emit('moved', { viewport: this.parent, original, type: 'animate'});\n            }\n            if (this.width || this.height)\n            {\n                this.parent.emit('zoomed', { viewport: this.parent, original: originalZoom, type: 'animate' });\n            }\n            if (!this.keepCenter)\n            ;\n        }\n    }\n}\n\n/**\r\n * @typedef {object} ViewportOptions\r\n * @property {number} [screenWidth=window.innerWidth]\r\n * @property {number} [screenHeight=window.innerHeight]\r\n * @property {number} [worldWidth=this.width]\r\n * @property {number} [worldHeight=this.height]\r\n * @property {number} [threshold=5] number of pixels to move to trigger an input event (e.g., drag, pinch) or disable a clicked event\r\n * @property {boolean} [passiveWheel=true] whether the 'wheel' event is set to passive (note: if false, e.preventDefault() will be called when wheel is used over the viewport)\r\n * @property {boolean} [stopPropagation=false] whether to stopPropagation of events that impact the viewport (except wheel events, see options.passiveWheel)\r\n * @property {HitArea} [forceHitArea] change the default hitArea from world size to a new value\r\n * @property {boolean} [noTicker] set this if you want to manually call update() function on each frame\r\n * @property {PIXI.Ticker} [ticker=PIXI.Ticker.shared] use this PIXI.ticker for updates\r\n * @property {PIXI.InteractionManager} [interaction=null] InteractionManager, available from instantiated WebGLRenderer/CanvasRenderer.plugins.interaction - used to calculate pointer postion relative to canvas location on screen\r\n * @property {HTMLElement} [divWheel=document.body] div to attach the wheel event\r\n * @property {boolean} [disableOnContextMenu] remove oncontextmenu=() => {} from the divWheel element\r\n */\r\n\r\nconst viewportOptions = {\r\n    screenWidth: window.innerWidth,\r\n    screenHeight: window.innerHeight,\r\n    worldWidth: null,\r\n    worldHeight: null,\r\n    threshold: 5,\r\n    passiveWheel: true,\r\n    stopPropagation: false,\r\n    forceHitArea: null,\r\n    noTicker: false,\r\n    interaction: null,\r\n    disableOnContextMenu: false\r\n};\r\n\r\n/**\r\n * Main class to use when creating a Viewport\r\n */\r\nclass Viewport extends Container {\r\n    /**\r\n     * @param {ViewportOptions} [options]\r\n     * @fires clicked\r\n     * @fires drag-start\r\n     * @fires drag-end\r\n     * @fires drag-remove\r\n     * @fires pinch-start\r\n     * @fires pinch-end\r\n     * @fires pinch-remove\r\n     * @fires snap-start\r\n     * @fires snap-end\r\n     * @fires snap-remove\r\n     * @fires snap-zoom-start\r\n     * @fires snap-zoom-end\r\n     * @fires snap-zoom-remove\r\n     * @fires bounce-x-start\r\n     * @fires bounce-x-end\r\n     * @fires bounce-y-start\r\n     * @fires bounce-y-end\r\n     * @fires bounce-remove\r\n     * @fires wheel\r\n     * @fires wheel-remove\r\n     * @fires wheel-scroll\r\n     * @fires wheel-scroll-remove\r\n     * @fires mouse-edge-start\r\n     * @fires mouse-edge-end\r\n     * @fires mouse-edge-remove\r\n     * @fires moved\r\n     * @fires moved-end\r\n     * @fires zoomed\r\n     * @fires zoomed-end\r\n     * @fires frame-end\r\n     */\r\n    constructor(options = {}) {\r\n        super();\r\n        this.options = Object.assign({}, viewportOptions, options);\r\n\r\n        // needed to pull this out of viewportOptions because of pixi.js v4 support (which changed from PIXI.ticker.shared to PIXI.Ticker.shared...sigh)\r\n        if (options.ticker) {\r\n            this.options.ticker = options.ticker;\r\n        }\r\n        else {\r\n            // to avoid Rollup transforming our import, save pixi namespace in a variable\r\n            // from here: https://github.com/pixijs/pixi.js/issues/5757\r\n            let ticker;\r\n            const pixiNS = PIXI;\r\n            if (parseInt(/^(\\d+)\\./.exec(VERSION)[1]) < 5) {\r\n                ticker = pixiNS.ticker.shared;\r\n            }\r\n            else {\r\n                ticker = pixiNS.Ticker.shared;\r\n            }\r\n            this.options.ticker = options.ticker || ticker;\r\n        }\r\n\r\n        /** @type {number} */\r\n        this.screenWidth = this.options.screenWidth;\r\n\r\n        /** @type {number} */\r\n        this.screenHeight = this.options.screenHeight;\r\n\r\n        this._worldWidth = this.options.worldWidth;\r\n        this._worldHeight = this.options.worldHeight;\r\n        this.forceHitArea = this.options.forceHitArea;\r\n\r\n        /**\r\n         * number of pixels to move to trigger an input event (e.g., drag, pinch) or disable a clicked event\r\n         * @type {number}\r\n         */\r\n        this.threshold = this.options.threshold;\r\n\r\n        this.options.divWheel = this.options.divWheel || document.body;\r\n\r\n        if (this.options.disableOnContextMenu) {\r\n            this.options.divWheel.oncontextmenu = e => e.preventDefault();\r\n        }\r\n\r\n        if (!this.options.noTicker) {\r\n            this.tickerFunction = () => this.update(this.options.ticker.elapsedMS);\r\n            this.options.ticker.add(this.tickerFunction);\r\n        }\r\n\r\n        this.input = new InputManager(this);\r\n\r\n        /**\r\n         * Use this to add user plugins or access existing plugins (e.g., to pause, resume, or remove them)\r\n         * @type {PluginManager}\r\n         */\r\n        this.plugins = new PluginManager(this);\r\n    }\r\n\r\n    /**\r\n     * overrides PIXI.Container's destroy to also remove the 'wheel' and PIXI.Ticker listeners\r\n     * @param {(object|boolean)} [options] - Options parameter. A boolean will act as if all options have been set to that value\r\n     * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy method called as well. 'options' will be passed on to those calls.\r\n     * @param {boolean} [options.texture=false] - Only used for child Sprites if options.children is set to true. Should it destroy the texture of the child sprite\r\n     * @param {boolean} [options.baseTexture=false] - Only used for child Sprites if options.children is set to true. Should it destroy the base texture of the child sprite     */\r\n    destroy(options) {\r\n        if (!this.options.noTicker) {\r\n            this.options.ticker.remove(this.tickerFunction);\r\n        }\r\n        this.input.destroy();\r\n        super.destroy(options);\r\n    }\r\n\r\n    /**\r\n     * update viewport on each frame\r\n     * by default, you do not need to call this unless you set options.noTicker=true\r\n     * @param {number} elapsed time in milliseconds since last update\r\n     */\r\n    update(elapsed) {\r\n        if (!this.pause) {\r\n            this.plugins.update(elapsed);\r\n\r\n            if (this.lastViewport) {\r\n                // check for moved-end event\r\n                if (this.lastViewport.x !== this.x || this.lastViewport.y !== this.y) {\r\n                    this.moving = true;\r\n                }\r\n                else {\r\n                    if (this.moving) {\r\n                        this.emit('moved-end', this);\r\n                        this.moving = false;\r\n                    }\r\n                }\r\n                // check for zoomed-end event\r\n                if (this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y) {\r\n                    this.zooming = true;\r\n                }\r\n                else {\r\n                    if (this.zooming) {\r\n                        this.emit('zoomed-end', this);\r\n                        this.zooming = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!this.forceHitArea) {\r\n                this._hitAreaDefault = new Rectangle(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight);\r\n                this.hitArea = this._hitAreaDefault;\r\n            }\r\n\r\n            this._dirty = this._dirty || !this.lastViewport ||\r\n                this.lastViewport.x !== this.x || this.lastViewport.y !== this.y ||\r\n                this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y;\r\n\r\n            this.lastViewport = {\r\n                x: this.x,\r\n                y: this.y,\r\n                scaleX: this.scale.x,\r\n                scaleY: this.scale.y\r\n            };\r\n            this.emit('frame-end', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * use this to set screen and world sizes--needed for pinch/wheel/clamp/bounce\r\n     * @param {number} [screenWidth=window.innerWidth]\r\n     * @param {number} [screenHeight=window.innerHeight]\r\n     * @param {number} [worldWidth]\r\n     * @param {number} [worldHeight]\r\n     */\r\n    resize(screenWidth = window.innerWidth, screenHeight = window.innerHeight, worldWidth, worldHeight) {\r\n        this.screenWidth = screenWidth;\r\n        this.screenHeight = screenHeight;\r\n        if (typeof worldWidth !== 'undefined') {\r\n            this._worldWidth = worldWidth;\r\n        }\r\n        if (typeof worldHeight !== 'undefined') {\r\n            this._worldHeight = worldHeight;\r\n        }\r\n        this.plugins.resize();\r\n        this.dirty = true;\r\n    }\r\n\r\n    /**\r\n     * world width in pixels\r\n     * @type {number}\r\n     */\r\n    get worldWidth() {\r\n        if (this._worldWidth) {\r\n            return this._worldWidth\r\n        }\r\n        else {\r\n            return this.width / this.scale.x\r\n        }\r\n    }\r\n    set worldWidth(value) {\r\n        this._worldWidth = value;\r\n        this.plugins.resize();\r\n    }\r\n\r\n    /**\r\n     * world height in pixels\r\n     * @type {number}\r\n     */\r\n    get worldHeight() {\r\n        if (this._worldHeight) {\r\n            return this._worldHeight\r\n        }\r\n        else {\r\n            return this.height / this.scale.y\r\n        }\r\n    }\r\n    set worldHeight(value) {\r\n        this._worldHeight = value;\r\n        this.plugins.resize();\r\n    }\r\n\r\n    /**\r\n     * get visible bounds of viewport\r\n     * @returns {PIXI.Rectangle}\r\n     */\r\n    getVisibleBounds() {\r\n        return new Rectangle(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight)\r\n    }\r\n\r\n    /**\r\n     * change coordinates from screen to world\r\n     * @param {(number|PIXI.Point)} x or point\r\n     * @param {number} [y]\r\n     * @return {PIXI.Point}\r\n     */\r\n    toWorld(x, y) {\r\n        if (arguments.length === 2) {\r\n            return this.toLocal(new Point(x, y))\r\n        }\r\n        else {\r\n            return this.toLocal(x)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * change coordinates from world to screen\r\n     * @param {(number|PIXI.Point)} x or point\r\n     * @param {number} [y]\r\n     * @return {PIXI.Point}\r\n     */\r\n    toScreen(x, y) {\r\n        if (arguments.length === 2) {\r\n            return this.toGlobal(new Point(x, y))\r\n        }\r\n        else {\r\n            return this.toGlobal(x)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * screen width in world coordinates\r\n     * @type {number}\r\n     */\r\n    get worldScreenWidth() {\r\n        return this.screenWidth / this.scale.x\r\n    }\r\n\r\n    /**\r\n     * screen height in world coordinates\r\n     * @type {number}\r\n     */\r\n    get worldScreenHeight() {\r\n        return this.screenHeight / this.scale.y\r\n    }\r\n\r\n    /**\r\n     * world width in screen coordinates\r\n     * @type {number}\r\n     */\r\n    get screenWorldWidth() {\r\n        return this.worldWidth * this.scale.x\r\n    }\r\n\r\n    /**\r\n     * world height in screen coordinates\r\n     * @type {number}\r\n     */\r\n    get screenWorldHeight() {\r\n        return this.worldHeight * this.scale.y\r\n    }\r\n\r\n    /**\r\n     * center of screen in world coordinates\r\n     * @type {PIXI.Point}\r\n     */\r\n    get center() {\r\n        return new Point(this.worldScreenWidth / 2 - this.x / this.scale.x, this.worldScreenHeight / 2 - this.y / this.scale.y)\r\n    }\r\n    set center(value) {\r\n        this.moveCenter(value);\r\n    }\r\n\r\n    /**\r\n     * move center of viewport to point\r\n     * @param {(number|PIXI.Point)} x or point\r\n     * @param {number} [y]\r\n     * @return {Viewport} this\r\n     */\r\n    moveCenter() {\r\n        let x, y;\r\n        if (!isNaN(arguments[0])) {\r\n            x = arguments[0];\r\n            y = arguments[1];\r\n        }\r\n        else {\r\n            x = arguments[0].x;\r\n            y = arguments[0].y;\r\n        }\r\n        const newX = (this.worldScreenWidth / 2 - x) * this.scale.x;\r\n        const newY = (this.worldScreenHeight / 2 - y) * this.scale.y;\r\n        if (this.x !== newX || this.y !== newY) {\r\n            this.position.set(newX, newY);\r\n            this.plugins.reset();\r\n            this.dirty = true;\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * top-left corner of Viewport\r\n     * @type {PIXI.Point}\r\n     */\r\n    get corner() {\r\n        return new Point(-this.x / this.scale.x, -this.y / this.scale.y)\r\n    }\r\n    set corner(value) {\r\n        this.moveCorner(value);\r\n    }\r\n\r\n    /**\r\n     * move viewport's top-left corner; also clamps and resets decelerate and bounce (as needed)\r\n     * @param {(number|PIXI.Point)} x or point\r\n     * @param {number} [y]\r\n     * @return {Viewport} this\r\n     */\r\n    moveCorner() {\r\n        let x, y;\r\n        if (arguments.length === 1) {\r\n            x = -arguments[0].x * this.scale.x;\r\n            y = -arguments[0].y * this.scale.y;\r\n        } else {\r\n            x = -arguments[0] * this.scale.x;\r\n            y = -arguments[1] * this.scale.y;\r\n        }\r\n        if (x !== this.x || y !== this.y) {\r\n            this.position.set(x, y);\r\n            this.plugins.reset();\r\n            this.dirty = true;\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * get how many world pixels fit in screen's width\r\n     * @type {number}\r\n     */\r\n    get screenWidthInWorldPixels() {\r\n        return this.screenWidth / this.scale.x\r\n    }\r\n\r\n    /**\r\n     * get how many world pixels fit on screen's height\r\n     * @type {number}\r\n     */\r\n    get screenHeightInWorldPixels() {\r\n        return this.screenHeight / this.scale.y\r\n    }\r\n\r\n    /**\r\n     * find the scale value that fits a world width on the screen\r\n     * does not change the viewport (use fit... to change)\r\n     * @param {number} width in world pixels\r\n     * @returns {number} scale\r\n     */\r\n    findFitWidth(width) {\r\n        return this.screenWidth / width\r\n    }\r\n\r\n    /**\r\n     * finds the scale value that fits a world height on the screens\r\n     * does not change the viewport (use fit... to change)\r\n     * @param {number} height in world pixels\r\n     * @returns {number} scale\r\n     */\r\n    findFitHeight(height) {\r\n        return this.screenHeight / height\r\n    }\r\n\r\n    /**\r\n     * finds the scale value that fits the smaller of a world width and world height on the screen\r\n     * does not change the viewport (use fit... to change)\r\n     * @param {number} width in world pixels\r\n     * @param {number} height in world pixels\r\n     * @returns {number} scale\r\n     */\r\n    findFit(width, height) {\r\n        const scaleX = this.screenWidth / width;\r\n        const scaleY = this.screenHeight / height;\r\n        return Math.min(scaleX, scaleY)\r\n    }\r\n\r\n    /**\r\n     * finds the scale value that fits the larger of a world width and world height on the screen\r\n     * does not change the viewport (use fit... to change)\r\n     * @param {number} width in world pixels\r\n     * @param {number} height in world pixels\r\n     * @returns {number} scale\r\n     */\r\n    findCover(width, height) {\r\n        const scaleX = this.screenWidth / width;\r\n        const scaleY = this.screenHeight / height;\r\n        return Math.max(scaleX, scaleY)\r\n    }\r\n\r\n    /**\r\n     * change zoom so the width fits in the viewport\r\n     * @param {number} [width=this.worldWidth] in world coordinates\r\n     * @param {boolean} [center] maintain the same center\r\n     * @param {boolean} [scaleY=true] whether to set scaleY=scaleX\r\n     * @param {boolean} [noClamp] whether to disable clamp-zoom\r\n     * @returns {Viewport} this\r\n     */\r\n    fitWidth(width, center, scaleY = true, noClamp) {\r\n        let save;\r\n        if (center) {\r\n            save = this.center;\r\n        }\r\n        this.scale.x = this.screenWidth / width;\r\n\r\n        if (scaleY) {\r\n            this.scale.y = this.scale.x;\r\n        }\r\n\r\n        const clampZoom = this.plugins.get('clamp-zoom', true);\r\n        if (!noClamp && clampZoom) {\r\n            clampZoom.clamp();\r\n        }\r\n\r\n        if (center) {\r\n            this.moveCenter(save);\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * change zoom so the height fits in the viewport\r\n     * @param {number} [height=this.worldHeight] in world coordinates\r\n     * @param {boolean} [center] maintain the same center of the screen after zoom\r\n     * @param {boolean} [scaleX=true] whether to set scaleX = scaleY\r\n     * @param {boolean} [noClamp] whether to disable clamp-zoom\r\n     * @returns {Viewport} this\r\n     */\r\n    fitHeight(height, center, scaleX = true, noClamp) {\r\n        let save;\r\n        if (center) {\r\n            save = this.center;\r\n        }\r\n        this.scale.y = this.screenHeight / height;\r\n\r\n        if (scaleX) {\r\n            this.scale.x = this.scale.y;\r\n        }\r\n\r\n        const clampZoom = this.plugins.get('clamp-zoom', true);\r\n        if (!noClamp && clampZoom) {\r\n            clampZoom.clamp();\r\n        }\r\n\r\n        if (center) {\r\n            this.moveCenter(save);\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * change zoom so it fits the entire world in the viewport\r\n     * @param {boolean} center maintain the same center of the screen after zoom\r\n     * @returns {Viewport} this\r\n     */\r\n    fitWorld(center) {\r\n        let save;\r\n        if (center) {\r\n            save = this.center;\r\n        }\r\n        this.scale.x = this.screenWidth / this.worldWidth;\r\n        this.scale.y = this.screenHeight / this.worldHeight;\r\n        if (this.scale.x < this.scale.y) {\r\n            this.scale.y = this.scale.x;\r\n        }\r\n        else {\r\n            this.scale.x = this.scale.y;\r\n        }\r\n\r\n        const clampZoom = this.plugins.get('clamp-zoom', true);\r\n        if (clampZoom) {\r\n            clampZoom.clamp();\r\n        }\r\n\r\n        if (center) {\r\n            this.moveCenter(save);\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * change zoom so it fits the size or the entire world in the viewport\r\n     * @param {boolean} [center] maintain the same center of the screen after zoom\r\n     * @param {number} [width=this.worldWidth] desired width\r\n     * @param {number} [height=this.worldHeight] desired height\r\n     * @returns {Viewport} this\r\n     */\r\n    fit(center, width = this.worldWidth, height = this.worldHeight) {\r\n        let save;\r\n        if (center) {\r\n            save = this.center;\r\n        }\r\n        this.scale.x = this.screenWidth / width;\r\n        this.scale.y = this.screenHeight / height;\r\n        if (this.scale.x < this.scale.y) {\r\n            this.scale.y = this.scale.x;\r\n        }\r\n        else {\r\n            this.scale.x = this.scale.y;\r\n        }\r\n        const clampZoom = this.plugins.get('clamp-zoom', true);\r\n        if (clampZoom) {\r\n            clampZoom.clamp();\r\n        }\r\n        if (center) {\r\n            this.moveCenter(save);\r\n        }\r\n        return this\r\n    }\r\n\r\n    set visible(value) {\r\n        if (!value) {\r\n            this.input.clear();\r\n        }\r\n        super.visible = value;\r\n    }\r\n\r\n    /**\r\n     * zoom viewport to specific value\r\n     * @param {number} scale value (e.g., 1 would be 100%, 0.25 would be 25%)\r\n     * @param {boolean} [center] maintain the same center of the screen after zoom\r\n     * @return {Viewport} this\r\n     */\r\n    setZoom(scale, center) {\r\n        let save;\r\n        if (center) {\r\n            save = this.center;\r\n        }\r\n        this.scale.set(scale);\r\n        const clampZoom = this.plugins.get('clamp-zoom', true);\r\n        if (clampZoom) {\r\n            clampZoom.clamp();\r\n        }\r\n        if (center) {\r\n            this.moveCenter(save);\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * zoom viewport by a certain percent (in both x and y direction)\r\n     * @param {number} percent change (e.g., 0.25 would increase a starting scale of 1.0 to 1.25)\r\n     * @param {boolean} [center] maintain the same center of the screen after zoom\r\n     * @return {Viewport} this\r\n     */\r\n    zoomPercent(percent, center) {\r\n        return this.setZoom(this.scale.x + this.scale.x * percent, center)\r\n    }\r\n\r\n    /**\r\n     * zoom viewport by increasing/decreasing width by a certain number of pixels\r\n     * @param {number} change in pixels\r\n     * @param {boolean} [center] maintain the same center of the screen after zoom\r\n     * @return {Viewport} this\r\n     */\r\n    zoom(change, center) {\r\n        this.fitWidth(change + this.worldScreenWidth, center);\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * changes scale of viewport and maintains center of viewport\r\n     * @type {number}\r\n     */\r\n    set scaled(scale) {\r\n        this.setZoom(scale, true);\r\n    }\r\n    get scaled() {\r\n        return this.scale.x\r\n    }\r\n\r\n    /**\r\n     * @param {SnapZoomOptions} options\r\n     */\r\n    snapZoom(options) {\r\n        this.plugins.add('snap-zoom', new SnapZoom(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * is container out of world bounds\r\n     * @returns {OutOfBounds}\r\n     */\r\n    OOB() {\r\n        return {\r\n            left: this.left < 0,\r\n            right: this.right > this.worldWidth,\r\n            top: this.top < 0,\r\n            bottom: this.bottom > this._worldHeight,\r\n            cornerPoint: new Point(\r\n                this.worldWidth * this.scale.x - this.screenWidth,\r\n                this.worldHeight * this.scale.y - this.screenHeight\r\n            )\r\n        }\r\n    }\r\n\r\n    /**\r\n     * world coordinates of the right edge of the screen\r\n     * @type {number}\r\n     */\r\n    get right() {\r\n        return -this.x / this.scale.x + this.worldScreenWidth\r\n    }\r\n    set right(value) {\r\n        this.x = -value * this.scale.x + this.screenWidth;\r\n        this.plugins.reset();\r\n    }\r\n\r\n    /**\r\n     * world coordinates of the left edge of the screen\r\n     * @type { number }\r\n     */\r\n    get left() {\r\n        return -this.x / this.scale.x\r\n    }\r\n    set left(value) {\r\n        this.x = -value * this.scale.x;\r\n        this.plugins.reset();\r\n    }\r\n\r\n    /**\r\n     * world coordinates of the top edge of the screen\r\n     * @type {number}\r\n     */\r\n    get top() {\r\n        return -this.y / this.scale.y\r\n    }\r\n    set top(value) {\r\n        this.y = -value * this.scale.y;\r\n        this.plugins.reset();\r\n    }\r\n\r\n    /**\r\n     * world coordinates of the bottom edge of the screen\r\n     * @type {number}\r\n     */\r\n    get bottom() {\r\n        return -this.y / this.scale.y + this.worldScreenHeight\r\n    }\r\n    set bottom(value) {\r\n        this.y = -value * this.scale.y + this.screenHeight;\r\n        this.plugins.reset();\r\n    }\r\n\r\n    /**\r\n     * determines whether the viewport is dirty (i.e., needs to be renderered to the screen because of a change)\r\n     * @type {boolean}\r\n     */\r\n    get dirty() {\r\n        return this._dirty\r\n    }\r\n    set dirty(value) {\r\n        this._dirty = value;\r\n    }\r\n\r\n    /**\r\n     * permanently changes the Viewport's hitArea\r\n     * NOTE: if not set then hitArea = PIXI.Rectangle(Viewport.left, Viewport.top, Viewport.worldScreenWidth, Viewport.worldScreenHeight)\r\n     * @returns {HitArea}\r\n     */\r\n    get forceHitArea() {\r\n        return this._forceHitArea\r\n    }\r\n    set forceHitArea(value) {\r\n        if (value) {\r\n            this._forceHitArea = value;\r\n            this.hitArea = value;\r\n        }\r\n        else {\r\n            this._forceHitArea = null;\r\n            this.hitArea = new Rectangle(0, 0, this.worldWidth, this.worldHeight);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * enable one-finger touch to drag\r\n     * NOTE: if you expect users to use right-click dragging, you should enable viewport.options.disableOnContextMenu to avoid the context menu popping up on each right-click drag\r\n     * @param {DragOptions} [options]\r\n     * @returns {Viewport} this\r\n     */\r\n    drag(options) {\r\n        this.plugins.add('drag', new Drag(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * clamp to world boundaries or other provided boundaries\r\n     * NOTES:\r\n     *   clamp is disabled if called with no options; use { direction: 'all' } for all edge clamping\r\n     *   screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\r\n     * @param {ClampOptions} [options]\r\n     * @returns {Viewport} this\r\n     */\r\n    clamp(options) {\r\n        this.plugins.add('clamp', new Clamp(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * decelerate after a move\r\n     * NOTE: this fires 'moved' event during deceleration\r\n     * @param {DecelerateOptions} [options]\r\n     * @return {Viewport} this\r\n     */\r\n    decelerate(options) {\r\n        this.plugins.add('decelerate', new Decelerate(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * bounce on borders\r\n     * NOTES:\r\n     *    screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\r\n     *    fires 'moved', 'bounce-x-start', 'bounce-y-start', 'bounce-x-end', and 'bounce-y-end' events\r\n     * @param {object} [options]\r\n     * @param {string} [options.sides=all] all, horizontal, vertical, or combination of top, bottom, right, left (e.g., 'top-bottom-right')\r\n     * @param {number} [options.friction=0.5] friction to apply to decelerate if active\r\n     * @param {number} [options.time=150] time in ms to finish bounce\r\n     * @param {object} [options.bounceBox] use this bounceBox instead of (0, 0, viewport.worldWidth, viewport.worldHeight)\r\n     * @param {number} [options.bounceBox.x=0]\r\n     * @param {number} [options.bounceBox.y=0]\r\n     * @param {number} [options.bounceBox.width=viewport.worldWidth]\r\n     * @param {number} [options.bounceBox.height=viewport.worldHeight]\r\n     * @param {string|function} [options.ease=easeInOutSine] ease function or name (see http://easings.net/ for supported names)\r\n     * @param {string} [options.underflow=center] (top/bottom/center and left/right/center, or center) where to place world if too small for screen\r\n     * @return {Viewport} this\r\n     */\r\n    bounce(options) {\r\n        this.plugins.add('bounce', new Bounce(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * enable pinch to zoom and two-finger touch to drag\r\n     * @param {PinchOptions} [options]\r\n     * @return {Viewport} this\r\n     */\r\n    pinch(options) {\r\n        this.plugins.add('pinch', new Pinch(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * snap to a point\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {SnapOptions} [options]\r\n     * @return {Viewport} this\r\n     */\r\n    snap(x, y, options) {\r\n        this.plugins.add('snap', new Snap(this, x, y, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * follow a target\r\n     * NOTES:\r\n     *    uses the (x, y) as the center to follow; for PIXI.Sprite to work properly, use sprite.anchor.set(0.5)\r\n     *    options.acceleration is not perfect as it doesn't know the velocity of the target\r\n     *    it adds acceleration to the start of movement and deceleration to the end of movement when the target is stopped\r\n     *    fires 'moved' event\r\n     * @param {PIXI.DisplayObject} target to follow\r\n     * @param {FollowOptions} [options]\r\n     * @returns {Viewport} this\r\n     */\r\n    follow(target, options) {\r\n        this.plugins.add('follow', new Follow(this, target, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * zoom using mouse wheel\r\n     * @param {WheelOptions} [options]\r\n     * @return {Viewport} this\r\n     */\r\n    wheel(options) {\r\n        this.plugins.add('wheel', new Wheel(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * animate the position and/or scale of the viewport\r\n     * @param {AnimateOptions} options\r\n     * @returns {Viewport} this\r\n     */\r\n    animate(options) {\r\n        this.plugins.add('animate', new Animate(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * enable clamping of zoom to constraints\r\n     * @description\r\n     * The minWidth/Height settings are how small the world can get (as it would appear on the screen)\r\n     * before clamping. The maxWidth/maxHeight is how larger the world can scale (as it would appear on\r\n     * the screen) before clamping.\r\n     *\r\n     * For example, if you have a world size of 1000 x 1000 and a screen size of 100 x 100, if you set\r\n     * minWidth/Height = 100 then the world will not be able to zoom smaller than the screen size (ie,\r\n     * zooming out so it appears smaller than the screen). Similarly, if you set maxWidth/Height = 100\r\n     * the world will not be able to zoom larger than the screen size (ie, zooming in so it appears\r\n     * larger than the screen).\r\n     * @param {ClampZoomOptions} [options]\r\n     * @return {Viewport} this\r\n     */\r\n    clampZoom(options) {\r\n        this.plugins.add('clamp-zoom', new ClampZoom(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * Scroll viewport when mouse hovers near one of the edges or radius-distance from center of screen.\r\n     * NOTE: fires 'moved' event\r\n     * @param {MouseEdgesOptions} [options]\r\n     */\r\n    mouseEdges(options) {\r\n        this.plugins.add('mouse-edges', new MouseEdges(this, options));\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * pause viewport (including animation updates such as decelerate)\r\n     * @type {boolean}\r\n     */\r\n    get pause() {\r\n        return this._pause\r\n    }\r\n    set pause(value) {\r\n        this._pause = value;\r\n        this.lastViewport = null;\r\n        this.moving = false;\r\n        this.zooming = false;\r\n        if (value) {\r\n            this.input.pause();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * move the viewport so the bounding box is visible\r\n     * @param {number} x - left\r\n     * @param {number} y - top\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @param {boolean} [resizeToFit] resize the viewport so the box fits within the viewport\r\n     */\r\n    ensureVisible(x, y, width, height, resizeToFit) {\r\n        if (resizeToFit && (width > this.worldScreenWidth || height > this.worldScreenHeight)) {\r\n            this.fit(true, width, height);\r\n            this.emit('zoomed', { viewport: this, type: 'ensureVisible' });\r\n        }\r\n        let moved = false;\r\n        if (x < this.left) {\r\n            this.left = x;\r\n            moved = true;\r\n        }\r\n        else if (x + width > this.right) {\r\n            this.right = x + width;\r\n            moved = true;\r\n        }\r\n        if (y < this.top) {\r\n            this.top = y;\r\n            moved = true;\r\n        }\r\n        else if (y + height > this.bottom) {\r\n            this.bottom = y + height;\r\n            moved = true;\r\n        }\r\n        if (moved) {\r\n            this.emit('moved', { viewport: this, type: 'ensureVisible' });\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * fires after a mouse or touch click\r\n * @event Viewport#clicked\r\n * @type {object}\r\n * @property {PIXI.Point} screen\r\n * @property {PIXI.Point} world\r\n * @property {Viewport} viewport\r\n */\r\n\r\n/**\r\n * fires when a drag starts\r\n * @event Viewport#drag-start\r\n * @type {object}\r\n * @property {PIXI.Point} screen\r\n * @property {PIXI.Point} world\r\n * @property {Viewport} viewport\r\n */\r\n\r\n/**\r\n * fires when a drag ends\r\n * @event Viewport#drag-end\r\n * @type {object}\r\n * @property {PIXI.Point} screen\r\n * @property {PIXI.Point} world\r\n * @property {Viewport} viewport\r\n */\r\n\r\n/**\r\n * fires when a pinch starts\r\n * @event Viewport#pinch-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a pinch end\r\n * @event Viewport#pinch-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a snap starts\r\n * @event Viewport#snap-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a snap ends\r\n * @event Viewport#snap-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a snap-zoom starts\r\n * @event Viewport#snap-zoom-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a snap-zoom ends\r\n * @event Viewport#snap-zoom-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a bounce starts in the x direction\r\n * @event Viewport#bounce-x-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a bounce ends in the x direction\r\n * @event Viewport#bounce-x-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a bounce starts in the y direction\r\n * @event Viewport#bounce-y-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a bounce ends in the y direction\r\n * @event Viewport#bounce-y-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when for a mouse wheel event\r\n * @event Viewport#wheel\r\n * @type {object}\r\n * @property {object} wheel\r\n * @property {number} wheel.dx\r\n * @property {number} wheel.dy\r\n * @property {number} wheel.dz\r\n * @property {Viewport} viewport\r\n */\r\n\r\n/**\r\n * fires when a wheel-scroll occurs\r\n * @event Viewport#wheel-scroll\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when a mouse-edge starts to scroll\r\n * @event Viewport#mouse-edge-start\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when the mouse-edge scrolling ends\r\n * @event Viewport#mouse-edge-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when viewport moves through UI interaction, deceleration, ensureVisible, or follow\r\n * @event Viewport#moved\r\n * @type {object}\r\n * @property {Viewport} viewport\r\n * @property {string} type (drag, snap, pinch, follow, bounce-x, bounce-y, clamp-x, clamp-y, decelerate, mouse-edges, wheel, ensureVisible)\r\n */\r\n\r\n/**\r\n * fires when viewport moves through UI interaction, deceleration, ensureVisible, or follow\r\n * @event Viewport#zoomed\r\n * @type {object}\r\n * @property {Viewport} viewport\r\n * @property {string} type (drag-zoom, pinch, wheel, clamp-zoom, ensureVisible)\r\n */\r\n\r\n/**\r\n * fires when viewport stops moving\r\n * @event Viewport#moved-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n * fires when viewport stops zooming\r\n * @event Viewport#zoomed-end\r\n * @type {Viewport}\r\n */\r\n\r\n/**\r\n* fires at the end of an update frame\r\n* @event Viewport#frame-end\r\n* @type {Viewport}\r\n*/\r\n\r\n/** @typedef HitArea {(PIXI.Rectangle | PIXI.Circle | PIXI.Ellipse | PIXI.Polygon | PIXI.RoundedRectangle)} */\r\n\r\n/**\r\n * @typedef {Object} OutOfBounds\r\n * @private\r\n * @property {boolean} left\r\n * @property {boolean} right\r\n * @property {boolean} top\r\n * @property {boolean} bottom\r\n * @property {PIXI.Point} cornerPoint\r\n */\r\n\r\n/**\r\n * @typedef {Object} LastViewport\r\n * @private\r\n * @property {number} x\r\n * @property {number} y\r\n * @property {number} scaleX\r\n * @property {number} scaleY\r\n */\n\nexport { Plugin, Viewport };\n//# sourceMappingURL=viewport.es.js.map\n","/*!\n * @pixi/math - v5.3.9\n * Compiled Wed, 24 Mar 2021 19:54:16 UTC\n *\n * @pixi/math is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/**\n * Two Pi.\n *\n * @static\n * @constant {number} PI_2\n * @memberof PIXI\n */\nvar PI_2 = Math.PI * 2;\n/**\n * Conversion factor for converting radians to degrees.\n *\n * @static\n * @constant {number} RAD_TO_DEG\n * @memberof PIXI\n */\nvar RAD_TO_DEG = 180 / Math.PI;\n/**\n * Conversion factor for converting degrees to radians.\n *\n * @static\n * @constant {number} DEG_TO_RAD\n * @memberof PIXI\n */\nvar DEG_TO_RAD = Math.PI / 180;\nvar SHAPES;\n(function (SHAPES) {\n    SHAPES[SHAPES[\"POLY\"] = 0] = \"POLY\";\n    SHAPES[SHAPES[\"RECT\"] = 1] = \"RECT\";\n    SHAPES[SHAPES[\"CIRC\"] = 2] = \"CIRC\";\n    SHAPES[SHAPES[\"ELIP\"] = 3] = \"ELIP\";\n    SHAPES[SHAPES[\"RREC\"] = 4] = \"RREC\";\n})(SHAPES || (SHAPES = {}));\n/**\n * Constants that identify shapes, mainly to prevent `instanceof` calls.\n *\n * @static\n * @constant\n * @name SHAPES\n * @memberof PIXI\n * @type {enum}\n * @property {number} POLY Polygon\n * @property {number} RECT Rectangle\n * @property {number} CIRC Circle\n * @property {number} ELIP Ellipse\n * @property {number} RREC Rounded Rectangle\n * @enum {number}\n */\n\n/**\n * Size object, contains width and height\n *\n * @memberof PIXI\n * @typedef {object} ISize\n * @property {number} width - Width component\n * @property {number} height - Height component\n */\n/**\n * Rectangle object is an area defined by its position, as indicated by its top-left corner\n * point (x, y) and by its width and its height.\n *\n * @class\n * @memberof PIXI\n */\nvar Rectangle = /** @class */ (function () {\n    /**\n     * @param {number} [x=0] - The X coordinate of the upper-left corner of the rectangle\n     * @param {number} [y=0] - The Y coordinate of the upper-left corner of the rectangle\n     * @param {number} [width=0] - The overall width of this rectangle\n     * @param {number} [height=0] - The overall height of this rectangle\n     */\n    function Rectangle(x, y, width, height) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = Number(x);\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = Number(y);\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.width = Number(width);\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.height = Number(height);\n        /**\n         * The type of the object, mainly used to avoid `instanceof` checks\n         *\n         * @member {number}\n         * @readOnly\n         * @default PIXI.SHAPES.RECT\n         * @see PIXI.SHAPES\n         */\n        this.type = SHAPES.RECT;\n    }\n    Object.defineProperty(Rectangle.prototype, \"left\", {\n        /**\n         * returns the left edge of the rectangle\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"right\", {\n        /**\n         * returns the right edge of the rectangle\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"top\", {\n        /**\n         * returns the top edge of the rectangle\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"bottom\", {\n        /**\n         * returns the bottom edge of the rectangle\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle, \"EMPTY\", {\n        /**\n         * A constant empty rectangle.\n         *\n         * @static\n         * @constant\n         * @member {PIXI.Rectangle}\n         * @return {PIXI.Rectangle} An empty rectangle\n         */\n        get: function () {\n            return new Rectangle(0, 0, 0, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Creates a clone of this Rectangle\n     *\n     * @return {PIXI.Rectangle} a copy of the rectangle\n     */\n    Rectangle.prototype.clone = function () {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    };\n    /**\n     * Copies another rectangle to this one.\n     *\n     * @param {PIXI.Rectangle} rectangle - The rectangle to copy from.\n     * @return {PIXI.Rectangle} Returns itself.\n     */\n    Rectangle.prototype.copyFrom = function (rectangle) {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n        return this;\n    };\n    /**\n     * Copies this rectangle to another one.\n     *\n     * @param {PIXI.Rectangle} rectangle - The rectangle to copy to.\n     * @return {PIXI.Rectangle} Returns given parameter.\n     */\n    Rectangle.prototype.copyTo = function (rectangle) {\n        rectangle.x = this.x;\n        rectangle.y = this.y;\n        rectangle.width = this.width;\n        rectangle.height = this.height;\n        return rectangle;\n    };\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rectangle\n     *\n     * @param {number} x - The X coordinate of the point to test\n     * @param {number} y - The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coordinates are within this Rectangle\n     */\n    Rectangle.prototype.contains = function (x, y) {\n        if (this.width <= 0 || this.height <= 0) {\n            return false;\n        }\n        if (x >= this.x && x < this.x + this.width) {\n            if (y >= this.y && y < this.y + this.height) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Pads the rectangle making it grow in all directions.\n     * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n     *\n     * @param {number} [paddingX=0] - The horizontal padding amount.\n     * @param {number} [paddingY=0] - The vertical padding amount.\n     * @return {PIXI.Rectangle} Returns itself.\n     */\n    Rectangle.prototype.pad = function (paddingX, paddingY) {\n        if (paddingX === void 0) { paddingX = 0; }\n        if (paddingY === void 0) { paddingY = paddingX; }\n        this.x -= paddingX;\n        this.y -= paddingY;\n        this.width += paddingX * 2;\n        this.height += paddingY * 2;\n        return this;\n    };\n    /**\n     * Fits this rectangle around the passed one.\n     *\n     * @param {PIXI.Rectangle} rectangle - The rectangle to fit.\n     * @return {PIXI.Rectangle} Returns itself.\n     */\n    Rectangle.prototype.fit = function (rectangle) {\n        var x1 = Math.max(this.x, rectangle.x);\n        var x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n        var y1 = Math.max(this.y, rectangle.y);\n        var y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n        this.x = x1;\n        this.width = Math.max(x2 - x1, 0);\n        this.y = y1;\n        this.height = Math.max(y2 - y1, 0);\n        return this;\n    };\n    /**\n     * Enlarges rectangle that way its corners lie on grid\n     *\n     * @param {number} [resolution=1] resolution\n     * @param {number} [eps=0.001] precision\n     * @return {PIXI.Rectangle} Returns itself.\n     */\n    Rectangle.prototype.ceil = function (resolution, eps) {\n        if (resolution === void 0) { resolution = 1; }\n        if (eps === void 0) { eps = 0.001; }\n        var x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n        var y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n        this.x = Math.floor((this.x + eps) * resolution) / resolution;\n        this.y = Math.floor((this.y + eps) * resolution) / resolution;\n        this.width = x2 - this.x;\n        this.height = y2 - this.y;\n        return this;\n    };\n    /**\n     * Enlarges this rectangle to include the passed rectangle.\n     *\n     * @param {PIXI.Rectangle} rectangle - The rectangle to include.\n     * @return {PIXI.Rectangle} Returns itself.\n     */\n    Rectangle.prototype.enlarge = function (rectangle) {\n        var x1 = Math.min(this.x, rectangle.x);\n        var x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n        var y1 = Math.min(this.y, rectangle.y);\n        var y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n        this.x = x1;\n        this.width = x2 - x1;\n        this.y = y1;\n        this.height = y2 - y1;\n        return this;\n    };\n    return Rectangle;\n}());\n\n/**\n * The Circle object is used to help draw graphics and can also be used to specify a hit area for displayObjects.\n *\n * @class\n * @memberof PIXI\n */\nvar Circle = /** @class */ (function () {\n    /**\n     * @param {number} [x=0] - The X coordinate of the center of this circle\n     * @param {number} [y=0] - The Y coordinate of the center of this circle\n     * @param {number} [radius=0] - The radius of the circle\n     */\n    function Circle(x, y, radius) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (radius === void 0) { radius = 0; }\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.radius = radius;\n        /**\n         * The type of the object, mainly used to avoid `instanceof` checks\n         *\n         * @member {number}\n         * @readOnly\n         * @default PIXI.SHAPES.CIRC\n         * @see PIXI.SHAPES\n         */\n        this.type = SHAPES.CIRC;\n    }\n    /**\n     * Creates a clone of this Circle instance\n     *\n     * @return {PIXI.Circle} a copy of the Circle\n     */\n    Circle.prototype.clone = function () {\n        return new Circle(this.x, this.y, this.radius);\n    };\n    /**\n     * Checks whether the x and y coordinates given are contained within this circle\n     *\n     * @param {number} x - The X coordinate of the point to test\n     * @param {number} y - The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coordinates are within this Circle\n     */\n    Circle.prototype.contains = function (x, y) {\n        if (this.radius <= 0) {\n            return false;\n        }\n        var r2 = this.radius * this.radius;\n        var dx = (this.x - x);\n        var dy = (this.y - y);\n        dx *= dx;\n        dy *= dy;\n        return (dx + dy <= r2);\n    };\n    /**\n    * Returns the framing rectangle of the circle as a Rectangle object\n    *\n    * @return {PIXI.Rectangle} the framing rectangle\n    */\n    Circle.prototype.getBounds = function () {\n        return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);\n    };\n    return Circle;\n}());\n\n/**\n * The Ellipse object is used to help draw graphics and can also be used to specify a hit area for displayObjects.\n *\n * @class\n * @memberof PIXI\n */\nvar Ellipse = /** @class */ (function () {\n    /**\n     * @param {number} [x=0] - The X coordinate of the center of this ellipse\n     * @param {number} [y=0] - The Y coordinate of the center of this ellipse\n     * @param {number} [halfWidth=0] - The half width of this ellipse\n     * @param {number} [halfHeight=0] - The half height of this ellipse\n     */\n    function Ellipse(x, y, halfWidth, halfHeight) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (halfWidth === void 0) { halfWidth = 0; }\n        if (halfHeight === void 0) { halfHeight = 0; }\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.width = halfWidth;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.height = halfHeight;\n        /**\n         * The type of the object, mainly used to avoid `instanceof` checks\n         *\n         * @member {number}\n         * @readOnly\n         * @default PIXI.SHAPES.ELIP\n         * @see PIXI.SHAPES\n         */\n        this.type = SHAPES.ELIP;\n    }\n    /**\n     * Creates a clone of this Ellipse instance\n     *\n     * @return {PIXI.Ellipse} a copy of the ellipse\n     */\n    Ellipse.prototype.clone = function () {\n        return new Ellipse(this.x, this.y, this.width, this.height);\n    };\n    /**\n     * Checks whether the x and y coordinates given are contained within this ellipse\n     *\n     * @param {number} x - The X coordinate of the point to test\n     * @param {number} y - The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coords are within this ellipse\n     */\n    Ellipse.prototype.contains = function (x, y) {\n        if (this.width <= 0 || this.height <= 0) {\n            return false;\n        }\n        // normalize the coords to an ellipse with center 0,0\n        var normx = ((x - this.x) / this.width);\n        var normy = ((y - this.y) / this.height);\n        normx *= normx;\n        normy *= normy;\n        return (normx + normy <= 1);\n    };\n    /**\n     * Returns the framing rectangle of the ellipse as a Rectangle object\n     *\n     * @return {PIXI.Rectangle} the framing rectangle\n     */\n    Ellipse.prototype.getBounds = function () {\n        return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);\n    };\n    return Ellipse;\n}());\n\n/**\n * A class to define a shape via user defined co-orinates.\n *\n * @class\n * @memberof PIXI\n */\nvar Polygon = /** @class */ (function () {\n    /**\n     * @param {PIXI.IPoint[]|number[]} points - This can be an array of Points\n     *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n     *  the arguments passed can be all the points of the polygon e.g.\n     *  `new PIXI.Polygon(new PIXI.Point(), new PIXI.Point(), ...)`, or the arguments passed can be flat\n     *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n     */\n    function Polygon() {\n        var arguments$1 = arguments;\n\n        var points = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            points[_i] = arguments$1[_i];\n        }\n        var flat = Array.isArray(points[0]) ? points[0] : points;\n        // if this is an array of points, convert it to a flat array of numbers\n        if (typeof flat[0] !== 'number') {\n            var p = [];\n            for (var i = 0, il = flat.length; i < il; i++) {\n                p.push(flat[i].x, flat[i].y);\n            }\n            flat = p;\n        }\n        /**\n         * An array of the points of this polygon\n         *\n         * @member {number[]}\n         */\n        this.points = flat;\n        /**\n         * The type of the object, mainly used to avoid `instanceof` checks\n         *\n         * @member {number}\n         * @readOnly\n         * @default PIXI.SHAPES.POLY\n         * @see PIXI.SHAPES\n         */\n        this.type = SHAPES.POLY;\n        /**\n         * `false` after moveTo, `true` after `closePath`. In all other cases it is `true`.\n         * @member {boolean}\n         * @default true\n         */\n        this.closeStroke = true;\n    }\n    /**\n     * Creates a clone of this polygon\n     *\n     * @return {PIXI.Polygon} a copy of the polygon\n     */\n    Polygon.prototype.clone = function () {\n        var points = this.points.slice();\n        var polygon = new Polygon(points);\n        polygon.closeStroke = this.closeStroke;\n        return polygon;\n    };\n    /**\n     * Checks whether the x and y coordinates passed to this function are contained within this polygon\n     *\n     * @param {number} x - The X coordinate of the point to test\n     * @param {number} y - The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coordinates are within this polygon\n     */\n    Polygon.prototype.contains = function (x, y) {\n        var inside = false;\n        // use some raycasting to test hits\n        // https://github.com/substack/point-in-polygon/blob/master/index.js\n        var length = this.points.length / 2;\n        for (var i = 0, j = length - 1; i < length; j = i++) {\n            var xi = this.points[i * 2];\n            var yi = this.points[(i * 2) + 1];\n            var xj = this.points[j * 2];\n            var yj = this.points[(j * 2) + 1];\n            var intersect = ((yi > y) !== (yj > y)) && (x < ((xj - xi) * ((y - yi) / (yj - yi))) + xi);\n            if (intersect) {\n                inside = !inside;\n            }\n        }\n        return inside;\n    };\n    return Polygon;\n}());\n\n/**\n * The Rounded Rectangle object is an area that has nice rounded corners, as indicated by its\n * top-left corner point (x, y) and by its width and its height and its radius.\n *\n * @class\n * @memberof PIXI\n */\nvar RoundedRectangle = /** @class */ (function () {\n    /**\n     * @param {number} [x=0] - The X coordinate of the upper-left corner of the rounded rectangle\n     * @param {number} [y=0] - The Y coordinate of the upper-left corner of the rounded rectangle\n     * @param {number} [width=0] - The overall width of this rounded rectangle\n     * @param {number} [height=0] - The overall height of this rounded rectangle\n     * @param {number} [radius=20] - Controls the radius of the rounded corners\n     */\n    function RoundedRectangle(x, y, width, height, radius) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        if (radius === void 0) { radius = 20; }\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.width = width;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.height = height;\n        /**\n         * @member {number}\n         * @default 20\n         */\n        this.radius = radius;\n        /**\n         * The type of the object, mainly used to avoid `instanceof` checks\n         *\n         * @member {number}\n         * @readonly\n         * @default PIXI.SHAPES.RREC\n         * @see PIXI.SHAPES\n         */\n        this.type = SHAPES.RREC;\n    }\n    /**\n     * Creates a clone of this Rounded Rectangle\n     *\n     * @return {PIXI.RoundedRectangle} a copy of the rounded rectangle\n     */\n    RoundedRectangle.prototype.clone = function () {\n        return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n    };\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n     *\n     * @param {number} x - The X coordinate of the point to test\n     * @param {number} y - The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coordinates are within this Rounded Rectangle\n     */\n    RoundedRectangle.prototype.contains = function (x, y) {\n        if (this.width <= 0 || this.height <= 0) {\n            return false;\n        }\n        if (x >= this.x && x <= this.x + this.width) {\n            if (y >= this.y && y <= this.y + this.height) {\n                if ((y >= this.y + this.radius && y <= this.y + this.height - this.radius)\n                    || (x >= this.x + this.radius && x <= this.x + this.width - this.radius)) {\n                    return true;\n                }\n                var dx = x - (this.x + this.radius);\n                var dy = y - (this.y + this.radius);\n                var radius2 = this.radius * this.radius;\n                if ((dx * dx) + (dy * dy) <= radius2) {\n                    return true;\n                }\n                dx = x - (this.x + this.width - this.radius);\n                if ((dx * dx) + (dy * dy) <= radius2) {\n                    return true;\n                }\n                dy = y - (this.y + this.height - this.radius);\n                if ((dx * dx) + (dy * dy) <= radius2) {\n                    return true;\n                }\n                dx = x - (this.x + this.radius);\n                if ((dx * dx) + (dy * dy) <= radius2) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return RoundedRectangle;\n}());\n\n/**\n * Common interface for points. Both Point and ObservablePoint implement it\n * @memberof PIXI\n * @interface IPointData\n */\n/**\n * X coord\n * @memberof PIXI.IPointData#\n * @member {number} x\n */\n/**\n * Y coord\n * @memberof PIXI.IPointData#\n * @member {number} y\n */\n\n/**\n * Common interface for points. Both Point and ObservablePoint implement it\n * @memberof PIXI\n * @interface IPoint\n * @extends PIXI.IPointData\n */\n/**\n * Sets the point to a new x and y position.\n * If y is omitted, both x and y will be set to x.\n *\n * @method set\n * @memberof PIXI.IPoint#\n * @param {number} [x=0] - position of the point on the x axis\n * @param {number} [y=x] - position of the point on the y axis\n */\n/**\n * Copies x and y from the given point\n * @method copyFrom\n * @memberof PIXI.IPoint#\n * @param {PIXI.IPointData} p - The point to copy from\n * @returns {this} Returns itself.\n */\n/**\n * Copies x and y into the given point\n * @method copyTo\n * @memberof PIXI.IPoint#\n * @param {PIXI.IPoint} p - The point to copy.\n * @returns {PIXI.IPoint} Given point with values updated\n */\n/**\n * Returns true if the given point is equal to this point\n *\n * @method equals\n * @memberof PIXI.IPoint#\n * @param {PIXI.IPointData} p - The point to check\n * @returns {boolean} Whether the given point equal to this point\n */\n\n/**\n * The Point object represents a location in a two-dimensional coordinate system, where x represents\n * the horizontal axis and y represents the vertical axis.\n *\n * @class\n * @memberof PIXI\n * @implements IPoint\n */\nvar Point = /** @class */ (function () {\n    /**\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    function Point(x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y;\n    }\n    /**\n     * Creates a clone of this point\n     *\n     * @return {PIXI.Point} a copy of the point\n     */\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    /**\n     * Copies x and y from the given point\n     *\n     * @param {PIXI.IPointData} p - The point to copy from\n     * @returns {this} Returns itself.\n     */\n    Point.prototype.copyFrom = function (p) {\n        this.set(p.x, p.y);\n        return this;\n    };\n    /**\n     * Copies x and y into the given point\n     *\n     * @param {PIXI.IPoint} p - The point to copy.\n     * @returns {PIXI.IPoint} Given point with values updated\n     */\n    Point.prototype.copyTo = function (p) {\n        p.set(this.x, this.y);\n        return p;\n    };\n    /**\n     * Returns true if the given point is equal to this point\n     *\n     * @param {PIXI.IPointData} p - The point to check\n     * @returns {boolean} Whether the given point equal to this point\n     */\n    Point.prototype.equals = function (p) {\n        return (p.x === this.x) && (p.y === this.y);\n    };\n    /**\n     * Sets the point to a new x and y position.\n     * If y is omitted, both x and y will be set to x.\n     *\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=x] - position of the point on the y axis\n     * @returns {this} Returns itself.\n     */\n    Point.prototype.set = function (x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = x; }\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    return Point;\n}());\n\n/**\n * The Point object represents a location in a two-dimensional coordinate system, where x represents\n * the horizontal axis and y represents the vertical axis.\n *\n * An ObservablePoint is a point that triggers a callback when the point's position is changed.\n *\n * @class\n * @memberof PIXI\n * @implements IPoint\n */\nvar ObservablePoint = /** @class */ (function () {\n    /**\n     * @param {Function} cb - callback when changed\n     * @param {object} scope - owner of callback\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    function ObservablePoint(cb, scope, x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this._x = x;\n        this._y = y;\n        this.cb = cb;\n        this.scope = scope;\n    }\n    /**\n     * Creates a clone of this point.\n     * The callback and scope params can be overidden otherwise they will default\n     * to the clone object's values.\n     *\n     * @override\n     * @param {Function} [cb=null] - callback when changed\n     * @param {object} [scope=null] - owner of callback\n     * @return {PIXI.ObservablePoint} a copy of the point\n     */\n    ObservablePoint.prototype.clone = function (cb, scope) {\n        if (cb === void 0) { cb = this.cb; }\n        if (scope === void 0) { scope = this.scope; }\n        return new ObservablePoint(cb, scope, this._x, this._y);\n    };\n    /**\n     * Sets the point to a new x and y position.\n     * If y is omitted, both x and y will be set to x.\n     *\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=x] - position of the point on the y axis\n     * @returns {this} Returns itself.\n     */\n    ObservablePoint.prototype.set = function (x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = x; }\n        if (this._x !== x || this._y !== y) {\n            this._x = x;\n            this._y = y;\n            this.cb.call(this.scope);\n        }\n        return this;\n    };\n    /**\n     * Copies x and y from the given point\n     *\n     * @param {PIXI.IPointData} p - The point to copy from.\n     * @returns {this} Returns itself.\n     */\n    ObservablePoint.prototype.copyFrom = function (p) {\n        if (this._x !== p.x || this._y !== p.y) {\n            this._x = p.x;\n            this._y = p.y;\n            this.cb.call(this.scope);\n        }\n        return this;\n    };\n    /**\n     * Copies x and y into the given point\n     *\n     * @param {PIXI.IPoint} p - The point to copy.\n     * @returns {PIXI.IPoint} Given point with values updated\n     */\n    ObservablePoint.prototype.copyTo = function (p) {\n        p.set(this._x, this._y);\n        return p;\n    };\n    /**\n     * Returns true if the given point is equal to this point\n     *\n     * @param {PIXI.IPointData} p - The point to check\n     * @returns {boolean} Whether the given point equal to this point\n     */\n    ObservablePoint.prototype.equals = function (p) {\n        return (p.x === this._x) && (p.y === this._y);\n    };\n    Object.defineProperty(ObservablePoint.prototype, \"x\", {\n        /**\n         * The position of the displayObject on the x axis relative to the local coordinates of the parent.\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.cb.call(this.scope);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ObservablePoint.prototype, \"y\", {\n        /**\n         * The position of the displayObject on the x axis relative to the local coordinates of the parent.\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.cb.call(this.scope);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ObservablePoint;\n}());\n\n/**\n * The PixiJS Matrix as a class makes it a lot faster.\n *\n * Here is a representation of it:\n * ```js\n * | a | c | tx|\n * | b | d | ty|\n * | 0 | 0 | 1 |\n * ```\n * @class\n * @memberof PIXI\n */\nvar Matrix = /** @class */ (function () {\n    /**\n     * @param {number} [a=1] - x scale\n     * @param {number} [b=0] - x skew\n     * @param {number} [c=0] - y skew\n     * @param {number} [d=1] - y scale\n     * @param {number} [tx=0] - x translation\n     * @param {number} [ty=0] - y translation\n     */\n    function Matrix(a, b, c, d, tx, ty) {\n        if (a === void 0) { a = 1; }\n        if (b === void 0) { b = 0; }\n        if (c === void 0) { c = 0; }\n        if (d === void 0) { d = 1; }\n        if (tx === void 0) { tx = 0; }\n        if (ty === void 0) { ty = 0; }\n        this.array = null;\n        /**\n         * @member {number}\n         * @default 1\n         */\n        this.a = a;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.b = b;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.c = c;\n        /**\n         * @member {number}\n         * @default 1\n         */\n        this.d = d;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.tx = tx;\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.ty = ty;\n    }\n    /**\n     * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n     *\n     * a = array[0]\n     * b = array[1]\n     * c = array[3]\n     * d = array[4]\n     * tx = array[2]\n     * ty = array[5]\n     *\n     * @param {number[]} array - The array that the matrix will be populated from.\n     */\n    Matrix.prototype.fromArray = function (array) {\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    };\n    /**\n     * sets the matrix properties\n     *\n     * @param {number} a - Matrix component\n     * @param {number} b - Matrix component\n     * @param {number} c - Matrix component\n     * @param {number} d - Matrix component\n     * @param {number} tx - Matrix component\n     * @param {number} ty - Matrix component\n     *\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.set = function (a, b, c, d, tx, ty) {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.tx = tx;\n        this.ty = ty;\n        return this;\n    };\n    /**\n     * Creates an array from the current Matrix object.\n     *\n     * @param {boolean} transpose - Whether we need to transpose the matrix or not\n     * @param {Float32Array} [out=new Float32Array(9)] - If provided the array will be assigned to out\n     * @return {number[]} the newly created array which contains the matrix\n     */\n    Matrix.prototype.toArray = function (transpose, out) {\n        if (!this.array) {\n            this.array = new Float32Array(9);\n        }\n        var array = out || this.array;\n        if (transpose) {\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }\n        else {\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n        return array;\n    };\n    /**\n     * Get a new position with the current transformation applied.\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n     *\n     * @param {PIXI.IPointData} pos - The origin\n     * @param {PIXI.Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @return {PIXI.Point} The new point, transformed through this matrix\n     */\n    Matrix.prototype.apply = function (pos, newPos) {\n        newPos = (newPos || new Point());\n        var x = pos.x;\n        var y = pos.y;\n        newPos.x = (this.a * x) + (this.c * y) + this.tx;\n        newPos.y = (this.b * x) + (this.d * y) + this.ty;\n        return newPos;\n    };\n    /**\n     * Get a new position with the inverse of the current transformation applied.\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n     *\n     * @param {PIXI.IPointData} pos - The origin\n     * @param {PIXI.Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @return {PIXI.Point} The new point, inverse-transformed through this matrix\n     */\n    Matrix.prototype.applyInverse = function (pos, newPos) {\n        newPos = (newPos || new Point());\n        var id = 1 / ((this.a * this.d) + (this.c * -this.b));\n        var x = pos.x;\n        var y = pos.y;\n        newPos.x = (this.d * id * x) + (-this.c * id * y) + (((this.ty * this.c) - (this.tx * this.d)) * id);\n        newPos.y = (this.a * id * y) + (-this.b * id * x) + (((-this.ty * this.a) + (this.tx * this.b)) * id);\n        return newPos;\n    };\n    /**\n     * Translates the matrix on the x and y.\n     *\n     * @param {number} x - How much to translate x by\n     * @param {number} y - How much to translate y by\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.translate = function (x, y) {\n        this.tx += x;\n        this.ty += y;\n        return this;\n    };\n    /**\n     * Applies a scale transformation to the matrix.\n     *\n     * @param {number} x - The amount to scale horizontally\n     * @param {number} y - The amount to scale vertically\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.scale = function (x, y) {\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n        return this;\n    };\n    /**\n     * Applies a rotation transformation to the matrix.\n     *\n     * @param {number} angle - The angle in radians.\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.rotate = function (angle) {\n        var cos = Math.cos(angle);\n        var sin = Math.sin(angle);\n        var a1 = this.a;\n        var c1 = this.c;\n        var tx1 = this.tx;\n        this.a = (a1 * cos) - (this.b * sin);\n        this.b = (a1 * sin) + (this.b * cos);\n        this.c = (c1 * cos) - (this.d * sin);\n        this.d = (c1 * sin) + (this.d * cos);\n        this.tx = (tx1 * cos) - (this.ty * sin);\n        this.ty = (tx1 * sin) + (this.ty * cos);\n        return this;\n    };\n    /**\n     * Appends the given Matrix to this Matrix.\n     *\n     * @param {PIXI.Matrix} matrix - The matrix to append.\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.append = function (matrix) {\n        var a1 = this.a;\n        var b1 = this.b;\n        var c1 = this.c;\n        var d1 = this.d;\n        this.a = (matrix.a * a1) + (matrix.b * c1);\n        this.b = (matrix.a * b1) + (matrix.b * d1);\n        this.c = (matrix.c * a1) + (matrix.d * c1);\n        this.d = (matrix.c * b1) + (matrix.d * d1);\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\n        return this;\n    };\n    /**\n     * Sets the matrix based on all the available properties\n     *\n     * @param {number} x - Position on the x axis\n     * @param {number} y - Position on the y axis\n     * @param {number} pivotX - Pivot on the x axis\n     * @param {number} pivotY - Pivot on the y axis\n     * @param {number} scaleX - Scale on the x axis\n     * @param {number} scaleY - Scale on the y axis\n     * @param {number} rotation - Rotation in radians\n     * @param {number} skewX - Skew on the x axis\n     * @param {number} skewY - Skew on the y axis\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.setTransform = function (x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n        this.a = Math.cos(rotation + skewY) * scaleX;\n        this.b = Math.sin(rotation + skewY) * scaleX;\n        this.c = -Math.sin(rotation - skewX) * scaleY;\n        this.d = Math.cos(rotation - skewX) * scaleY;\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\n        return this;\n    };\n    /**\n     * Prepends the given Matrix to this Matrix.\n     *\n     * @param {PIXI.Matrix} matrix - The matrix to prepend\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.prepend = function (matrix) {\n        var tx1 = this.tx;\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n            var a1 = this.a;\n            var c1 = this.c;\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\n        }\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\n        return this;\n    };\n    /**\n     * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n     *\n     * @param {PIXI.Transform} transform - The transform to apply the properties to.\n     * @return {PIXI.Transform} The transform with the newly applied properties\n     */\n    Matrix.prototype.decompose = function (transform) {\n        // sort out rotation / skew..\n        var a = this.a;\n        var b = this.b;\n        var c = this.c;\n        var d = this.d;\n        var skewX = -Math.atan2(-c, d);\n        var skewY = Math.atan2(b, a);\n        var delta = Math.abs(skewX + skewY);\n        if (delta < 0.00001 || Math.abs(PI_2 - delta) < 0.00001) {\n            transform.rotation = skewY;\n            transform.skew.x = transform.skew.y = 0;\n        }\n        else {\n            transform.rotation = 0;\n            transform.skew.x = skewX;\n            transform.skew.y = skewY;\n        }\n        // next set scale\n        transform.scale.x = Math.sqrt((a * a) + (b * b));\n        transform.scale.y = Math.sqrt((c * c) + (d * d));\n        // next set position\n        transform.position.x = this.tx;\n        transform.position.y = this.ty;\n        return transform;\n    };\n    /**\n     * Inverts this matrix\n     *\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.invert = function () {\n        var a1 = this.a;\n        var b1 = this.b;\n        var c1 = this.c;\n        var d1 = this.d;\n        var tx1 = this.tx;\n        var n = (a1 * d1) - (b1 * c1);\n        this.a = d1 / n;\n        this.b = -b1 / n;\n        this.c = -c1 / n;\n        this.d = a1 / n;\n        this.tx = ((c1 * this.ty) - (d1 * tx1)) / n;\n        this.ty = -((a1 * this.ty) - (b1 * tx1)) / n;\n        return this;\n    };\n    /**\n     * Resets this Matrix to an identity (default) matrix.\n     *\n     * @return {PIXI.Matrix} This matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.identity = function () {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n        return this;\n    };\n    /**\n     * Creates a new Matrix object with the same values as this one.\n     *\n     * @return {PIXI.Matrix} A copy of this matrix. Good for chaining method calls.\n     */\n    Matrix.prototype.clone = function () {\n        var matrix = new Matrix();\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n        return matrix;\n    };\n    /**\n     * Changes the values of the given matrix to be the same as the ones in this matrix\n     *\n     * @param {PIXI.Matrix} matrix - The matrix to copy to.\n     * @return {PIXI.Matrix} The matrix given in parameter with its values updated.\n     */\n    Matrix.prototype.copyTo = function (matrix) {\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n        return matrix;\n    };\n    /**\n     * Changes the values of the matrix to be the same as the ones in given matrix\n     *\n     * @param {PIXI.Matrix} matrix - The matrix to copy from.\n     * @return {PIXI.Matrix} this\n     */\n    Matrix.prototype.copyFrom = function (matrix) {\n        this.a = matrix.a;\n        this.b = matrix.b;\n        this.c = matrix.c;\n        this.d = matrix.d;\n        this.tx = matrix.tx;\n        this.ty = matrix.ty;\n        return this;\n    };\n    Object.defineProperty(Matrix, \"IDENTITY\", {\n        /**\n         * A default (identity) matrix\n         *\n         * @static\n         * @const\n         * @member {PIXI.Matrix}\n         */\n        get: function () {\n            return new Matrix();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Matrix, \"TEMP_MATRIX\", {\n        /**\n         * A temp matrix\n         *\n         * @static\n         * @const\n         * @member {PIXI.Matrix}\n         */\n        get: function () {\n            return new Matrix();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Matrix;\n}());\n\n// Your friendly neighbour https://en.wikipedia.org/wiki/Dihedral_group\n/*\n * Transform matrix for operation n is:\n * | ux | vx |\n * | uy | vy |\n */\nvar ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nvar uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nvar vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nvar vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\n/**\n * [Cayley Table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n * for the composition of each rotation in the dihederal group D8.\n *\n * @type number[][]\n * @private\n */\nvar rotationCayley = [];\n/**\n * Matrices for each `GD8Symmetry` rotation.\n *\n * @type Matrix[]\n * @private\n */\nvar rotationMatrices = [];\n/*\n * Alias for {@code Math.sign}.\n */\nvar signum = Math.sign;\n/*\n * Initializes `rotationCayley` and `rotationMatrices`. It is called\n * only once below.\n */\nfunction init() {\n    for (var i = 0; i < 16; i++) {\n        var row = [];\n        rotationCayley.push(row);\n        for (var j = 0; j < 16; j++) {\n            /* Multiplies rotation matrices i and j. */\n            var _ux = signum((ux[i] * ux[j]) + (vx[i] * uy[j]));\n            var _uy = signum((uy[i] * ux[j]) + (vy[i] * uy[j]));\n            var _vx = signum((ux[i] * vx[j]) + (vx[i] * vy[j]));\n            var _vy = signum((uy[i] * vx[j]) + (vy[i] * vy[j]));\n            /* Finds rotation matrix matching the product and pushes it. */\n            for (var k = 0; k < 16; k++) {\n                if (ux[k] === _ux && uy[k] === _uy\n                    && vx[k] === _vx && vy[k] === _vy) {\n                    row.push(k);\n                    break;\n                }\n            }\n        }\n    }\n    for (var i = 0; i < 16; i++) {\n        var mat = new Matrix();\n        mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n        rotationMatrices.push(mat);\n    }\n}\ninit();\n/**\n * @memberof PIXI\n * @typedef {number} GD8Symmetry\n * @see PIXI.groupD8\n */\n/**\n * Implements the dihedral group D8, which is similar to\n * [group D4]{@link http://mathworld.wolfram.com/DihedralGroupD4.html};\n * D8 is the same but with diagonals, and it is used for texture\n * rotations.\n *\n * The directions the U- and V- axes after rotation\n * of an angle of `a: GD8Constant` are the vectors `(uX(a), uY(a))`\n * and `(vX(a), vY(a))`. These aren't necessarily unit vectors.\n *\n * **Origin:**<br>\n *  This is the small part of gameofbombs.com portal system. It works.\n *\n * @see PIXI.groupD8.E\n * @see PIXI.groupD8.SE\n * @see PIXI.groupD8.S\n * @see PIXI.groupD8.SW\n * @see PIXI.groupD8.W\n * @see PIXI.groupD8.NW\n * @see PIXI.groupD8.N\n * @see PIXI.groupD8.NE\n * @author Ivan @ivanpopelyshev\n * @namespace PIXI.groupD8\n * @memberof PIXI\n */\nvar groupD8 = {\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 0       | East      |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    E: 0,\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 45     | Southeast |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    SE: 1,\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 90     | South     |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    S: 2,\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 135    | Southwest |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    SW: 3,\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 180     | West      |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    W: 4,\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -135/225 | Northwest    |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    NW: 5,\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -90/270  | North        |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    N: 6,\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -45/315  | Northeast    |\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    NE: 7,\n    /**\n     * Reflection about Y-axis.\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    MIRROR_VERTICAL: 8,\n    /**\n     * Reflection about the main diagonal.\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    MAIN_DIAGONAL: 10,\n    /**\n     * Reflection about X-axis.\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    MIRROR_HORIZONTAL: 12,\n    /**\n     * Reflection about reverse diagonal.\n     *\n     * @memberof PIXI.groupD8\n     * @constant {PIXI.GD8Symmetry}\n     */\n    REVERSE_DIAGONAL: 14,\n    /**\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n     * @return {PIXI.GD8Symmetry} The X-component of the U-axis\n     *    after rotating the axes.\n     */\n    uX: function (ind) { return ux[ind]; },\n    /**\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n     * @return {PIXI.GD8Symmetry} The Y-component of the U-axis\n     *    after rotating the axes.\n     */\n    uY: function (ind) { return uy[ind]; },\n    /**\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n     * @return {PIXI.GD8Symmetry} The X-component of the V-axis\n     *    after rotating the axes.\n     */\n    vX: function (ind) { return vx[ind]; },\n    /**\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n     * @return {PIXI.GD8Symmetry} The Y-component of the V-axis\n     *    after rotating the axes.\n     */\n    vY: function (ind) { return vy[ind]; },\n    /**\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} rotation - symmetry whose opposite\n     *   is needed. Only rotations have opposite symmetries while\n     *   reflections don't.\n     * @return {PIXI.GD8Symmetry} The opposite symmetry of `rotation`\n     */\n    inv: function (rotation) {\n        if (rotation & 8) // true only if between 8 & 15 (reflections)\n         {\n            return rotation & 15; // or rotation % 16\n        }\n        return (-rotation) & 7; // or (8 - rotation) % 8\n    },\n    /**\n     * Composes the two D8 operations.\n     *\n     * Taking `^` as reflection:\n     *\n     * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n     * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n     * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n     * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n     * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n     * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n     * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n     * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n     * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n     * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n     *\n     * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} rotationSecond - Second operation, which\n     *   is the row in the above cayley table.\n     * @param {PIXI.GD8Symmetry} rotationFirst - First operation, which\n     *   is the column in the above cayley table.\n     * @return {PIXI.GD8Symmetry} Composed operation\n     */\n    add: function (rotationSecond, rotationFirst) { return (rotationCayley[rotationSecond][rotationFirst]); },\n    /**\n     * Reverse of `add`.\n     *\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} rotationSecond - Second operation\n     * @param {PIXI.GD8Symmetry} rotationFirst - First operation\n     * @return {PIXI.GD8Symmetry} Result\n     */\n    sub: function (rotationSecond, rotationFirst) { return (rotationCayley[rotationSecond][groupD8.inv(rotationFirst)]); },\n    /**\n     * Adds 180 degrees to rotation, which is a commutative\n     * operation.\n     *\n     * @memberof PIXI.groupD8\n     * @param {number} rotation - The number to rotate.\n     * @returns {number} Rotated number\n     */\n    rotate180: function (rotation) { return rotation ^ 4; },\n    /**\n     * Checks if the rotation angle is vertical, i.e. south\n     * or north. It doesn't work for reflections.\n     *\n     * @memberof PIXI.groupD8\n     * @param {PIXI.GD8Symmetry} rotation - The number to check.\n     * @returns {boolean} Whether or not the direction is vertical\n     */\n    isVertical: function (rotation) { return (rotation & 3) === 2; },\n    /**\n     * Approximates the vector `V(dx,dy)` into one of the\n     * eight directions provided by `groupD8`.\n     *\n     * @memberof PIXI.groupD8\n     * @param {number} dx - X-component of the vector\n     * @param {number} dy - Y-component of the vector\n     * @return {PIXI.GD8Symmetry} Approximation of the vector into\n     *  one of the eight symmetries.\n     */\n    byDirection: function (dx, dy) {\n        if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n            if (dy >= 0) {\n                return groupD8.S;\n            }\n            return groupD8.N;\n        }\n        else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n            if (dx > 0) {\n                return groupD8.E;\n            }\n            return groupD8.W;\n        }\n        else if (dy > 0) {\n            if (dx > 0) {\n                return groupD8.SE;\n            }\n            return groupD8.SW;\n        }\n        else if (dx > 0) {\n            return groupD8.NE;\n        }\n        return groupD8.NW;\n    },\n    /**\n     * Helps sprite to compensate texture packer rotation.\n     *\n     * @memberof PIXI.groupD8\n     * @param {PIXI.Matrix} matrix - sprite world matrix\n     * @param {PIXI.GD8Symmetry} rotation - The rotation factor to use.\n     * @param {number} tx - sprite anchoring\n     * @param {number} ty - sprite anchoring\n     */\n    matrixAppendRotationInv: function (matrix, rotation, tx, ty) {\n        if (tx === void 0) { tx = 0; }\n        if (ty === void 0) { ty = 0; }\n        // Packer used \"rotation\", we use \"inv(rotation)\"\n        var mat = rotationMatrices[groupD8.inv(rotation)];\n        mat.tx = tx;\n        mat.ty = ty;\n        matrix.append(mat);\n    },\n};\n\n/**\n * Transform that takes care about its versions\n *\n * @class\n * @memberof PIXI\n */\nvar Transform = /** @class */ (function () {\n    function Transform() {\n        /**\n         * The world transformation matrix.\n         *\n         * @member {PIXI.Matrix}\n         */\n        this.worldTransform = new Matrix();\n        /**\n         * The local transformation matrix.\n         *\n         * @member {PIXI.Matrix}\n         */\n        this.localTransform = new Matrix();\n        /**\n         * The coordinate of the object relative to the local coordinates of the parent.\n         *\n         * @member {PIXI.ObservablePoint}\n         */\n        this.position = new ObservablePoint(this.onChange, this, 0, 0);\n        /**\n         * The scale factor of the object.\n         *\n         * @member {PIXI.ObservablePoint}\n         */\n        this.scale = new ObservablePoint(this.onChange, this, 1, 1);\n        /**\n         * The pivot point of the displayObject that it rotates around.\n         *\n         * @member {PIXI.ObservablePoint}\n         */\n        this.pivot = new ObservablePoint(this.onChange, this, 0, 0);\n        /**\n         * The skew amount, on the x and y axis.\n         *\n         * @member {PIXI.ObservablePoint}\n         */\n        this.skew = new ObservablePoint(this.updateSkew, this, 0, 0);\n        /**\n         * The rotation amount.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._rotation = 0;\n        /**\n         * The X-coordinate value of the normalized local X axis,\n         * the first column of the local transformation matrix without a scale.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._cx = 1;\n        /**\n         * The Y-coordinate value of the normalized local X axis,\n         * the first column of the local transformation matrix without a scale.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._sx = 0;\n        /**\n         * The X-coordinate value of the normalized local Y axis,\n         * the second column of the local transformation matrix without a scale.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._cy = 0;\n        /**\n         * The Y-coordinate value of the normalized local Y axis,\n         * the second column of the local transformation matrix without a scale.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._sy = 1;\n        /**\n         * The locally unique ID of the local transform.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._localID = 0;\n        /**\n         * The locally unique ID of the local transform\n         * used to calculate the current local transformation matrix.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._currentLocalID = 0;\n        /**\n         * The locally unique ID of the world transform.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._worldID = 0;\n        /**\n         * The locally unique ID of the parent's world transform\n         * used to calculate the current world transformation matrix.\n         *\n         * @protected\n         * @member {number}\n         */\n        this._parentID = 0;\n    }\n    /**\n     * Called when a value changes.\n     *\n     * @protected\n     */\n    Transform.prototype.onChange = function () {\n        this._localID++;\n    };\n    /**\n     * Called when the skew or the rotation changes.\n     *\n     * @protected\n     */\n    Transform.prototype.updateSkew = function () {\n        this._cx = Math.cos(this._rotation + this.skew.y);\n        this._sx = Math.sin(this._rotation + this.skew.y);\n        this._cy = -Math.sin(this._rotation - this.skew.x); // cos, added PI/2\n        this._sy = Math.cos(this._rotation - this.skew.x); // sin, added PI/2\n        this._localID++;\n    };\n    /**\n     * Updates the local transformation matrix.\n     */\n    Transform.prototype.updateLocalTransform = function () {\n        var lt = this.localTransform;\n        if (this._localID !== this._currentLocalID) {\n            // get the matrix values of the displayobject based on its transform properties..\n            lt.a = this._cx * this.scale.x;\n            lt.b = this._sx * this.scale.x;\n            lt.c = this._cy * this.scale.y;\n            lt.d = this._sy * this.scale.y;\n            lt.tx = this.position.x - ((this.pivot.x * lt.a) + (this.pivot.y * lt.c));\n            lt.ty = this.position.y - ((this.pivot.x * lt.b) + (this.pivot.y * lt.d));\n            this._currentLocalID = this._localID;\n            // force an update..\n            this._parentID = -1;\n        }\n    };\n    /**\n     * Updates the local and the world transformation matrices.\n     *\n     * @param {PIXI.Transform} parentTransform - The parent transform\n     */\n    Transform.prototype.updateTransform = function (parentTransform) {\n        var lt = this.localTransform;\n        if (this._localID !== this._currentLocalID) {\n            // get the matrix values of the displayobject based on its transform properties..\n            lt.a = this._cx * this.scale.x;\n            lt.b = this._sx * this.scale.x;\n            lt.c = this._cy * this.scale.y;\n            lt.d = this._sy * this.scale.y;\n            lt.tx = this.position.x - ((this.pivot.x * lt.a) + (this.pivot.y * lt.c));\n            lt.ty = this.position.y - ((this.pivot.x * lt.b) + (this.pivot.y * lt.d));\n            this._currentLocalID = this._localID;\n            // force an update..\n            this._parentID = -1;\n        }\n        if (this._parentID !== parentTransform._worldID) {\n            // concat the parent matrix with the objects transform.\n            var pt = parentTransform.worldTransform;\n            var wt = this.worldTransform;\n            wt.a = (lt.a * pt.a) + (lt.b * pt.c);\n            wt.b = (lt.a * pt.b) + (lt.b * pt.d);\n            wt.c = (lt.c * pt.a) + (lt.d * pt.c);\n            wt.d = (lt.c * pt.b) + (lt.d * pt.d);\n            wt.tx = (lt.tx * pt.a) + (lt.ty * pt.c) + pt.tx;\n            wt.ty = (lt.tx * pt.b) + (lt.ty * pt.d) + pt.ty;\n            this._parentID = parentTransform._worldID;\n            // update the id of the transform..\n            this._worldID++;\n        }\n    };\n    /**\n     * Decomposes a matrix and sets the transforms properties based on it.\n     *\n     * @param {PIXI.Matrix} matrix - The matrix to decompose\n     */\n    Transform.prototype.setFromMatrix = function (matrix) {\n        matrix.decompose(this);\n        this._localID++;\n    };\n    Object.defineProperty(Transform.prototype, \"rotation\", {\n        /**\n         * The rotation of the object in radians.\n         *\n         * @member {number}\n         */\n        get: function () {\n            return this._rotation;\n        },\n        set: function (value) {\n            if (this._rotation !== value) {\n                this._rotation = value;\n                this.updateSkew();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * A default (identity) transform\n     *\n     * @static\n     * @constant\n     * @member {PIXI.Transform}\n     */\n    Transform.IDENTITY = new Transform();\n    return Transform;\n}());\n\n/**\n * Math classes and utilities mixed into PIXI namespace.\n *\n * @lends PIXI\n */\n\nexport { Circle, DEG_TO_RAD, Ellipse, Matrix, ObservablePoint, PI_2, Point, Polygon, RAD_TO_DEG, Rectangle, RoundedRectangle, SHAPES, Transform, groupD8 };\n//# sourceMappingURL=math.es.js.map\n","/* eslint-disable */\n \n/*!\n * @pixi-essentials/cull - v1.0.12\n * Compiled Wed, 17 Mar 2021 16:10:19 UTC\n *\n * @pixi-essentials/cull is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n * \n * Copyright 2019-2020, Shukant Pal <shukantpal@outlook.com>, All Rights Reserved\n */\nimport { Rectangle } from '@pixi/math';\n\nconst tempRect = new Rectangle();\n\n/**\n * The culling options for {@code Cull}.\n *\n * @ignore\n * @public\n */\n\n\n\n\n\n\n/**\n * Provides a simple, configurable mechanism for culling a subtree of your scene graph.\n *\n * If your scene graph is not static, culling needs to be done before rendering. You\n * can run it on the `prerender` event fired by the renderer.\n *\n * @public\n */\nclass Cull\n{\n    \n    \n    \n\n    /**\n     * @param options\n     * @param [options.recursive] - whether culling should be recursive\n     * @param [options.toggle='renderable'] - which property of display-object was be set to indicate\n     *      its culling state. It should be one of `renderable`, `visible`.\n     */\n    constructor(options = {})\n    {\n        this._recursive = typeof options.recursive === 'boolean' ? options.recursive : true;\n        this._toggle = options.toggle || 'visible';\n        this._targetList = new Set();\n    }\n\n    /**\n     * Adds a display-object to the culling list\n     *\n     * @param target - the display-object to be culled\n     * @return this\n     */\n    add(target)\n    {\n        this._targetList.add(target);\n\n        return this;\n    }\n\n    /**\n     * Adds all the display-objects to the culling list\n     *\n     * @param targets - the display-objects to be culled\n     * @return this\n     */\n    addAll(targets)\n    {\n        for (let i = 0, j = targets.length; i < j; i++)\n        {\n            this._targetList.add(targets[i]);\n        }\n\n        return this;\n    }\n\n    /**\n     * Removes the display-object from the culling list\n     *\n     * @param target - the display-object to be removed\n     * @return this\n     */\n    remove(target)\n    {\n        this._targetList.delete(target);\n\n        return this;\n    }\n\n    /**\n     * Removes all the passed display-objects from the culling list\n     *\n     * @param targets - the display-objects to be removed\n     * @return this\n     */\n    removeAll(targets)\n    {\n        for (let i = 0, j = targets.length; i < j; i++)\n        {\n            this._targetList.delete(targets[i]);\n        }\n\n        return this;\n    }\n\n    /**\n     * Clears the culling list\n     *\n     * @return this\n     */\n    clear()\n    {\n        this._targetList.clear();\n\n        return this;\n    }\n\n    /**\n     * @param rect - the rectangle outside of which display-objects should be culled\n     * @param skipUpdate - whether to skip unculling, transform update, bounds calculation. It is\n     *  highly recommended you enable this by calling _this.uncull()_ and _root.getBounds(false)_ manually\n     *  before your render loop.\n     * @return this\n     */\n    cull(rect, skipUpdate = false)\n    {\n        if (!skipUpdate)\n        {\n            this.uncull();\n        }\n\n        this._targetList.forEach((target) =>\n        {\n            if (!skipUpdate)\n            {\n                // Update transforms, bounds of display-objects in this target's subtree\n                target.getBounds(false, tempRect);\n            }\n\n            if (this._recursive)\n            {\n                this.cullRecursive(rect, target, skipUpdate);\n            }\n            else\n            {\n                // NOTE: If skipUpdate is false, then tempRect already contains the bounds of the target\n                if (skipUpdate)\n                {\n                    target._bounds.getRectangle(rect);\n                }\n\n                target[this._toggle] = tempRect.right > rect.left\n                    && tempRect.left < rect.right\n                    && tempRect.bottom > rect.top\n                    && tempRect.top < rect.bottom;\n            }\n        });\n\n        return this;\n    }\n\n    /**\n     * Sets all display-objects to the unculled state.\n     *\n     * This happens regardless of whether the culling toggle was set by {@code this.cull} or manually. This\n     * is why it is recommended to one of `visible` or `renderable` for normal use and the other for culling.\n     *\n     * @return this\n     */\n    uncull()\n    {\n        this._targetList.forEach((target) =>\n        {\n            if (this._recursive)\n            {\n                this.uncullRecursive(target);\n            }\n            else\n            {\n                target[this._toggle] = false;\n            }\n        });\n\n        return this;\n    }\n\n    /**\n     * Recursively culls the subtree of {@code displayObject}.\n     *\n     * @param rect - the visiblity rectangle\n     * @param displayObject - the root of the subtree to cull\n     * @param skipUpdate - whether to skip bounds calculation. However, transforms are expected to be updated by the caller.\n     */\n     cullRecursive(rect, displayObject, skipUpdate)\n    {\n        // NOTE: getBounds can skipUpdate because updateTransform is invoked before culling.\n        const bounds = skipUpdate\n            ? displayObject._bounds.getRectangle(tempRect)\n            : displayObject.getBounds(true, tempRect);\n\n        displayObject[this._toggle] = bounds.right > rect.left\n            && bounds.left < rect.right\n            && bounds.bottom > rect.top\n            && bounds.top < rect.bottom;\n\n        const fullyVisible = bounds.left >= rect.left\n            && bounds.top >= rect.top\n            && bounds.right <= rect.right\n            && bounds.bottom <= rect.bottom;\n\n        // Only cull children if this display-object is *not* fully-visible. It is expected that the bounds\n        // of children lie inside of its own. Hence, further culling is only required if the display-object\n        // intersects with the boundaries of \"rect\". Otherwise, if the object is fully outside/inside the\n        // screen, the children don't need to be evaluated as they are presumed to be unculled.\n        if (!fullyVisible\n                && displayObject[this._toggle]\n                && (displayObject ).children\n                && (displayObject ).children.length)\n        {\n            const children = (displayObject ).children;\n\n            for (let i = 0, j = children.length; i < j; i++)\n            {\n                this.cullRecursive(rect, children[i]);\n            }\n        }\n    }\n\n    /**\n     * Recursively unculls the subtree of {@code displayObject}.\n     *\n     * @param displayObject\n     */\n     uncullRecursive(displayObject)\n    {\n        displayObject[this._toggle] = true;\n\n        if ((displayObject ).children && (displayObject ).children.length)\n        {\n            const children = (displayObject ).children;\n\n            for (let i = 0, j = children.length; i < j; i++)\n            {\n                this.uncullRecursive(children[i]);\n            }\n        }\n    }\n}\n\nexport { Cull };\n//# sourceMappingURL=cull.es.js.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEmitter = require(\"events\").EventEmitter;\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import deepmerge from 'deepmerge';\nimport { BaseNodeAttributes, BaseEdgeAttributes } from '../attributes';\nimport { TextType } from './text';\n\nexport interface GraphStyle {\n  node: {\n    size: number;\n    color: string;\n    border: {\n      width: number;\n      color: string;\n    };\n    icon: {\n      content: string;\n      type: TextType;\n      fontFamily: string;\n      fontSize: number;\n      color: string;\n    };\n    label: {\n      content: string;\n      type: TextType;\n      fontFamily: string;\n      fontSize: number;\n      color: string;\n      backgroundColor: string;\n      padding: number;\n    };\n  };\n  edge: {\n    width: number;\n    color: string;\n  };\n}\n\nexport type NodeStyle = GraphStyle['node'];\nexport type EdgeStyle = GraphStyle['edge'];\n\nexport type StyleDefinition<Style, Attributes> =\n  ((attributes: Attributes) => Style) |\n  {[Key in keyof Style]?: StyleDefinition<Style[Key], Attributes>} |\n  Style;\n\nexport type NodeStyleDefinition<NodeAttributes extends BaseNodeAttributes = BaseNodeAttributes> = StyleDefinition<NodeStyle, NodeAttributes>;\nexport type EdgeStyleDefinition<EdgeAttributes extends BaseEdgeAttributes = BaseEdgeAttributes> = StyleDefinition<EdgeStyle, EdgeAttributes>;\n\nexport interface GraphStyleDefinition<NodeAttributes extends BaseNodeAttributes = BaseNodeAttributes, EdgeAttributes extends BaseEdgeAttributes = BaseEdgeAttributes> {\n  node?: NodeStyleDefinition<NodeAttributes>;\n  edge?: EdgeStyleDefinition<EdgeAttributes>;\n}\n\nexport function resolveStyleDefinition<Style, Attributes>(styleDefinition: StyleDefinition<Style, Attributes>, attributes: Attributes): Style {\n  let style: Style;\n  if (styleDefinition instanceof Function) {\n    style = styleDefinition(attributes);\n  } else if (typeof styleDefinition === 'object' && styleDefinition !== null) {\n    style = Object.fromEntries(\n      Object.entries(styleDefinition).map(([key, styleDefinition]) => {\n        return [key, resolveStyleDefinition(styleDefinition, attributes)];\n      })\n    ) as Style;\n  } else {\n    style = styleDefinition;\n  }\n  return style;\n}\n\nexport function resolveStyleDefinitions<Style, Attributes>(styleDefinitions: (StyleDefinition<Style, Attributes> | undefined)[], attributes: Attributes): Style {\n  const styles = styleDefinitions.filter(x => !!x).map(styleDefinition => resolveStyleDefinition(styleDefinition!, attributes));\n  const style = deepmerge.all<Style>(styles);\n  return style;\n}","import * as PIXI from 'pixi.js';\n\nexport class TextureCache {\n  app: PIXI.Application;\n\n  private textures = new Map<string, PIXI.Texture>();\n\n  constructor(app: PIXI.Application) {\n    this.app = app;\n  }\n\n  get(key: string, defaultCallback: () => PIXI.Container): PIXI.Texture {\n    let texture = this.textures.get(key);\n    if (!texture) {\n      const container = defaultCallback();\n      const region = container.getLocalBounds(undefined, true);\n      const roundedRegion = new PIXI.Rectangle(Math.floor(region.x), Math.floor(region.y), Math.ceil(region.width), Math.ceil(region.height));\n      texture = this.app.renderer.generateTexture(container, PIXI.SCALE_MODES.LINEAR, this.app.renderer.resolution, roundedRegion);\n      this.textures.set(key, texture);\n    }\n    return texture;\n  }\n\n  delete(key: string) {\n    const texture = this.textures.get(key);\n    if (!texture) {\n      return;\n    }\n\n    texture.destroy();\n    this.textures.delete(key);\n  }\n\n  clear() {\n    Array.from(this.textures.keys()).forEach(key => {\n      this.delete(key);\n    });\n  }\n\n  destroy() {\n    this.clear();\n  }\n}","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/**\r\n * @module color-parse\r\n */\r\nimport names from 'color-name'\r\n\r\nexport default parse\r\n\r\n/**\r\n * Base hues\r\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\r\n */\r\n//FIXME: use external hue detector\r\nvar baseHues = {\r\n\tred: 0,\r\n\torange: 60,\r\n\tyellow: 120,\r\n\tgreen: 180,\r\n\tblue: 240,\r\n\tpurple: 300\r\n}\r\n\r\n/**\r\n * Parse color from the string passed\r\n *\r\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\r\n */\r\nfunction parse (cstr) {\r\n\tvar m, parts = [], alpha = 1, space\r\n\r\n\tif (typeof cstr === 'string') {\r\n\t\t//keyword\r\n\t\tif (names[cstr]) {\r\n\t\t\tparts = names[cstr].slice()\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//reserved words\r\n\t\telse if (cstr === 'transparent') {\r\n\t\t\talpha = 0\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [0,0,0]\r\n\t\t}\r\n\r\n\t\t//hex\r\n\t\telse if (/^#[A-Fa-f0-9]+$/.test(cstr)) {\r\n\t\t\tvar base = cstr.slice(1)\r\n\t\t\tvar size = base.length\r\n\t\t\tvar isShort = size <= 4\r\n\t\t\talpha = 1\r\n\r\n\t\t\tif (isShort) {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[0], 16),\r\n\t\t\t\t\tparseInt(base[1] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[2], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 4) {\r\n\t\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[3], 16),\r\n\t\t\t\t\tparseInt(base[4] + base[5], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 8) {\r\n\t\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!parts[0]) parts[0] = 0\r\n\t\t\tif (!parts[1]) parts[1] = 0\r\n\t\t\tif (!parts[2]) parts[2] = 0\r\n\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//color space\r\n\t\telse if (m = /^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\r\n\t\t\tvar name = m[1]\r\n\t\t\tvar isRGB = name === 'rgb'\r\n\t\t\tvar base = name.replace(/a$/, '')\r\n\t\t\tspace = base\r\n\t\t\tvar size = base === 'cmyk' ? 4 : base === 'gray' ? 1 : 3\r\n\t\t\tparts = m[2].trim()\r\n\t\t\t\t.split(/\\s*[,\\/]\\s*|\\s+/)\r\n\t\t\t\t.map(function (x, i) {\r\n\t\t\t\t\t//<percentage>\r\n\t\t\t\t\tif (/%$/.test(x)) {\r\n\t\t\t\t\t\t//alpha\r\n\t\t\t\t\t\tif (i === size)\treturn parseFloat(x) / 100\r\n\t\t\t\t\t\t//rgb\r\n\t\t\t\t\t\tif (base === 'rgb') return parseFloat(x) * 255 / 100\r\n\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//hue\r\n\t\t\t\t\telse if (base[i] === 'h') {\r\n\t\t\t\t\t\t//<deg>\r\n\t\t\t\t\t\tif (/deg$/.test(x)) {\r\n\t\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//<base-hue>\r\n\t\t\t\t\t\telse if (baseHues[x] !== undefined) {\r\n\t\t\t\t\t\t\treturn baseHues[x]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t})\r\n\r\n\t\t\tif (name === base) parts.push(1)\r\n\t\t\talpha = (isRGB) ? 1 : (parts[size] === undefined) ? 1 : parts[size]\r\n\t\t\tparts = parts.slice(0, size)\r\n\t\t}\r\n\r\n\t\t//named channels case\r\n\t\telse if (cstr.length > 10 && /[0-9](?:\\s|\\/)/.test(cstr)) {\r\n\t\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\r\n\t\t\t\treturn parseFloat(value)\r\n\t\t\t})\r\n\r\n\t\t\tspace = cstr.match(/([a-z])/ig).join('').toLowerCase()\r\n\t\t}\r\n\t}\r\n\r\n\t//numeric case\r\n\telse if (!isNaN(cstr)) {\r\n\t\tspace = 'rgb'\r\n\t\tparts = [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff]\r\n\t}\r\n\r\n\t//array-like\r\n\telse if (Array.isArray(cstr) || cstr.length) {\r\n\t\tparts = [cstr[0], cstr[1], cstr[2]]\r\n\t\tspace = 'rgb'\r\n\t\talpha = cstr.length === 4 ? cstr[3] : 1\r\n\t}\r\n\r\n\t//object case - detects css cases of rgb and hsl\r\n\telse if (cstr instanceof Object) {\r\n\t\tif (cstr.r != null || cstr.red != null || cstr.R != null) {\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [\r\n\t\t\t\tcstr.r || cstr.red || cstr.R || 0,\r\n\t\t\t\tcstr.g || cstr.green || cstr.G || 0,\r\n\t\t\t\tcstr.b || cstr.blue || cstr.B || 0\r\n\t\t\t]\r\n\t\t}\r\n\t\telse {\r\n\t\t\tspace = 'hsl'\r\n\t\t\tparts = [\r\n\t\t\t\tcstr.h || cstr.hue || cstr.H || 0,\r\n\t\t\t\tcstr.s || cstr.saturation || cstr.S || 0,\r\n\t\t\t\tcstr.l || cstr.lightness || cstr.L || cstr.b || cstr.brightness\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t\talpha = cstr.a || cstr.alpha || cstr.opacity || 1\r\n\r\n\t\tif (cstr.opacity != null) alpha /= 100\r\n\t}\r\n\r\n\treturn {\r\n\t\tspace: space,\r\n\t\tvalues: parts,\r\n\t\talpha: alpha\r\n\t}\r\n}\r\n","/**\n * @module color-space/hsl\n */\n'use strict'\n\nvar rgb = require('./rgb');\n\nmodule.exports = {\n\tname: 'hsl',\n\tmin: [0,0,0],\n\tmax: [360,100,100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function(hsl) {\n\t\tvar h = hsl[0] / 360,\n\t\t\t\ts = hsl[1] / 100,\n\t\t\t\tl = hsl[2] / 100,\n\t\t\t\tt1, t2, t3, rgb, val;\n\n\t\tif (s === 0) {\n\t\t\tval = l * 255;\n\t\t\treturn [val, val, val];\n\t\t}\n\n\t\tif (l < 0.5) {\n\t\t\tt2 = l * (1 + s);\n\t\t}\n\t\telse {\n\t\t\tt2 = l + s - l * s;\n\t\t}\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tif (t3 < 0) {\n\t\t\t\tt3++;\n\t\t\t}\n\t\t\telse if (t3 > 1) {\n\t\t\t\tt3--;\n\t\t\t}\n\n\t\t\tif (6 * t3 < 1) {\n\t\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t\t}\n\t\t\telse if (2 * t3 < 1) {\n\t\t\t\tval = t2;\n\t\t\t}\n\t\t\telse if (3 * t3 < 2) {\n\t\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tval = t1;\n\t\t\t}\n\n\t\t\trgb[i] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\n\n//extend rgb\nrgb.hsl = function(rgb) {\n\tvar r = rgb[0]/255,\n\t\t\tg = rgb[1]/255,\n\t\t\tb = rgb[2]/255,\n\t\t\tmin = Math.min(r, g, b),\n\t\t\tmax = Math.max(r, g, b),\n\t\t\tdelta = max - min,\n\t\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g)/ delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","import * as PIXI from 'pixi.js';\nimport rgba from 'color-rgba';\n\nexport function colorToPixi(color: string) {\n  const rgbaColor = rgba(color);\n  if (!rgbaColor) {\n    throw new Error(`Invalid color ${color}`);\n  }\n  const pixiColor = PIXI.utils.rgb2hex([rgbaColor[0] / 255, rgbaColor[1] / 255, rgbaColor[2] / 255]);\n  const alpha = rgbaColor[3];\n  return [pixiColor, alpha] as [number, number];\n}","/** @module  color-rgba */\r\nimport parse from 'color-parse'\r\nimport hsl from 'color-space/hsl.js'\r\n\r\nexport default function rgba (color) {\r\n\t// template literals\r\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\r\n\r\n\tvar values, i, l\r\n\r\n\t//attempt to parse non-array arguments\r\n\tvar parsed = parse(color)\r\n\r\n\tif (!parsed.space) return []\r\n\r\n\tvalues = Array(3)\r\n\tvalues[0] = Math.min(Math.max(parsed.values[0], 0), 255)\r\n\tvalues[1] = Math.min(Math.max(parsed.values[1], 0), 255)\r\n\tvalues[2] = Math.min(Math.max(parsed.values[2], 0), 255)\r\n\r\n\tif (parsed.space[0] === 'h') {\r\n\t\tvalues = hsl.rgb(values)\r\n\t}\r\n\r\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\r\n\r\n\treturn values\r\n}\r\n","import * as PIXI from 'pixi.js';\nimport { colorToPixi } from '../utils/color';\nimport { NodeStyle } from '../utils/style';\nimport { textToPixi } from '../utils/text';\nimport { TextureCache } from '../texture-cache';\n\nconst DELIMETER = '::';\nconst WHITE = 0xffffff;\n\nconst NODE_CIRCLE = 'NODE_CIRCLE';\nconst NODE_CIRCLE_BORDER = 'NODE_CIRCLE_BORDER';\nconst NODE_ICON = 'NODE_ICON';\n\nexport function createNode(nodeGfx: PIXI.Container) {\n  // nodeGfx\n  nodeGfx.hitArea = new PIXI.Circle(0, 0);\n\n  // nodeGfx -> nodeCircle\n  const nodeCircle = new PIXI.Sprite();\n  nodeCircle.name = NODE_CIRCLE;\n  nodeCircle.anchor.set(0.5);\n  nodeGfx.addChild(nodeCircle);\n\n  // nodeGfx -> nodeCircleBorder\n  const nodeCircleBorder = new PIXI.Sprite();\n  nodeCircleBorder.name = NODE_CIRCLE_BORDER;\n  nodeCircleBorder.anchor.set(0.5);\n  nodeGfx.addChild(nodeCircleBorder);\n\n  // nodeGfx -> nodeIcon\n  const nodeIcon = new PIXI.Sprite();\n  nodeIcon.name = NODE_ICON;\n  nodeIcon.anchor.set(0.5);\n  nodeGfx.addChild(nodeIcon);\n}\n\nexport function updateNodeStyle(nodeGfx: PIXI.Container, nodeStyle: NodeStyle, textureCache: TextureCache) {\n  const nodeOuterSize = nodeStyle.size + nodeStyle.border.width;\n\n  const nodeCircleTextureKey = [NODE_CIRCLE, nodeStyle.size].join(DELIMETER);\n  const nodeCircleTexture = textureCache.get(nodeCircleTextureKey, () => {\n    const graphics = new PIXI.Graphics();\n    graphics.beginFill(WHITE);\n    graphics.drawCircle(nodeStyle.size, nodeStyle.size, nodeStyle.size);\n    return graphics;\n  });\n\n  const nodeCircleBorderTextureKey = [NODE_CIRCLE_BORDER, nodeStyle.size, nodeStyle.border.width].join(DELIMETER);\n  const nodeCircleBorderTexture = textureCache.get(nodeCircleBorderTextureKey, () => {\n    const graphics = new PIXI.Graphics();\n    graphics.lineStyle(nodeStyle.border.width, WHITE);\n    graphics.drawCircle(nodeOuterSize, nodeOuterSize, nodeStyle.size);\n    return graphics;\n  });\n\n  const nodeIconTextureKey = [NODE_ICON, nodeStyle.icon.fontFamily, nodeStyle.icon.fontSize, nodeStyle.icon.content].join(DELIMETER);\n  const nodeIconTexture = textureCache.get(nodeIconTextureKey, () => {\n    const text = textToPixi(nodeStyle.icon.type, nodeStyle.icon.content, {\n      fontFamily: nodeStyle.icon.fontFamily,\n      fontSize: nodeStyle.icon.fontSize\n    });\n    return text;\n  });\n\n  // nodeGfx\n  (nodeGfx.hitArea as PIXI.Circle).radius = nodeOuterSize;\n\n  // nodeGfx -> nodeCircle\n  const nodeCircle = nodeGfx.getChildByName(NODE_CIRCLE) as PIXI.Sprite;\n  nodeCircle.texture = nodeCircleTexture;\n  [nodeCircle.tint, nodeCircle.alpha] = colorToPixi(nodeStyle.color);\n\n  // nodeGfx -> nodeCircleBorder\n  const nodeCircleBorder = nodeGfx.getChildByName(NODE_CIRCLE_BORDER) as PIXI.Sprite;\n  nodeCircleBorder.texture = nodeCircleBorderTexture;\n  [nodeCircleBorder.tint, nodeCircleBorder.alpha] = colorToPixi(nodeStyle.border.color);\n\n  // nodeGfx -> nodeIcon\n  const nodeIcon = nodeGfx.getChildByName(NODE_ICON) as PIXI.Sprite;\n  nodeIcon.texture = nodeIconTexture;\n  [nodeIcon.tint, nodeIcon.alpha] = colorToPixi(nodeStyle.icon.color);\n  nodeGfx.addChild(nodeIcon);\n}\n\nexport function updateNodeVisibility(nodeGfx: PIXI.Container, zoomStep: number) {\n  // nodeGfx -> nodeCircleBorder\n  const nodeCircleBorder = nodeGfx.getChildByName(NODE_CIRCLE_BORDER) as PIXI.Sprite;\n  nodeCircleBorder.visible = nodeCircleBorder.visible && zoomStep >= 1;\n\n  // nodeGfx -> nodeIcon\n  const nodeIcon = nodeGfx.getChildByName(NODE_ICON) as PIXI.Sprite;\n  nodeIcon.visible = nodeIcon.visible && zoomStep >= 2;\n}","import * as PIXI from 'pixi.js';\nimport { colorToPixi } from '../utils/color';\nimport { NodeStyle } from '../utils/style';\nimport { textToPixi } from '../utils/text';\nimport { TextureCache } from '../texture-cache';\n\nconst DELIMETER = '::';\n\nconst NODE_LABEL_BACKGROUND = 'NODE_LABEL_BACKGROUND';\nconst NODE_LABEL_TEXT = 'NODE_LABEL_TEXT';\n\nexport function createNodeLabel(nodeLabelGfx: PIXI.Container) {\n  // nodeLabelGfx -> nodeLabelBackground\n  const nodeLabelBackground = new PIXI.Sprite(PIXI.Texture.WHITE);\n  nodeLabelBackground.name = NODE_LABEL_BACKGROUND;\n  nodeLabelBackground.anchor.set(0.5);\n  nodeLabelGfx.addChild(nodeLabelBackground);\n\n  // nodeLabelGfx -> nodeLabelText\n  const nodeLabelText = new PIXI.Sprite();\n  nodeLabelText.name = NODE_LABEL_TEXT;\n  nodeLabelText.anchor.set(0.5);\n  nodeLabelGfx.addChild(nodeLabelText);\n}\n\nexport function updateNodeLabelStyle(nodeLabelGfx: PIXI.Container, nodeStyle: NodeStyle, textureCache: TextureCache) {\n  const nodeOuterSize = nodeStyle.size + nodeStyle.border.width;\n\n  const nodeLabelTextTextureKey = [NODE_LABEL_TEXT, nodeStyle.label.fontFamily, nodeStyle.label.fontSize, nodeStyle.label.content].join(DELIMETER);\n  const nodeLabelTextTexture = textureCache.get(nodeLabelTextTextureKey, () => {\n    const text = textToPixi(nodeStyle.label.type, nodeStyle.label.content, {\n      fontFamily: nodeStyle.label.fontFamily,\n      fontSize: nodeStyle.label.fontSize\n    });\n    return text;\n  });\n\n  // nodeLabelGfx -> nodeLabelBackground\n  const nodeLabelBackground = nodeLabelGfx.getChildByName(NODE_LABEL_BACKGROUND) as PIXI.Sprite;\n  nodeLabelBackground.y = nodeOuterSize + (nodeLabelTextTexture.height + nodeStyle.label.padding * 2) / 2;\n  nodeLabelBackground.width = nodeLabelTextTexture.width + nodeStyle.label.padding * 2;\n  nodeLabelBackground.height = nodeLabelTextTexture.height + nodeStyle.label.padding * 2;\n  [nodeLabelBackground.tint, nodeLabelBackground.alpha] = colorToPixi(nodeStyle.label.backgroundColor);\n\n  // nodeLabelGfx -> nodeLabelText\n  const nodeLabelText = nodeLabelGfx.getChildByName(NODE_LABEL_TEXT) as PIXI.Sprite;\n  nodeLabelText.texture = nodeLabelTextTexture;\n  nodeLabelText.y = nodeOuterSize + (nodeLabelTextTexture.height + nodeStyle.label.padding * 2) / 2;\n  [nodeLabelText.tint, nodeLabelText.alpha] = colorToPixi(nodeStyle.label.color);\n}\n\nexport function updateNodeLabelVisibility(nodeLabelGfx: PIXI.Container, zoomStep: number) {\n  // nodeLabelGfx -> nodeLabelBackground\n  const nodeLabelBackground = nodeLabelGfx.getChildByName(NODE_LABEL_BACKGROUND) as PIXI.Sprite;\n  nodeLabelBackground.visible = nodeLabelBackground.visible && zoomStep >= 3;\n  \n  // nodeLabelGfx -> nodeLabelText\n  const nodeLabelText = nodeLabelGfx.getChildByName(NODE_LABEL_TEXT) as PIXI.BitmapText;\n  nodeLabelText.visible = nodeLabelText.visible && zoomStep >= 3;\n}","import * as PIXI from 'pixi.js';\nimport { TypedEmitter } from 'tiny-typed-emitter';\nimport { createNode, updateNodeStyle, updateNodeVisibility } from './renderers/node';\nimport { createNodeLabel, updateNodeLabelStyle, updateNodeLabelVisibility } from './renderers/node-label';\nimport { NodeStyle } from './utils/style';\nimport { TextureCache } from './texture-cache';\n\ninterface PixiNodeEvents {\n  mousemove: (event: MouseEvent) => void;\n  mouseover: (event: MouseEvent) => void;\n  mouseout: (event: MouseEvent) => void;\n  mousedown: (event: MouseEvent) => void;\n  mouseup: (event: MouseEvent) => void;\n}\n\nexport class PixiNode extends TypedEmitter<PixiNodeEvents> {\n  nodeGfx: PIXI.Container;\n  nodeLabelGfx: PIXI.Container;\n  nodePlaceholderGfx: PIXI.Container;\n  nodeLabelPlaceholderGfx: PIXI.Container;\n\n  hovered: boolean = false;\n\n  constructor() {\n    super();\n\n    this.nodeGfx = this.createNode();\n    this.nodeLabelGfx = this.createNodeLabel();\n    this.nodePlaceholderGfx = new PIXI.Container();\n    this.nodeLabelPlaceholderGfx = new PIXI.Container();\n  }\n\n  private createNode() {\n    const nodeGfx = new PIXI.Container();\n    nodeGfx.interactive = true;\n    nodeGfx.buttonMode = true;\n    nodeGfx.on('mousemove', (event: PIXI.InteractionEvent) => this.emit('mousemove', event.data.originalEvent as MouseEvent));\n    nodeGfx.on('mouseover', (event: PIXI.InteractionEvent) => this.emit('mouseover', event.data.originalEvent as MouseEvent));\n    nodeGfx.on('mouseout', (event: PIXI.InteractionEvent) => this.emit('mouseout', event.data.originalEvent as MouseEvent));\n    nodeGfx.on('mousedown', (event: PIXI.InteractionEvent) => this.emit('mousedown', event.data.originalEvent as MouseEvent));\n    nodeGfx.on('mouseup', (event: PIXI.InteractionEvent) => this.emit('mouseup', event.data.originalEvent as MouseEvent));\n    createNode(nodeGfx);\n    return nodeGfx;\n  }\n\n  private createNodeLabel() {\n    const nodeLabelGfx = new PIXI.Container();\n    nodeLabelGfx.interactive = true;\n    nodeLabelGfx.buttonMode = true;\n    nodeLabelGfx.on('mousemove', (event: PIXI.InteractionEvent) => this.emit('mousemove', event.data.originalEvent as MouseEvent));\n    nodeLabelGfx.on('mouseover', (event: PIXI.InteractionEvent) => this.emit('mouseover', event.data.originalEvent as MouseEvent));\n    nodeLabelGfx.on('mouseout', (event: PIXI.InteractionEvent) => this.emit('mouseout', event.data.originalEvent as MouseEvent));\n    nodeLabelGfx.on('mousedown', (event: PIXI.InteractionEvent) => this.emit('mousedown', event.data.originalEvent as MouseEvent));\n    nodeLabelGfx.on('mouseup', (event: PIXI.InteractionEvent) => this.emit('mouseup', event.data.originalEvent as MouseEvent));\n    createNodeLabel(nodeLabelGfx);\n    return nodeLabelGfx;\n  }\n\n  updatePosition(position: PIXI.IPointData) {\n    this.nodeGfx.position.copyFrom(position);\n    this.nodeLabelGfx.position.copyFrom(position);\n  }\n\n  updateStyle(nodeStyle: NodeStyle, textureCache: TextureCache) {\n    updateNodeStyle(this.nodeGfx, nodeStyle, textureCache);\n    updateNodeLabelStyle(this.nodeLabelGfx, nodeStyle, textureCache);\n  }\n\n  updateVisibility(zoomStep: number) {\n    updateNodeVisibility(this.nodeGfx, zoomStep);\n    updateNodeLabelVisibility(this.nodeLabelGfx, zoomStep);\n  }\n}","import * as PIXI from 'pixi.js';\nimport { colorToPixi } from '../utils/color';\nimport { EdgeStyle } from '../utils/style';\nimport { TextureCache } from '../texture-cache';\n\nconst EDGE_LINE = 'EDGE_LINE';\n\nexport function createEdge(edgeGfx: PIXI.Container) {\n  // edgeGfx -> edgeLine\n  const edgeLine = new PIXI.Sprite(PIXI.Texture.WHITE);\n  edgeLine.name = EDGE_LINE;\n  edgeLine.anchor.set(0.5);\n  edgeGfx.addChild(edgeLine);\n}\n\nexport function updateEdgeStyle(edgeGfx: PIXI.Container, edgeStyle: EdgeStyle, _textureCache: TextureCache) {\n  // edgeGfx -> edgeLine\n  const edgeLine = edgeGfx.getChildByName(EDGE_LINE) as PIXI.Sprite;\n  edgeLine.width = edgeStyle.width;\n  [edgeLine.tint, edgeLine.alpha] = colorToPixi(edgeStyle.color);\n}\n\nexport function updateEdgeVisibility(edgeGfx: PIXI.Container, zoomStep: number) {\n  // edgeGfx -> edgeLine\n  const edgeLine = edgeGfx.getChildByName(EDGE_LINE) as PIXI.Sprite;\n  edgeLine.visible = edgeLine.visible && zoomStep >= 1;\n}","import * as PIXI from 'pixi.js';\nimport { TypedEmitter } from 'tiny-typed-emitter';\nimport { createEdge, updateEdgeStyle, updateEdgeVisibility } from './renderers/edge';\nimport { EdgeStyle } from './utils/style';\nimport { TextureCache } from './texture-cache';\n\ninterface PixiEdgeEvents {\n  mousemove: (event: MouseEvent) => void;\n  mouseover: (event: MouseEvent) => void;\n  mouseout: (event: MouseEvent) => void;\n  mousedown: (event: MouseEvent) => void;\n  mouseup: (event: MouseEvent) => void;\n}\n\nexport class PixiEdge extends TypedEmitter<PixiEdgeEvents> {\n  edgeGfx: PIXI.Container;\n  edgePlaceholderGfx: PIXI.Container;\n\n  hovered: boolean = false;\n\n  constructor() {\n    super();\n\n    this.edgeGfx = this.createEdge();\n    this.edgePlaceholderGfx = new PIXI.Container();\n  }\n\n  createEdge() {\n    const edgeGfx = new PIXI.Container();\n    edgeGfx.interactive = true;\n    edgeGfx.buttonMode = true;\n    edgeGfx.on('mousemove', (event: PIXI.InteractionEvent) => this.emit('mousemove', event.data.originalEvent as MouseEvent));\n    edgeGfx.on('mouseover', (event: PIXI.InteractionEvent) => this.emit('mouseover', event.data.originalEvent as MouseEvent));\n    edgeGfx.on('mouseout', (event: PIXI.InteractionEvent) => this.emit('mouseout', event.data.originalEvent as MouseEvent));\n    edgeGfx.on('mousedown', (event: PIXI.InteractionEvent) => this.emit('mousedown', event.data.originalEvent as MouseEvent));\n    edgeGfx.on('mouseup', (event: PIXI.InteractionEvent) => this.emit('mouseup', event.data.originalEvent as MouseEvent));\n    createEdge(edgeGfx);\n    return edgeGfx;\n  }\n\n  updatePosition(sourceNodePosition: PIXI.IPointData, targetNodePosition: PIXI.IPointData) {\n    const position = { x: (sourceNodePosition.x + targetNodePosition.x) / 2, y: (sourceNodePosition.y + targetNodePosition.y) / 2 };\n    const rotation = -Math.atan2(targetNodePosition.x - sourceNodePosition.x, targetNodePosition.y - sourceNodePosition.y);\n    const length = Math.hypot(targetNodePosition.x - sourceNodePosition.x, targetNodePosition.y - sourceNodePosition.y);\n    this.edgeGfx.position.copyFrom(position);\n    this.edgeGfx.rotation = rotation;\n    this.edgeGfx.height = length;\n  }\n\n  updateStyle(edgeStyle: EdgeStyle, textureCache: TextureCache) {\n    updateEdgeStyle(this.edgeGfx, edgeStyle, textureCache);\n  }\n\n  updateVisibility(zoomStep: number) {\n    updateEdgeVisibility(this.edgeGfx, zoomStep);\n  }\n}","import * as PIXI from 'pixi.js';\nimport { Viewport } from 'pixi-viewport';\nimport { Cull } from '@pixi-essentials/cull';\nimport * as Graphology from 'graphology-types';\nimport * as ResourceLoader from 'resource-loader';\nimport { TypedEmitter } from 'tiny-typed-emitter';\nimport { GraphStyleDefinition, resolveStyleDefinitions } from './utils/style';\nimport { TextType } from './utils/text';\nimport { BaseNodeAttributes, BaseEdgeAttributes } from './attributes';\nimport { TextureCache } from './texture-cache';\nimport { PixiNode } from './node';\nimport { PixiEdge } from './edge';\n\nconst DEFAULT_STYLE: GraphStyleDefinition = {\n  node: {\n    size: 15,\n    color: '#000000',\n    border: {\n      width: 2,\n      color: '#ffffff',\n    },\n    icon: {\n      type: TextType.TEXT,\n      fontFamily: 'Arial',\n      fontSize: 20,\n      color: '#ffffff',\n      content: '',\n    },\n    label: {\n      type: TextType.TEXT,\n      fontFamily: 'Arial',\n      fontSize: 12,\n      content: '',\n      color: '#333333',\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      padding: 4,\n    },\n  },\n  edge: {\n    width: 1,\n    color: '#cccccc',\n  },\n};\n\nconst WORLD_PADDING = 100;\n\nexport interface GraphOptions<NodeAttributes extends BaseNodeAttributes = BaseNodeAttributes, EdgeAttributes extends BaseEdgeAttributes = BaseEdgeAttributes> {\n  container: HTMLElement;\n  graph: Graphology.AbstractGraph<NodeAttributes, EdgeAttributes>;\n  style: GraphStyleDefinition<NodeAttributes, EdgeAttributes>;\n  hoverStyle: GraphStyleDefinition<NodeAttributes, EdgeAttributes>;\n  resources?: ResourceLoader.IAddOptions[];\n  nodeDragging?: boolean;\n}\n\ninterface PixiGraphEvents {\n  nodeClick: (event: MouseEvent, nodeKey: string) => void;\n  nodeMousemove: (event: MouseEvent, nodeKey: string) => void;\n  nodeMouseover: (event: MouseEvent, nodeKey: string) => void;\n  nodeMouseout: (event: MouseEvent, nodeKey: string) => void;\n  nodeMousedown: (event: MouseEvent, nodeKey: string) => void;\n  nodeMouseup: (event: MouseEvent, nodeKey: string) => void;\n  edgeClick: (event: MouseEvent, edgeKey: string) => void;\n  edgeMousemove: (event: MouseEvent, edgeKey: string) => void;\n  edgeMouseover: (event: MouseEvent, edgeKey: string) => void;\n  edgeMouseout: (event: MouseEvent, edgeKey: string) => void;\n  edgeMousedown: (event: MouseEvent, edgeKey: string) => void;\n  edgeMouseup: (event: MouseEvent, edgeKey: string) => void;\n}\n\nexport class PixiGraph<NodeAttributes extends BaseNodeAttributes = BaseNodeAttributes, EdgeAttributes extends BaseEdgeAttributes = BaseEdgeAttributes> extends TypedEmitter<PixiGraphEvents> {\n  container: HTMLElement;\n  graph: Graphology.AbstractGraph<NodeAttributes, EdgeAttributes>;\n  style: GraphStyleDefinition<NodeAttributes, EdgeAttributes>;\n  hoverStyle: GraphStyleDefinition<NodeAttributes, EdgeAttributes>;\n  resources?: ResourceLoader.IAddOptions[];\n  nodeDragging: boolean;\n\n  private app: PIXI.Application;\n  private textureCache: TextureCache;\n  private viewport: Viewport;\n  private resizeObserver: ResizeObserver;\n  private edgeLayer: PIXI.Container;\n  private frontEdgeLayer: PIXI.Container;\n  private nodeLayer: PIXI.Container;\n  private nodeLabelLayer: PIXI.Container;\n  private frontNodeLayer: PIXI.Container;\n  private frontNodeLabelLayer: PIXI.Container;\n  private nodeKeyToNodeObject = new Map<string, PixiNode>();\n  private edgeKeyToEdgeObject = new Map<string, PixiEdge>();\n\n  private mousedownNodeKey: string | null = null;\n  private mousedownEdgeKey: string | null = null;\n\n  private onGraphNodeAddedBound = this.onGraphNodeAdded.bind(this);\n  private onGraphEdgeAddedBound = this.onGraphEdgeAdded.bind(this);\n  private onGraphNodeDroppedBound = this.onGraphNodeDropped.bind(this);\n  private onGraphEdgeDroppedBound = this.onGraphEdgeDropped.bind(this);\n  private onGraphClearedBound = this.onGraphCleared.bind(this);\n  private onGraphEdgesClearedBound = this.onGraphEdgesCleared.bind(this);\n  private onGraphNodeAttributesUpdatedBound = this.onGraphNodeAttributesUpdated.bind(this);\n  private onGraphEdgeAttributesUpdatedBound = this.onGraphEdgeAttributesUpdated.bind(this);\n  private onGraphEachNodeAttributesUpdatedBound = this.onGraphEachNodeAttributesUpdated.bind(this);\n  private onGraphEachEdgeAttributesUpdatedBound = this.onGraphEachEdgeAttributesUpdated.bind(this);\n  private onDocumentMouseMoveBound = this.onDocumentMouseMove.bind(this);\n  private onDocumentMouseUpBound = this.onDocumentMouseUp.bind(this);\n\n  constructor(options: GraphOptions<NodeAttributes, EdgeAttributes>) {\n    super();\n\n    this.container = options.container;\n    this.graph = options.graph;\n    this.style = options.style;\n    this.hoverStyle = options.hoverStyle;\n    this.resources = options.resources;\n    this.nodeDragging = typeof options.nodeDragging === 'boolean' ? options.nodeDragging : true;\n    \n    PIXI.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = false\n\n    if (!(this.container instanceof HTMLElement)) {\n      throw new Error('container should be a HTMLElement');\n    }\n\n    // create PIXI application\n    this.app = new PIXI.Application({\n      resizeTo: this.container,\n      resolution: window.devicePixelRatio,\n      transparent: true,\n      antialias: true,\n      autoDensity: true,\n    });\n    this.container.appendChild(this.app.view);\n\n    this.app.renderer.plugins.interaction.moveWhenInside = true;\n    this.app.view.addEventListener('wheel', event => { event.preventDefault() });\n\n    this.textureCache = new TextureCache(this.app);\n\n    // create PIXI viewport\n    this.viewport = new Viewport({\n      screenWidth: this.container.clientWidth,\n      screenHeight: this.container.clientHeight,\n      interaction: this.app.renderer.plugins.interaction\n    })\n      .drag()\n      .pinch()\n      .wheel()\n      .decelerate()\n      .clampZoom({ maxScale: 1 });\n    this.app.stage.addChild(this.viewport);\n\n    // create layers\n    this.edgeLayer = new PIXI.Container();\n    this.frontEdgeLayer = new PIXI.Container();\n    this.nodeLayer = new PIXI.Container();\n    this.nodeLabelLayer = new PIXI.Container();\n    this.frontNodeLayer = new PIXI.Container();\n    this.frontNodeLabelLayer = new PIXI.Container();\n    this.viewport.addChild(this.edgeLayer);\n    this.viewport.addChild(this.frontEdgeLayer);\n    this.viewport.addChild(this.nodeLayer);\n    this.viewport.addChild(this.nodeLabelLayer);\n    this.viewport.addChild(this.frontNodeLayer);\n    this.viewport.addChild(this.frontNodeLabelLayer);\n\n    this.resizeObserver = new ResizeObserver(() => {\n      this.app.resize();\n      this.viewport.resize(this.container.clientWidth, this.container.clientHeight);\n      this.updateGraphVisibility();\n    });\n\n    // preload resources\n    if (this.resources) {\n      this.app.loader.add(this.resources);\n    }\n    this.app.loader.load(() => {\n      this.viewport.on('frame-end', () => {\n        if (this.viewport.dirty) {\n          this.updateGraphVisibility();\n          this.viewport.dirty = false;\n        }\n      });\n\n      this.resizeObserver.observe(this.container);\n\n      // listen to graph changes\n      this.graph.on('nodeAdded', this.onGraphNodeAddedBound);\n      this.graph.on('edgeAdded', this.onGraphEdgeAddedBound);\n      this.graph.on('nodeDropped', this.onGraphNodeDroppedBound);\n      this.graph.on('edgeDropped', this.onGraphEdgeDroppedBound);\n      this.graph.on('cleared', this.onGraphClearedBound);\n      this.graph.on('edgesCleared', this.onGraphEdgesClearedBound);\n      this.graph.on('nodeAttributesUpdated', this.onGraphNodeAttributesUpdatedBound);\n      this.graph.on('edgeAttributesUpdated', this.onGraphEdgeAttributesUpdatedBound);\n      this.graph.on('eachNodeAttributesUpdated', this.onGraphEachNodeAttributesUpdatedBound);\n      this.graph.on('eachEdgeAttributesUpdated', this.onGraphEachEdgeAttributesUpdatedBound);\n\n      // initial draw\n      this.createGraph();\n      this.resetView();\n    });\n  }\n\n  destroy() {\n    this.graph.off('nodeAdded', this.onGraphNodeAddedBound);\n    this.graph.off('edgeAdded', this.onGraphEdgeAddedBound);\n    this.graph.off('nodeDropped', this.onGraphNodeDroppedBound);\n    this.graph.off('edgeDropped', this.onGraphEdgeDroppedBound);\n    this.graph.off('cleared', this.onGraphClearedBound);\n    this.graph.off('edgesCleared', this.onGraphEdgesClearedBound);\n    this.graph.off('nodeAttributesUpdated', this.onGraphNodeAttributesUpdatedBound);\n    this.graph.off('edgeAttributesUpdated', this.onGraphEdgeAttributesUpdatedBound);\n    this.graph.off('eachNodeAttributesUpdated', this.onGraphEachNodeAttributesUpdatedBound);\n    this.graph.off('eachEdgeAttributesUpdated', this.onGraphEachEdgeAttributesUpdatedBound);\n\n    this.resizeObserver.disconnect();\n    this.resizeObserver = undefined!;\n\n    this.textureCache.destroy();\n    this.textureCache = undefined!;\n\n    this.app.destroy(true, { children: true, texture: true, baseTexture: true });\n    this.app = undefined!;\n  }\n\n  private get zoomStep() {\n    return Math.min(this.viewport.worldWidth, this.viewport.worldHeight) / 10;\n  }\n\n  zoomIn() {\n    this.viewport.zoom(-this.zoomStep, true);\n  }\n\n  zoomOut() {\n    this.viewport.zoom(this.zoomStep, true);\n  }\n\n  resetView() {\n    const nodesX = this.graph.nodes().map(nodeKey => this.graph.getNodeAttribute(nodeKey, 'x'));\n    const nodesY = this.graph.nodes().map(nodeKey => this.graph.getNodeAttribute(nodeKey, 'y'));\n    const minX = Math.min(...nodesX);\n    const maxX = Math.max(...nodesX);\n    const minY = Math.min(...nodesY);\n    const maxY = Math.max(...nodesY);\n\n    const graphWidth = Math.abs(maxX - minX);\n    const graphHeight = Math.abs(maxY - minY);\n    const graphCenter = new PIXI.Point(minX + graphWidth / 2, minY + graphHeight / 2);\n\n    const worldWidth = graphWidth + WORLD_PADDING * 2;\n    const worldHeight = graphHeight + WORLD_PADDING * 2;\n    \n    // TODO: update worldWidth/worldHeight when graph is updated?\n    this.viewport.resize(this.container.clientWidth, this.container.clientHeight, worldWidth, worldHeight);\n\n    this.viewport.setZoom(1); // otherwise scale is 0 when initialized in React useEffect\n    this.viewport.center = graphCenter;\n    this.viewport.fit(true);\n  }\n\n  private onGraphNodeAdded(data: { key: string, attributes: NodeAttributes }) {\n    const nodeKey = data.key;\n    const nodeAttributes = data.attributes;\n    this.createNode(nodeKey, nodeAttributes);\n  }\n\n  private onGraphEdgeAdded(data: { key: string, attributes: EdgeAttributes, source: string, target: string }) {\n    const edgeKey = data.key;\n    const edgeAttributes = data.attributes;\n    const sourceNodeKey = data.source;\n    const targetNodeKey = data.target;\n    const sourceNodeAttributes = this.graph.getNodeAttributes(sourceNodeKey);\n    const targetNodeAttributes = this.graph.getNodeAttributes(targetNodeKey);\n    this.createEdge(edgeKey, edgeAttributes, sourceNodeKey, targetNodeKey, sourceNodeAttributes, targetNodeAttributes);\n  }\n\n  private onGraphNodeDropped(data: { key: string }) {\n    const nodeKey = data.key;\n    this.dropNode(nodeKey);\n  }\n\n  private onGraphEdgeDropped(data: { key: string }) {\n    const edgeKey = data.key;\n    this.dropEdge(edgeKey);\n  }\n\n  private onGraphCleared() {\n    Array.from(this.edgeKeyToEdgeObject.keys()).forEach(this.dropEdge.bind(this));\n    Array.from(this.nodeKeyToNodeObject.keys()).forEach(this.dropNode.bind(this));\n  }\n\n  private onGraphEdgesCleared() {\n    Array.from(this.edgeKeyToEdgeObject.keys()).forEach(this.dropEdge.bind(this));\n  }\n\n  private onGraphNodeAttributesUpdated(data: { key: string }) {\n    const nodeKey = data.key;\n    this.updateNodeStyleByKey(nodeKey);\n    // TODO: normalize position?\n  }\n\n  private onGraphEdgeAttributesUpdated(data: { key: string }) {\n    const edgeKey = data.key;\n    this.updateEdgeStyleByKey(edgeKey);\n  }\n\n  private onGraphEachNodeAttributesUpdated() {\n    this.graph.forEachNode(this.updateNodeStyle.bind(this));\n  }\n\n  private onGraphEachEdgeAttributesUpdated() {\n    this.graph.forEachEdge(this.updateEdgeStyle.bind(this));\n  }\n\n  private hoverNode(nodeKey: string) {\n    const node = this.nodeKeyToNodeObject.get(nodeKey)!;\n    if (node.hovered) {\n      return;\n    }\n\n    // update style\n    node.hovered = true;\n    this.updateNodeStyleByKey(nodeKey);\n\n    // move to front\n    const nodeIndex = this.nodeLayer.getChildIndex(node.nodeGfx);\n    this.nodeLayer.removeChildAt(nodeIndex);\n    this.nodeLabelLayer.removeChildAt(nodeIndex);\n    this.frontNodeLayer.removeChildAt(nodeIndex);\n    this.frontNodeLabelLayer.removeChildAt(nodeIndex);\n    this.nodeLayer.addChild(node.nodePlaceholderGfx);\n    this.nodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx);\n    this.frontNodeLayer.addChild(node.nodeGfx);\n    this.frontNodeLabelLayer.addChild(node.nodeLabelGfx);\n  }\n\n  private unhoverNode(nodeKey: string) {\n    const node = this.nodeKeyToNodeObject.get(nodeKey)!;\n    if (!node.hovered) {\n      return;\n    }\n\n    // update style\n    node.hovered = false;\n    this.updateNodeStyleByKey(nodeKey);\n\n    // move to front\n    const nodeIndex = this.frontNodeLayer.getChildIndex(node.nodeGfx);\n    this.nodeLayer.removeChildAt(nodeIndex);\n    this.nodeLabelLayer.removeChildAt(nodeIndex);\n    this.frontNodeLayer.removeChildAt(nodeIndex);\n    this.frontNodeLabelLayer.removeChildAt(nodeIndex);\n    this.nodeLayer.addChild(node.nodeGfx);\n    this.nodeLabelLayer.addChild(node.nodeLabelGfx);\n    this.frontNodeLayer.addChild(node.nodePlaceholderGfx);\n    this.frontNodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx);\n  }\n\n  private hoverEdge(edgeKey: string) {\n    const edge = this.edgeKeyToEdgeObject.get(edgeKey)!;\n    if (edge.hovered) {\n      return;\n    }\n\n    // update style\n    edge.hovered = true;\n    this.updateEdgeStyleByKey(edgeKey);\n\n    // move to front\n    const edgeIndex = this.edgeLayer.getChildIndex(edge.edgeGfx);\n    this.edgeLayer.removeChildAt(edgeIndex);\n    this.frontEdgeLayer.removeChildAt(edgeIndex);\n    this.edgeLayer.addChild(edge.edgePlaceholderGfx);\n    this.frontEdgeLayer.addChild(edge.edgeGfx);\n  }\n\n  private unhoverEdge(edgeKey: string) {\n    const edge = this.edgeKeyToEdgeObject.get(edgeKey)!;\n    if (!edge.hovered) {\n      return;\n    }\n\n    // update style\n    edge.hovered = false;\n    this.updateEdgeStyleByKey(edgeKey);\n\n    // move back\n    const edgeIndex = this.frontEdgeLayer.getChildIndex(edge.edgeGfx);\n    this.edgeLayer.removeChildAt(edgeIndex);\n    this.frontEdgeLayer.removeChildAt(edgeIndex);\n    this.edgeLayer.addChild(edge.edgeGfx);\n    this.frontEdgeLayer.addChild(edge.edgePlaceholderGfx);\n  }\n\n  private moveNode(nodeKey: string, point: PIXI.IPointData) {\n    this.graph.setNodeAttribute(nodeKey, 'x', point.x);\n    this.graph.setNodeAttribute(nodeKey, 'y', point.y);\n\n    // update style\n    this.updateNodeStyleByKey(nodeKey);\n    this.graph.edges(nodeKey).forEach(this.updateEdgeStyleByKey.bind(this));\n  }\n\n  private enableNodeDragging() {\n    this.viewport.pause = true; // disable viewport dragging\n\n    document.addEventListener('mousemove', this.onDocumentMouseMoveBound);\n  }\n\n  private onDocumentMouseMove(event: MouseEvent) {\n    const eventPosition = new PIXI.Point(event.offsetX, event.offsetY);\n    const worldPosition = this.viewport.toWorld(eventPosition);\n\n    if (this.mousedownNodeKey) {\n      this.moveNode(this.mousedownNodeKey, worldPosition);\n    }\n  }\n\n  private onDocumentMouseUp() {\n    this.viewport.pause = false; // enable viewport dragging\n\n    document.removeEventListener('mousemove', this.onDocumentMouseMoveBound);\n\n    this.mousedownNodeKey = null;\n    this.mousedownEdgeKey = null;\n  }\n\n  private createGraph() {\n    this.graph.forEachNode(this.createNode.bind(this));\n    this.graph.forEachEdge(this.createEdge.bind(this));\n  }\n\n  private createNode(nodeKey: string, nodeAttributes: NodeAttributes) {\n    const node = new PixiNode();\n    node.on('mousemove', (event: MouseEvent) => {\n      this.emit('nodeMousemove', event, nodeKey);\n    });\n    node.on('mouseover', (event: MouseEvent) => {\n      if (!this.mousedownNodeKey) {\n        this.hoverNode(nodeKey);\n      }\n      this.emit('nodeMouseover', event, nodeKey);\n    });\n    node.on('mouseout', (event: MouseEvent) => {\n      if (!this.mousedownNodeKey) {\n        this.unhoverNode(nodeKey);\n      }\n      this.emit('nodeMouseout', event, nodeKey);\n    });\n    node.on('mousedown', (event: MouseEvent) => {\n      this.mousedownNodeKey = nodeKey;\n\n      if (this.nodeDragging) {\n        this.enableNodeDragging();\n      }\n\n      document.addEventListener('mouseup', this.onDocumentMouseUpBound, { once: true });\n      this.emit('nodeMousedown', event, nodeKey);\n    });\n    node.on('mouseup', (event: MouseEvent) => {\n      this.emit('nodeMouseup', event, nodeKey);\n      // why native click event doesn't work?\n      if (this.mousedownNodeKey === nodeKey) {\n        this.emit('nodeClick', event, nodeKey);\n      }\n    });\n    this.nodeLayer.addChild(node.nodeGfx);\n    this.nodeLabelLayer.addChild(node.nodeLabelGfx);\n    this.frontNodeLayer.addChild(node.nodePlaceholderGfx);\n    this.frontNodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx);\n    this.nodeKeyToNodeObject.set(nodeKey, node);\n\n    this.updateNodeStyle(nodeKey, nodeAttributes);\n  }\n\n  private createEdge(edgeKey: string, edgeAttributes: EdgeAttributes, sourceNodeKey: string, targetNodeKey: string, sourceNodeAttributes: NodeAttributes, targetNodeAttributes: NodeAttributes) {\n    const edge = new PixiEdge();\n    edge.on('mousemove', (event: MouseEvent) => {\n      this.emit('edgeMousemove', event, edgeKey);\n    });\n    edge.on('mouseover', (event: MouseEvent) => {\n      this.hoverEdge(edgeKey);\n      this.emit('edgeMouseover', event, edgeKey);\n    });\n    edge.on('mouseout', (event: MouseEvent) => {\n      this.unhoverEdge(edgeKey);\n      this.emit('edgeMouseout', event, edgeKey);\n    });\n    edge.on('mousedown', (event: MouseEvent) => {\n      this.mousedownEdgeKey = edgeKey;\n      this.emit('edgeMousedown', event, edgeKey);\n    });\n    edge.on('mouseup', (event: MouseEvent) => {\n      this.emit('edgeMouseup', event, edgeKey);\n      // why native click event doesn't work?\n      if (this.mousedownEdgeKey === edgeKey) {\n        this.emit('edgeClick', event, edgeKey);\n      }\n    });\n    this.edgeLayer.addChild(edge.edgeGfx);\n    this.frontEdgeLayer.addChild(edge.edgePlaceholderGfx);\n    this.edgeKeyToEdgeObject.set(edgeKey, edge);\n\n    this.updateEdgeStyle(edgeKey, edgeAttributes, sourceNodeKey, targetNodeKey, sourceNodeAttributes, targetNodeAttributes);\n  }\n\n  private dropNode(nodeKey: string) {\n    const node = this.nodeKeyToNodeObject.get(nodeKey)!;\n    \n    this.nodeLayer.removeChild(node.nodeGfx);\n    this.nodeLabelLayer.removeChild(node.nodeLabelGfx);\n    this.frontNodeLayer.removeChild(node.nodePlaceholderGfx);\n    this.frontNodeLabelLayer.removeChild(node.nodeLabelPlaceholderGfx);\n    this.nodeKeyToNodeObject.delete(nodeKey);\n  }\n\n  private dropEdge(edgeKey: string) {\n    const edge = this.edgeKeyToEdgeObject.get(edgeKey)!;\n    \n    this.edgeLayer.removeChild(edge.edgeGfx);\n    this.frontEdgeLayer.removeChild(edge.edgePlaceholderGfx);\n    this.edgeKeyToEdgeObject.delete(edgeKey);\n  }\n\n  private updateNodeStyleByKey(nodeKey: string) {\n    const nodeAttributes = this.graph.getNodeAttributes(nodeKey);\n    this.updateNodeStyle(nodeKey, nodeAttributes);\n  }\n\n  private updateNodeStyle(nodeKey: string, nodeAttributes: NodeAttributes) {\n    const node = this.nodeKeyToNodeObject.get(nodeKey)!;\n    \n    const nodePosition = { x: nodeAttributes.x, y: nodeAttributes.y };\n    node.updatePosition(nodePosition);\n\n    const nodeStyleDefinitions = [DEFAULT_STYLE.node, this.style.node, node.hovered ? this.hoverStyle.node : undefined];\n    const nodeStyle = resolveStyleDefinitions(nodeStyleDefinitions, nodeAttributes);\n    node.updateStyle(nodeStyle, this.textureCache);\n  }\n\n  private updateEdgeStyleByKey(edgeKey: string) {\n    const edgeAttributes = this.graph.getEdgeAttributes(edgeKey);\n    const sourceNodeKey = this.graph.source(edgeKey);\n    const targetNodeKey = this.graph.target(edgeKey);\n    const sourceNodeAttributes = this.graph.getNodeAttributes(sourceNodeKey);\n    const targetNodeAttributes = this.graph.getNodeAttributes(targetNodeKey);\n    this.updateEdgeStyle(edgeKey, edgeAttributes, sourceNodeKey, targetNodeKey, sourceNodeAttributes, targetNodeAttributes);\n  }\n\n  private updateEdgeStyle(edgeKey: string, edgeAttributes: EdgeAttributes, _sourceNodeKey: string, _targetNodeKey: string, sourceNodeAttributes: NodeAttributes, targetNodeAttributes: NodeAttributes) {\n    const edge = this.edgeKeyToEdgeObject.get(edgeKey)!;\n    // const sourceNode = this.nodeKeyToNodeObject.get(sourceNodeKey)!;\n    // const targetNode = this.nodeKeyToNodeObject.get(targetNodeKey)!;\n\n    const sourceNodePosition = { x: sourceNodeAttributes.x, y: sourceNodeAttributes.y };\n    const targetNodePosition = { x: targetNodeAttributes.x, y: targetNodeAttributes.y };\n    edge.updatePosition(sourceNodePosition, targetNodePosition);\n\n    const edgeStyleDefinitions = [DEFAULT_STYLE.edge, this.style.edge, edge.hovered ? this.hoverStyle.edge : undefined];\n    const edgeStyle = resolveStyleDefinitions(edgeStyleDefinitions, edgeAttributes);\n    edge.updateStyle(edgeStyle, this.textureCache);\n  }\n\n  private updateGraphVisibility() {\n    // culling\n    const cull = new Cull();\n    cull.addAll((this.viewport.children as PIXI.Container[]).map(layer => layer.children).flat());\n    cull.cull(this.app.renderer.screen);\n    // console.log(\n    //   Array.from((cull as any)._targetList as Set<PIXI.DisplayObject>).filter(x => x.visible === true).length,\n    //   Array.from((cull as any)._targetList as Set<PIXI.DisplayObject>).filter(x => x.visible === false).length\n    // );\n\n    // levels of detail\n    const zoom = this.viewport.scale.x;\n    const zoomSteps = [0.1, 0.2, 0.4, Infinity];\n    const zoomStep = zoomSteps.findIndex(zoomStep => zoom <= zoomStep);\n\n    this.graph.forEachNode(nodeKey => {\n      const node = this.nodeKeyToNodeObject.get(nodeKey)!;\n      node.updateVisibility(zoomStep);\n    });\n\n    this.graph.forEachEdge(edgeKey => {\n      const edge = this.edgeKeyToEdgeObject.get(edgeKey)!;\n      edge.updateVisibility(zoomStep);\n    });\n  }\n}\n"],"names":["TextType","textToPixi","type","content","style","text","TEXT","PIXI","Text","fontFamily","fontSize","fill","BITMAP_TEXT","Error","BitmapText","fontName","roundPixels","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","InputManager","[object Object]","viewport","touches","addListeners","interactive","forceHitArea","hitArea","Rectangle","worldWidth","worldHeight","on","down","move","up","wheelFunction","e","handleWheel","options","divWheel","addEventListener","passive","passiveWheel","isMouseDown","removeEventListener","event","pause","worldVisible","data","pointerType","get","pointerId","push","id","last","count","global","clone","decelerate","plugins","bounce","isActive","clickedAvailable","stopPropagation","change","Math","abs","threshold","stop","distX","x","distY","y","checkThreshold","remove","emit","screen","world","toWorld","point","Point","interaction","mapPositionToPoint","clientX","clientY","interactionDOMElement","target","toLocal","getPointerPosition","left","right","top","bottom","wheel","preventDefault","touch","i","length","splice","PLUGIN_ORDER","PluginManager","list","name","plugin","index","current","indexOf","sort","ignorePaused","paused","elapsed","update","resize","reset","resume","result","Plugin","parent","dragOptions","direction","pressDrag","wheelScroll","reverse","clampWheel","underflow","factor","mouseButtons","keyToPress","ignoreKeyToPressOnTouch","lineHeight","Drag","super","assign","moved","xDirection","yDirection","keyIsPressed","parseUnderflow","handleKeyPresses","codes","window","includes","code","buttons","mouse","clamp","toLowerCase","underflowX","underflowY","isMouse","input","button","checkButtons","checkKeyPress","active","newPoint","pointer","step","deltaMode","deltaX","deltaY","screenWorldWidth","screenWidth","scale","screenWorldHeight","screenHeight","pinchOptions","noDrag","percent","center","axis","Pinch","pointers","first","second","sqrt","pow","oldPoint","dist","isAxisX","isAxisY","moveCenter","toGlobal","lastCenter","pinching","clampOptions","Clamp","scaleX","scaleY","noUnderflow","original","clampZoomOptions","minWidth","minHeight","maxWidth","maxHeight","minScale","maxScale","ClampZoom","width","worldScreenWidth","height","worldScreenHeight","fitWidth","fitHeight","set","decelerateOptions","friction","minSpeed","TP","Decelerate","saved","timeSinceRelease","time","performance","now","save","percentChangeX","percentChangeY","ti","tf","k","lnk","log","commonjsGlobal","globalThis","self","penner","fn","module","exports","createCommonjsModule","factory","umd","linear","t","c","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","a","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","ease","defaults","bounceOptions","sides","bounceBox","Bounce","toX","toY","end","start","delta","box","x1","y1","topLeft","bottomRight","oob","drag","pinch","calcUnderflowX","calcUnderflowY","snapOptions","interrupt","removeOnComplete","removeOnInterrupt","forceStart","Snap","snapStart","snapping","corner","startX","startY","finished","moveCorner","snapZoomOptions","removeOnInterrupts","noMove","SnapZoom","xScale","yScale","xIndependent","yIndependent","container","createSnapping","startWorldScreenWidth","startWorldScreenHeight","endWorldScreenWidth","endWorldScreenHeight","oldCenter","followOptions","speed","acceleration","radius","Follow","velocity","angle","atan2","distance","decelerationDistance","min","max","changeX","changeY","wheelOptions","smooth","Wheel","smoothing","smoothingCenter","smoothingCount","dx","dy","dz","deltaZ","mouseEdgesOptions","noDecelerate","allowButtons","MouseEdges","radiusSquared","horizontal","vertical","identifier","toScreen","round","decelerateHorizontal","decelerateVertical","activate","animateOptions","Animate","setupPosition","setupZoom","position","keepCenter","startWidth","screenWidthInWorldPixels","deltaWidth","startHeight","screenHeightInWorldPixels","deltaHeight","callbackOnComplete","complete","originalZoom","viewportOptions","innerWidth","innerHeight","noTicker","disableOnContextMenu","Viewport","Container","ticker","pixiNS","parseInt","exec","VERSION","shared","Ticker","_worldWidth","_worldHeight","document","body","oncontextmenu","tickerFunction","elapsedMS","add","destroy","lastViewport","moving","zooming","_hitAreaDefault","_dirty","dirty","value","arguments","isNaN","newX","newY","noClamp","clampZoom","visible","clear","setZoom","scaled","cornerPoint","_forceHitArea","_pause","resizeToFit","fit","SHAPES","PI_2","Number","RECT","defineProperty","enumerable","configurable","copyFrom","rectangle","copyTo","contains","pad","paddingX","paddingY","x2","y2","ceil","resolution","eps","floor","enlarge","equals","ObservablePoint","cb","scope","_x","_y","Matrix","tx","ty","array","fromArray","toArray","transpose","out","Float32Array","apply","pos","newPos","applyInverse","translate","rotate","a1","c1","tx1","append","matrix","b1","d1","setTransform","pivotX","pivotY","rotation","skewX","skewY","prepend","decompose","transform","skew","invert","n","identity","ux","uy","vx","vy","signum","sign","row","j","_ux","_uy","_vx","_vy","init","Transform","worldTransform","localTransform","onChange","pivot","updateSkew","_rotation","_cx","_sx","_cy","_sy","_localID","_currentLocalID","_worldID","_parentID","updateLocalTransform","lt","updateTransform","parentTransform","pt","wt","setFromMatrix","IDENTITY","tempRect","Cull","_recursive","recursive","_toggle","toggle","_targetList","Set","targets","delete","rect","skipUpdate","uncull","forEach","getBounds","cullRecursive","_bounds","getRectangle","uncullRecursive","displayObject","bounds","children","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","EventEmitter","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","eventTargetAgnosticAddListener","once","handler","flags","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","m","events","existing","warning","newListener","unshift","warned","w","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","wrapListener","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","originalListener","shift","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","require$$0","isMergeableObject","isNonNullObject","stringValue","toString","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","deepmerge","val","isArray","defaultArrayMerge","source","map","element","getKeys","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","_","mergeObject","destination","propertyIsUnsafe","customMerge","getMergeFunction","arrayMerge","sourceIsArray","all","reduce","prev","next","resolveStyleDefinition","styleDefinition","attributes","fromEntries","entries","_a","resolveStyleDefinitions","styleDefinitions","styles","app","Map","TextureCache","defaultCallback","texture","textures","region","getLocalBounds","roundedRegion","renderer","generateTexture","SCALE_MODES","LINEAR","from","_this","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","baseHues","parse","cstr","space","parts","alpha","names","test","base","size","isRGB","replace","trim","split","parseFloat","match","join","r","g","G","B","h","hue","H","saturation","S","l","lightness","L","brightness","opacity","values","hsl","t1","t2","t3","rgb","colorToPixi","color","rgbaColor","raw","parsed","rgba","utils","rgb2hex","DELIMETER","WHITE","NODE_CIRCLE","NODE_CIRCLE_BORDER","NODE_ICON","NODE_LABEL_BACKGROUND","NODE_LABEL_TEXT","_super","nodeGfx","createNode","nodeLabelGfx","createNodeLabel","nodePlaceholderGfx","nodeLabelPlaceholderGfx","PixiNode","buttonMode","originalEvent","Circle","nodeCircle","Sprite","anchor","addChild","nodeCircleBorder","nodeIcon","nodeLabelBackground","Texture","nodeLabelText","nodeStyle","textureCache","nodeOuterSize","border","nodeCircleTextureKey","nodeCircleTexture","graphics","Graphics","beginFill","drawCircle","nodeCircleBorderTextureKey","nodeCircleBorderTexture","lineStyle","nodeIconTextureKey","icon","nodeIconTexture","getChildByName","tint","_b","_c","updateNodeStyle","nodeLabelTextTextureKey","label","nodeLabelTextTexture","padding","backgroundColor","updateNodeLabelStyle","zoomStep","updateNodeVisibility","updateNodeLabelVisibility","TypedEmitter","EDGE_LINE","edgeGfx","createEdge","edgePlaceholderGfx","PixiEdge","edgeLine","sourceNodePosition","targetNodePosition","hypot","edgeStyle","_textureCache","updateEdgeStyle","updateEdgeVisibility","DEFAULT_STYLE","node","edge","onGraphNodeAdded","onGraphEdgeAdded","onGraphNodeDropped","onGraphEdgeDropped","onGraphCleared","onGraphEdgesCleared","onGraphNodeAttributesUpdated","onGraphEdgeAttributesUpdated","onGraphEachNodeAttributesUpdated","onGraphEachEdgeAttributesUpdated","onDocumentMouseMove","onDocumentMouseUp","graph","hoverStyle","resources","nodeDragging","settings","FAIL_IF_MAJOR_PERFORMANCE_CAVEAT","HTMLElement","Application","resizeTo","devicePixelRatio","transparent","antialias","autoDensity","appendChild","view","moveWhenInside","clientWidth","clientHeight","stage","edgeLayer","frontEdgeLayer","nodeLayer","nodeLabelLayer","frontNodeLayer","frontNodeLabelLayer","resizeObserver","ResizeObserver","updateGraphVisibility","loader","load","observe","onGraphNodeAddedBound","onGraphEdgeAddedBound","onGraphNodeDroppedBound","onGraphEdgeDroppedBound","onGraphClearedBound","onGraphEdgesClearedBound","onGraphNodeAttributesUpdatedBound","onGraphEdgeAttributesUpdatedBound","onGraphEachNodeAttributesUpdatedBound","onGraphEachEdgeAttributesUpdatedBound","createGraph","resetView","PixiGraph","disconnect","baseTexture","zoom","nodesX","nodes","nodeKey","getNodeAttribute","nodesY","minX","maxX","minY","maxY","graphWidth","graphHeight","graphCenter","WORLD_PADDING","nodeAttributes","edgeKey","edgeAttributes","sourceNodeKey","targetNodeKey","sourceNodeAttributes","getNodeAttributes","targetNodeAttributes","dropNode","dropEdge","edgeKeyToEdgeObject","nodeKeyToNodeObject","updateNodeStyleByKey","updateEdgeStyleByKey","forEachNode","forEachEdge","hovered","nodeIndex","getChildIndex","removeChildAt","edgeIndex","setNodeAttribute","edges","onDocumentMouseMoveBound","eventPosition","offsetX","offsetY","worldPosition","mousedownNodeKey","moveNode","mousedownEdgeKey","hoverNode","unhoverNode","enableNodeDragging","onDocumentMouseUpBound","hoverEdge","unhoverEdge","removeChild","nodePosition","updatePosition","updateStyle","getEdgeAttributes","_sourceNodeKey","_targetNodeKey","cull","addAll","layer","flat","Infinity","findIndex","updateVisibility"],"mappings":"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"}